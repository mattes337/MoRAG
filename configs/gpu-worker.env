# GPU Worker Configuration
# Copy this file to your GPU machine and modify as needed

# Redis Connection (must match main server)
REDIS_URL=redis://YOUR_MAIN_SERVER_IP:6379/0

# Worker Configuration
WORKER_TYPE=gpu
WORKER_NAME=gpu-worker-01
WORKER_QUEUES=gpu-tasks
WORKER_CONCURRENCY=2

# Celery Configuration
CELERY_SOFT_TIME_LIMIT=7200  # 2 hours
CELERY_TIME_LIMIT=7800       # 2 hours 10 minutes

# File Access Configuration
# Option A: Shared Network Storage
TEMP_DIR=/mnt/shared/morag-temp
UPLOAD_DIR=/mnt/shared/morag-uploads

# Option B: HTTP File Transfer (if shared storage not available)
# MAIN_SERVER_URL=http://YOUR_MAIN_SERVER_IP:8000
# FILE_TRANSFER_MODE=http

# GPU Configuration
CUDA_VISIBLE_DEVICES=0
WHISPER_MODEL_SIZE=large-v3
ENABLE_GPU_ACCELERATION=true

# Qdrant Configuration (must match main server)
QDRANT_URL=http://YOUR_MAIN_SERVER_IP:6333
QDRANT_COLLECTION_NAME=morag_documents

# Gemini API Configuration
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-1.5-flash
GEMINI_VISION_MODEL=gemini-1.5-flash

# Embedding Configuration
EMBEDDING_BATCH_SIZE=10
ENABLE_BATCH_EMBEDDING=true

# Retry Configuration
MORAG_RETRY_INDEFINITELY=true
MORAG_RETRY_BASE_DELAY=1.0
MORAG_RETRY_MAX_DELAY=300.0
MORAG_RETRY_EXPONENTIAL_BASE=2.0
MORAG_RETRY_JITTER=true
