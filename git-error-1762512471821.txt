> git -c user.useConfigOnly=true commit --quiet --allow-empty-message --file -
Check Python imports.....................................................Failed
- hook id: import-check
- exit code: 1

ERRORS:
  Missing import for 'v' used in packages\morag-stages\src\morag_stages\models\result.py
  Missing import for 'relationship_ids' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'min_share' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'fact_rel_type' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'total_facts' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'min_facts' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'template_params' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'merge_pairs' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'rel_type' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'query_name' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'params' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Missing import for 'mock_process_url' used in packages\morag-youtube\tests\test_youtube_service.py
  Missing import for 'mock_process_playlist' used in packages\morag-youtube\tests\test_youtube_service.py
  Missing import for 'TimeoutError' used in tests\unit\core\test_base_converter.py
  Missing import for 'MemoryError' used in tests\unit\core\test_base_converter.py
  Missing import for 'PermissionError' used in tests\unit\core\test_base_converter.py
  Missing import for 'process_batch' used in packages\morag-services\src\morag_services\cli.py
  Missing import for 'run_pipeline' used in packages\morag-services\src\morag_services\cli.py
  Missing import for 'process_content' used in packages\morag-services\src\morag_services\cli.py
  Missing import for 'relation' used in packages\morag-graph\src\morag_graph\storage\__init__.py
  Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\storage\__init__.py
  Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\__init__.py
  Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\storage\__init__.py
  Missing import for 'target_id' used in packages\morag-graph\src\morag_graph\storage\__init__.py
  Missing import for 'source_id' used in packages\morag-graph\src\morag_graph\storage\__init__.py
  Missing import for 'FileNotFoundError' used in scripts\check_syntax.py
  Missing import for 'SyntaxError' used in scripts\check_syntax.py
  Missing import for 'importlib' used in scripts\check_syntax.py
  Missing import for 'OSError' used in packages\morag-core\src\morag_core\utils\validation.py
  Missing import for 'RuntimeError' used in packages\morag-core\src\morag_core\utils\validation.py
  Missing import for 'args' used in tests\test_device_fallback.py
  Missing import for 'name' used in tests\test_device_fallback.py
  Missing import for 'RuntimeError' used in tests\test_device_fallback.py
  Missing import for 'main' used in tests\manual\test_transcription_fixes.py
  Missing import for 'test_qdrant_instantiation' used in tests\cli\test-qdrant-fix.py
  Missing import for 'main' used in tests\cli\test-qdrant-fix.py
  Missing import for 'parse_test' used in tests\manual\test_pdf_parsing.py
  Missing import for 'SyntaxError' used in tests\validate_tests.py
  Missing import for 'remote_job_id' used in packages\morag\src\morag\ingest_tasks.py
  Missing import for 'metadata' used in packages\morag\src\morag\ingest_tasks.py
  Missing import for 'use_content_checksum' used in packages\morag\src\morag\ingest_tasks.py
  Missing import for 'collection_name' used in packages\morag\src\morag\ingest_tasks.py
  Missing import for '_ingest' used in packages\morag\src\morag\ingest_tasks.py
  Missing import for 'processing_time' used in packages\morag\src\morag\ingest_tasks.py
  Missing import for 'FileNotFoundError' used in packages\morag\src\morag\ingest_tasks.py
  Missing import for 'replace_existing' used in packages\morag\src\morag\ingest_tasks.py
  Missing import for 'x' used in packages\morag-web\src\morag_web\processor.py
  Missing import for 'text' used in packages\morag-web\src\morag_web\processor.py
  Missing import for 'UnicodeDecodeError' used in packages\morag-web\src\morag_web\processor.py
  Missing import for 'file_path' used in tests\test_universal_converter.py

WARNINGS:
  Unused import 'Field' in packages\morag-graph\src\morag_graph\retrieval\models.py
  Unused import 'BaseModel' in packages\morag-graph\src\morag_graph\retrieval\models.py
  Unused import 'Any' in agents\factory\factory.py
  Unused import 'Generic' in agents\factory\factory.py
  Unused import 'annotations' in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Unused import 'Tuple' in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  Unused import 'os' in packages\morag-youtube\tests\test_youtube_service.py
  Unused import 'AsyncMock' in packages\morag-youtube\tests\test_youtube_service.py
  Unused import 'MagicMock' in packages\morag-youtube\tests\test_youtube_service.py
  Unused import 'YouTubeConfig' in packages\morag-youtube\tests\test_youtube_service.py
  Unused import 'ContentType' in packages\morag-services\src\morag_services\cli.py
  Unused import 'QdrantConfig' in packages\morag-graph\src\morag_graph\storage\__init__.py
  Unused import 'QdrantStorage' in packages\morag-graph\src\morag_graph\storage\__init__.py
  Unused import 'Neo4jConfig' in packages\morag-graph\src\morag_graph\storage\__init__.py
  Unused import 'Any' in packages\morag-graph\src\morag_graph\storage\__init__.py
  Unused import 'BaseStorage' in packages\morag-graph\src\morag_graph\storage\__init__.py
  Unused import 'JsonStorage' in packages\morag-graph\src\morag_graph\storage\__init__.py
  Unused import 'Neo4jStorage' in packages\morag-graph\src\morag_graph\storage\__init__.py
  Unused import 'Any' in scripts\check_syntax.py
  Unused import 'Tuple' in scripts\check_syntax.py
  Unused import 'importlib.util' in scripts\check_syntax.py
  Unused import 'Dict' in scripts\check_syntax.py
  Unused import 'Any' in packages\morag-core\src\morag_core\utils\validation.py
  Unused import 'List' in packages\morag-core\src\morag_core\utils\validation.py
  Unused import 'Dict' in packages\morag-core\src\morag_core\utils\validation.py
  Unused import 'Request' in tests\test_monitoring.py
  Unused import 'asyncio' in tests\test_monitoring.py
  Unused import 'os' in tests\test_monitoring.py
  Unused import 'time' in tests\manual\test_transcription_fixes.py
  Unused import 'settings' in tests\manual\test_transcription_fixes.py
  Unused import 'VideoConfig' in tests\manual\test_transcription_fixes.py
  Unused import 'os' in tests\cli\test-qdrant-fix.py
  Unused import 'PdfPipelineOptions' in tests\manual\test_pdf_parsing.py
  Unused import 'PdfFormatOption' in tests\manual\test_pdf_parsing.py
  Unused import 'partition_md' in tests\manual\test_pdf_parsing.py
  Unused import 'partition_docx' in tests\manual\test_pdf_parsing.py
  Unused import 'InputFormat' in tests\manual\test_pdf_parsing.py
  Unused import 'DocumentConverter' in tests\manual\test_pdf_parsing.py
  Unused import 'partition_pdf' in tests\manual\test_pdf_parsing.py
  Unused import 'os' in tests\manual\test_pdf_parsing.py
  Unused import 'partition' in tests\manual\test_pdf_parsing.py
  Unused import 'DatabaseConfig' in packages\morag\src\morag\ingest_tasks.py
  Unused import 'asyncio' in packages\morag\src\morag\ingest_tasks.py
  Unused import 'DocumentChunk' in packages\morag\src\morag\ingest_tasks.py
  Unused import 'json' in packages\morag\src\morag\ingest_tasks.py
  Unused import 'Document' in packages\morag\src\morag\ingest_tasks.py
  Unused import 'asyncio' in packages\morag-graph\tests\test_query_entity_extractor.py
  Unused import 'MagicMock' in packages\morag-graph\tests\test_query_entity_extractor.py
  Unused import 'markdownify' in packages\morag-web\src\morag_web\processor.py
  Unused import 'patch' in tests\test_universal_converter.py
  Unused import 'AsyncMock' in tests\test_universal_converter.py
  Unused import 'Mock' in tests\test_universal_converter.py

Found 52 errors and 52 warnings
ERRORS:
  Missing import for 'FileNotFoundError' used in agents\config\entity_types.py
  Missing import for 'scored_facts' used in packages\morag-reasoning\src\morag_reasoning\citation_manager.py
  Missing import for 'OSError' used in packages\morag-reasoning\src\morag_reasoning\citation_manager.py
  Missing import for 'tmp_path' used in packages\morag-document\tests\test_service.py
  Missing import for 'RuntimeError' used in tests\test_gpu_error_simulation.py
  Missing import for 'gpu' used in tests\test_gpu_error_simulation.py
  Missing import for 'entities' used in tests\test_openie_pipeline_integration.py
  Missing import for 'relations' used in tests\test_openie_pipeline_integration.py
  Missing import for 'top_k' used in packages\morag-graph\src\morag_graph\operations\analytics.py
  Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\operations\analytics.py
  Missing import for 'x' used in packages\morag-graph\src\morag_graph\operations\analytics.py
  Missing import for 'min_cluster_size' used in packages\morag-graph\src\morag_graph\operations\analytics.py
  Missing import for 'c' used in packages\morag-graph\src\morag_graph\operations\analytics.py
  Missing import for 'text' used in packages\morag-services\src\morag_services\service_coordinator.py
  Missing import for 'service_type' used in packages\morag-services\src\morag_services\service_coordinator.py
  Missing import for 'jitter' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
  Missing import for 'wrapper' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
  Missing import for 'args' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
  Missing import for 'exponential_base' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
  Missing import for 'retry_with_exponential_backoff' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
  Missing import for 'kwargs' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
  Missing import for 'similarity_threshold' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  Missing import for 'batch_size' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  Missing import for 'x' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  Missing import for 'query_embedding' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  Missing import for 'output_format' used in packages\morag-image\src\morag_image\service.py
  Missing import for 'file_paths' used in packages\morag-image\src\morag_image\service.py
  Missing import for 'max_concurrency' used in packages\morag-image\src\morag_image\service.py
  Missing import for 'save_output' used in packages\morag-image\src\morag_image\service.py
  Missing import for 'main_extraction' used in packages\morag-graph\src\morag_graph\extraction\relation_extractor.py
  Missing import for 'test_rest_api_with_custom_databases' used in cli\test-custom-database-retrieval.py
  Missing import for 'mock_fn' used in packages\morag-services\tests\test_pipeline.py
  Missing import for 'data' used in packages\morag-services\tests\test_pipeline.py
  Missing import for 'extract_text' used in packages\morag-services\tests\test_pipeline.py

WARNINGS:
  Unused import 'os' in agents\config\entity_types.py
  Unused import 'Set' in agents\config\entity_types.py
  Unused import 'os' in packages\morag-document\tests\test_service.py
  Unused import 'ValidationError' in packages\morag-document\tests\test_service.py
  Unused import 'patch' in packages\morag-document\tests\test_service.py
  Unused import 'ChunkingStrategy' in packages\morag-document\tests\test_service.py
  Unused import 'Path' in packages\morag-document\tests\test_service.py
  Unused import 'Dict' in tests\test_openie_pipeline_integration.py
  Unused import 'patch' in tests\test_openie_pipeline_integration.py
  Unused import 'asyncio' in tests\test_openie_pipeline_integration.py
  Unused import 'List' in tests\test_openie_pipeline_integration.py
  Unused import 'Any' in tests\test_openie_pipeline_integration.py
  Unused import 'Mock' in agents\tests\test_processing_agents.py
  Unused import 'AsyncMock' in agents\tests\test_processing_agents.py
  Unused import 'asyncio' in agents\tests\test_processing_agents.py
  Unused import 'Union' in packages\morag-core\src\morag_core\interfaces\embedding.py
  Unused import 'AgentConfig' in packages\morag-services\src\morag_services\service_coordinator.py
  Unused import 'os' in packages\morag-services\src\morag_services\service_coordinator.py
  Unused import 'Path' in packages\morag-services\src\morag_services\service_coordinator.py
  Unused import 'Tuple' in packages\morag-services\src\morag_services\service_coordinator.py
  Unused import 'field' in packages\morag-services\src\morag_services\service_coordinator.py
  Unused import 'create_agent' in packages\morag-services\src\morag_services\service_coordinator.py
  Unused import 'UnsupportedFormatError' in packages\morag-services\src\morag_services\service_coordinator.py
  Unused import 'json' in tests\test_markdown_conversion_endpoint.py
  Unused import 'AsyncMock' in tests\test_markdown_conversion_endpoint.py
  Unused import 'AsyncMock' in packages\morag-reasoning\tests\test_fact_scorer.py
  Unused import 'patch' in packages\morag-reasoning\tests\test_fact_scorer.py
  Unused import 'asyncio' in packages\morag-reasoning\tests\test_fact_scorer.py
  Unused import 'AsyncMock' in tests\test_enhanced_converters.py
  Unused import 'asyncio' in tests\test_enhanced_converters.py
  Unused import 'FactGraphBuilder' in packages\morag-graph\tests\test_fact_extraction.py
  Unused import 'asyncio' in packages\morag-graph\tests\test_fact_extraction.py
  Unused import 'datetime' in packages\morag-graph\tests\test_fact_extraction.py
  Unused import 'Entity' in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  Unused import 'Tuple' in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  Unused import 'timezone' in packages\morag\src\morag\services\document_deduplication_service.py
  Unused import 'datetime' in packages\morag\src\morag\services\document_deduplication_service.py
  Unused import 'List' in packages\morag\src\morag\services\document_deduplication_service.py
  Unused import 'asyncio' in packages\morag-image\src\morag_image\service.py
  Unused import 'EnhancedFactProcessingService' in refactor\archived_code\chunk_processor_original.py
  Unused import 'Tuple' in refactor\archived_code\chunk_processor_original.py
  Unused import 'asyncio' in refactor\archived_code\chunk_processor_original.py
  Unused import 'UnifiedIDGenerator' in refactor\archived_code\chunk_processor_original.py
  Unused import 'MagicMock' in packages\morag-services\tests\test_pipeline.py
  Unused import 'patch' in packages\morag-services\tests\test_pipeline.py
  Unused import 'glob' in packages\morag-core\src\morag_core\utils\file_handling.py
  Unused import 'Tuple' in packages\morag-core\src\morag_core\utils\file_handling.py
  Unused import 'List' in packages\morag-core\src\morag_core\utils\file_handling.py

Found 36 errors and 48 warnings
ERRORS:
  Missing import for 't' used in packages\morag-core\src\morag_core\agents\cfg_extraction_agent.py
  Missing import for 'min_confidence' used in packages\morag-core\src\morag_core\agents\cfg_extraction_agent.py
  Missing import for 'auth_token' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'document_id' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'error_message' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'progress_percent' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'task_id' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'step' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'data' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'status' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'webhook_url' used in packages\morag\src\morag\services\enhanced_webhook_service.py
  Missing import for 'remote_file_path' used in cli\webdav-processor.py
  Missing import for 'max_size' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
  Missing import for 'max_chunk_size' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
  Missing import for 'document' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
  Missing import for 'options' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
  Missing import for 'start_chunk_index' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
  Missing import for 'FileNotFoundError' used in agents\config\relation_types.py
  Missing import for 'identifier' used in packages\morag\src\morag\agents\morag_pipeline_agent.py
  Missing import for 'options' used in packages\morag\src\morag\agents\morag_pipeline_agent.py
  Missing import for 'data' used in packages\morag\src\morag\agents\morag_pipeline_agent.py
  Missing import for 'source' used in packages\morag\src\morag\agents\morag_pipeline_agent.py
  Missing import for 'tmp_path' used in packages\morag-document\tests\test_processor.py
  Missing import for 'task_type' used in tests\unit\services\test_embedding_service.py
  Missing import for 'batch_size' used in tests\unit\services\test_embedding_service.py
  Missing import for 'OSError' used in packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py
  Missing import for 'RuntimeError' used in packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py
  Missing import for 'NotImplementedError' used in packages\morag-document\src\morag_document\converters\base.py
  Missing import for 'start_chunk_index' used in packages\morag-document\src\morag_document\converters\base.py
  Missing import for 'max_size' used in packages\morag-document\src\morag_document\converters\base.py
  Missing import for 'max_chunk_size' used in packages\morag-document\src\morag_document\converters\base.py
  Missing import for 'FileNotFoundError' used in tests\test_debug_session.py
  Missing import for 'SystemExit' used in tests\test_debug_session.py

WARNINGS:
  Unused import 'Union' in packages\morag-core\src\morag_core\agents\cfg_extraction_agent.py
  Unused import 'List' in packages\morag\src\morag\services\enhanced_webhook_service.py
  Unused import 'time' in packages\morag\src\morag\services\enhanced_webhook_service.py
  Unused import 'datetime' in packages\morag-graph\src\morag_graph\utils\id_generation.py
  Unused import 'uuid' in packages\morag-graph\src\morag_graph\utils\id_generation.py
  Unused import 'Union' in packages\morag-graph\src\morag_graph\utils\id_generation.py
  Unused import 'Optional' in packages\morag-graph\src\morag_graph\utils\id_generation.py
  Unused import 'urljoin' in packages\morag-web\src\morag_web\web_formatter.py
  Unused import 'Path' in packages\morag-web\src\morag_web\web_formatter.py
  Unused import 'StageError' in cli\webdav-processor.py
  Unused import 'StageStatus' in cli\webdav-processor.py
  Unused import 'tempfile' in cli\webdav-processor.py
  Unused import 'StageExecutionError' in cli\webdav-processor.py
  Unused import 'ServiceConfig' in cli\webdav-processor.py
  Unused import 'StageValidationError' in cli\webdav-processor.py
  Unused import 'Path' in packages\morag-document\src\morag_document\converters\chunking_processor.py
  Unused import 'os' in agents\config\relation_types.py
  Unused import 'Set' in agents\config\relation_types.py
  Unused import 'MagicMock' in packages\morag-graph\tests\test_hybrid_fact_extraction.py
  Unused import 'shutil' in cli\test-temp-directory-validation.py
  Unused import 'MagicMock' in tests\test_page_based_chunking.py
  Unused import 'time' in scripts\test-docker.py
  Unused import 'DocumentChunk' in packages\morag\src\morag\agents\morag_pipeline_agent.py
  Unused import 'asyncio' in packages\morag\src\morag\agents\morag_pipeline_agent.py
  Unused import 'NamedTuple' in packages\morag\src\morag\agents\morag_pipeline_agent.py
  Unused import 'MoRAGServices' in packages\morag\src\morag\agents\morag_pipeline_agent.py
  Unused import 'os' in packages\morag-document\tests\test_processor.py
  Unused import 'Path' in packages\morag-document\tests\test_processor.py
  Unused import 'asyncio' in tests\test_semantic_chunking.py
  Unused import 'ProcessingResult' in packages\morag-core\src\morag_core\interfaces\__init__.py
  Unused import 'BaseProcessor' in packages\morag-core\src\morag_core\interfaces\__init__.py
  Unused import 'IContentProcessor' in packages\morag-core\src\morag_core\interfaces\__init__.py
  Unused import 'IServiceCoordinator' in packages\morag-core\src\morag_core\interfaces\__init__.py
  Unused import 'ProcessingConfig' in packages\morag-core\src\morag_core\interfaces\__init__.py
  Unused import 'StageValidationError' in packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py
  Unused import 'URLPath' in packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py
  Unused import 'ProcessingError' in packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py
  Unused import 'StageExecutionError' in packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py
  Unused import 'os' in test_circular_dependency_fix.py
  Unused import 'IServiceCoordinator' in test_circular_dependency_fix.py
  Unused import 'IContentProcessor' in test_circular_dependency_fix.py
  Unused import 'os' in packages\morag-document\src\morag_document\converters\base.py
  Unused import 'Any' in packages\morag-document\src\morag_document\converters\base.py
  Unused import 'Dict' in packages\morag-document\src\morag_document\converters\base.py
  Unused import 'os' in tests\test_debug_session.py
  Unused import 'stop_services' in tests\test_debug_session.py
  Unused import 'time' in tests\test_debug_session.py
  Unused import 'List' in packages\morag-services\src\morag_services\service_utilities.py
  Unused import 'AsyncMock' in tests\test_enhanced_processing_endpoint.py
  Unused import 'AsyncMock' in tests\integration\test_cross_package_integration.py
  Unused import 'Mock' in tests\integration\test_cross_package_integration.py
  Unused import 'Dict' in tests\integration\test_cross_package_integration.py
  Unused import 'Any' in tests\integration\test_cross_package_integration.py
  Unused import 'Optional' in tests\integration\test_cross_package_integration.py
  Unused import 'asyncio' in tests\integration\test_cross_package_integration.py

Found 33 errors and 55 warnings
ERRORS:
  Missing import for 'main' used in scripts\analyze_graph_relationships.py
  Missing import for 'analyze_relationships' used in scripts\analyze_graph_relationships.py
  Missing import for 'stage_test_framework' used in packages\morag-stages\tests\test_stage_chain.py
  Missing import for 'documents' used in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Missing import for 'force_update' used in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Missing import for 'text' used in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Missing import for 'doc_id' used in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Missing import for 'x' used in packages\morag-graph\src\morag_graph\query\intent_analyzer.py
  Missing import for 'max_relations_per_fact' used in packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py
  Missing import for 'test_path_selection' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'entity_name' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'verbose' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'main' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'KeyboardInterrupt' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'relation_type' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'exit' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'test_integration' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'test_iterative_retrieval' used in packages\morag-reasoning\test_reasoning_simple.py
  Missing import for 'mock_generate' used in packages\morag-reasoning\tests\test_integration.py
  Missing import for 'prompt' used in packages\morag-reasoning\tests\test_integration.py
  Missing import for 'query' used in packages\morag-graph\src\morag_graph\retrieval\coordinator.py
  Missing import for 'mock_qdrant_service' used in tests\unit\test_youtube_tasks.py
  Missing import for 'mock_gemini_service' used in tests\unit\test_youtube_tasks.py
  Missing import for 'mock_youtube_metadata' used in tests\unit\test_youtube_tasks.py
  Missing import for 'simulate_youtube_video_task' used in tests\unit\test_youtube_tasks.py
  Missing import for 'tmp_path' used in tests\unit\test_youtube_tasks.py
  Missing import for 'format_type' used in packages\morag-youtube\src\morag_youtube\transcript.py
  Missing import for 'preferred_language' used in packages\morag-youtube\src\morag_youtube\transcript.py
  Missing import for 'mock_process_file' used in packages\morag-services\tests\test_services.py
  Missing import for 'mock_convert_to_markdown' used in packages\morag-services\tests\test_services.py
  Missing import for 'kwargs' used in packages\morag-services\tests\test_services.py
  Missing import for 'auto_infer_domain' used in packages\morag-graph\src\morag_graph\extraction\entity_extractor.py
  Missing import for 'additional_context' used in packages\morag-graph\src\morag_graph\extraction\entity_extractor.py
  Missing import for 'kwargs' used in packages\morag-graph\src\morag_graph\extraction\entity_extractor.py
  Missing import for 'main_extraction' used in packages\morag-graph\src\morag_graph\extraction\entity_extractor.py
  Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py
  Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py
  Missing import for 'chunk_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py
  Missing import for 'documents' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py
  Missing import for 'dry_run' used in packages\morag\src\morag\api_models\endpoints\files.py
  Missing import for 'x' used in packages\morag\src\morag\api_models\endpoints\files.py
  Missing import for 'inline' used in packages\morag\src\morag\api_models\endpoints\files.py
  Missing import for 'UnicodeDecodeError' used in packages\morag\src\morag\api_models\endpoints\files.py
  Missing import for 'recursive' used in packages\morag\src\morag\api_models\endpoints\files.py
  Missing import for 'older_than_days' used in packages\morag\src\morag\api_models\endpoints\files.py
  Missing import for 'output_dir' used in packages\morag\src\morag\api_models\endpoints\files.py
  Missing import for 'main' used in tests\manual\test_universal_conversion.py
  Missing import for 'test_conversion' used in tests\manual\test_universal_conversion.py
  Missing import for 'KeyboardInterrupt' used in tests\manual\test_universal_conversion.py
  Missing import for 'test_mock_audio_processing' used in tests\manual\test_audio_transcription_fixes.py
  Missing import for 'audio_path' used in tests\manual\test_audio_transcription_fixes.py
  Missing import for 'test_audio_transcription_fixes' used in tests\manual\test_audio_transcription_fixes.py
  Missing import for 'test_video_transcription_fixes' used in tests\manual\test_audio_transcription_fixes.py
  Missing import for 'test_real_audio_processing' used in tests\manual\test_audio_transcription_fixes.py
  Missing import for 'x' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'file_path' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'max_depth' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'direction' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
  Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\storage\json_storage.py

WARNINGS:
  Unused import 'ConversionProcessors' in packages\morag-stages\src\morag_stages\stages\markdown_conversion.py
  Unused import 'MarkdownConversionStage' in packages\morag-stages\src\morag_stages\stages\markdown_conversion.py
  Unused import 'ConverterFactory' in packages\morag-stages\src\morag_stages\stages\markdown_conversion.py
  Unused import 'List' in scripts\analyze_graph_relationships.py
  Unused import 'SourceType' in tests\test_17_ingestion_api.py
  Unused import 'tempfile' in tests\test_17_ingestion_api.py
  Unused import 'AsyncMock' in tests\test_17_ingestion_api.py
  Unused import 'Path' in packages\morag-stages\tests\test_stage_chain.py
  Unused import 'CleanupResult' in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Unused import 'GraphBuildError' in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Unused import 'DocumentChunk' in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Unused import 'Entity' in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Unused import 'Relation' in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  Unused import 'time' in tests\test_ingest_endpoints.py
  Unused import 'json' in tests\test_ingest_endpoints.py
  Unused import 'Path' in tests\test_ingest_endpoints.py
  Unused import 'Any' in packages\morag-reasoning\test_reasoning_simple.py
  Unused import 'Dict' in packages\morag-reasoning\test_reasoning_simple.py
  Unused import 'Entity' in packages\morag-reasoning\tests\test_integration.py
  Unused import 'GraphPath' in packages\morag-reasoning\tests\test_integration.py
  Unused import 'Relation' in packages\morag-reasoning\tests\test_integration.py
  Unused import 'Any' in packages\morag-graph\src\morag_graph\retrieval\coordinator.py
  Unused import 'Dict' in packages\morag-graph\src\morag_graph\retrieval\coordinator.py
  Unused import 'os' in packages\morag-services\tests\test_services.py
  Unused import 'patch' in packages\morag-services\tests\test_services.py
  Unused import 'ServiceConfig' in packages\morag-services\tests\test_services.py
  Unused import 'Query' in packages\morag\src\morag\endpoints\reasoning.py
  Unused import 'datetime' in packages\morag\src\morag\endpoints\reasoning.py
  Unused import 'List' in packages\morag-reasoning\tests\test_batch_processing.py
  Unused import 'Any' in packages\morag-reasoning\tests\test_batch_processing.py
  Unused import 'Dict' in packages\morag-reasoning\tests\test_batch_processing.py
  Unused import 'BatchResult' in packages\morag-reasoning\tests\test_batch_processing.py
  Unused import 'asyncio' in packages\morag-reasoning\tests\test_batch_processing.py
  Unused import 'patch' in packages\morag-reasoning\tests\test_batch_processing.py
  Unused import 'BatchItem' in packages\morag-reasoning\tests\test_batch_processing.py
  Unused import 'List' in packages\morag\src\morag\api_models\endpoints\files.py
  Unused import 'Depends' in packages\morag\src\morag\api_models\endpoints\files.py
  Unused import 'FileDownloadResponse' in packages\morag\src\morag\api_models\endpoints\files.py
  Unused import 'os' in packages\morag\src\morag\api_models\endpoints\files.py
  Unused import 'shutil' in packages\morag\src\morag\api_models\endpoints\files.py
  Unused import 'ErrorResponse' in packages\morag\src\morag\api_models\endpoints\files.py
  Unused import 'get_conversion_config' in tests\manual\test_universal_conversion.py
  Unused import 'os' in tests\manual\test_audio_transcription_fixes.py
  Unused import 'VideoProcessor' in tests\manual\test_audio_transcription_fixes.py
  Unused import 'VideoConverter' in tests\manual\test_audio_transcription_fixes.py
  Unused import 'VideoConfig' in tests\manual\test_audio_transcription_fixes.py

Found 65 errors and 46 warnings
ERRORS:
  Missing import for 'process_audio_file' used in packages\morag-audio\examples\process_audio.py
  Missing import for 'file_path' used in packages\morag-audio\examples\process_audio.py
  Missing import for 'enable_diarization' used in packages\morag-audio\examples\process_audio.py
  Missing import for 'output_dir' used in packages\morag-audio\examples\process_audio.py
  Missing import for 'demo_video_converter_enhanced_markdown' used in examples\video_audio_integration_demo.py
  Missing import for 'main' used in examples\video_audio_integration_demo.py
  Missing import for 'demo_video_processor_integration' used in examples\video_audio_integration_demo.py
  Missing import for 'demo_configuration_options' used in examples\video_audio_integration_demo.py
  Missing import for 'demo_task_integration' used in examples\video_audio_integration_demo.py
  Missing import for 'main' used in examples\enhanced_audio_processing_demo.py
  Missing import for 'demo_markdown_conversion' used in examples\enhanced_audio_processing_demo.py
  Missing import for 'text' used in examples\enhanced_audio_processing_demo.py
  Missing import for 'demo_basic_audio_processing' used in examples\enhanced_audio_processing_demo.py
  Missing import for 'demo_enhanced_processing' used in examples\enhanced_audio_processing_demo.py
  Missing import for 'demo_speaker_diarization' used in examples\enhanced_audio_processing_demo.py
  Missing import for 'demo_topic_segmentation' used in examples\enhanced_audio_processing_demo.py
  Missing import for 'process_web_url' used in packages\morag-web\src\morag_web\tasks.py
  Missing import for 'process_web_urls_batch' used in packages\morag-web\src\morag_web\tasks.py
  Missing import for 'task_id' used in packages\morag-web\src\morag_web\tasks.py
  Missing import for 'process_multiple_images' used in packages\morag-image\examples\simple_image_processing.py
  Missing import for 'process_with_semaphore' used in packages\morag-image\src\morag_image\processor.py
  Missing import for 'max_concurrency' used in packages\morag-image\src\morag_image\processor.py
  Missing import for 'file_paths' used in packages\morag-image\src\morag_image\processor.py
  Missing import for 'image_path' used in packages\morag-image\src\morag_image\processor.py
  Missing import for 'config' used in packages\morag-image\src\morag_image\processor.py
  Missing import for 'options' used in tools\remote-converter\remote_converter.py
  Missing import for 'KeyboardInterrupt' used in tools\remote-converter\remote_converter.py
  Missing import for 'source_file_url' used in tools\remote-converter\remote_converter.py
  Missing import for 'normalize_side_effect' used in tests\test_enhanced_entity_normalization.py
  Missing import for 'entity_name' used in tests\test_enhanced_entity_normalization.py
  Missing import for 'x' used in packages\morag-graph\src\morag_graph\extraction\fact_validator.py
  Missing import for 'webhook_url' used in packages\morag-stages\src\morag_stages\webhook.py
  Missing import for 'run_relationship_cleanup_job' used in scripts\maintenance_runner.py
  Missing import for 'run_relationship_merger_job' used in scripts\maintenance_runner.py
  Missing import for 'run_keyword_linking_job' used in scripts\maintenance_runner.py
  Missing import for 'main_async' used in scripts\maintenance_runner.py
  Missing import for 'run_isolated_nodes_cleanup_job' used in scripts\maintenance_runner.py
  Missing import for 'run_keyword_deduplication_job' used in scripts\maintenance_runner.py
  Missing import for 'run_keyword_hierarchization_job' used in scripts\maintenance_runner.py
  Missing import for 'v' used in scripts\maintenance_runner.py
  Missing import for 'batch_items' used in packages\morag-graph\src\morag_graph\maintenance\base.py
  Missing import for 'llm_func' used in packages\morag-graph\src\morag_graph\maintenance\base.py
  Missing import for 'kwargs' used in packages\morag-graph\src\morag_graph\maintenance\base.py
  Missing import for 'critical_failure_threshold' used in packages\morag-graph\src\morag_graph\maintenance\base.py
  Missing import for 'func' used in packages\morag-graph\src\morag_graph\maintenance\base.py
  Missing import for 'args' used in packages\morag-graph\src\morag_graph\maintenance\base.py
  Missing import for 'operation' used in packages\morag-graph\src\morag_graph\maintenance\base.py
  Missing import for 'old_id' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
  Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
  Missing import for 'batch_size' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
  Missing import for 'relation_type' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
  Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
  Missing import for 'mock_generate_embedding' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Missing import for 'test_speaker_diarization_fix' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Missing import for 'mock_diarize_audio' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Missing import for 'main' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Missing import for 'test_batch_processing_delays' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Missing import for 'text' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Missing import for 'test_rate_limiting_fix' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Missing import for 'run_tests' used in packages\morag-graph\tests\test_integration.py
  Missing import for 'integration_suite' used in packages\morag-graph\tests\test_integration.py
  Missing import for 'x' used in packages\morag-graph\tests\test_integration.py

WARNINGS:
  Unused import 'shutil' in tests\cli\test-temp-directory-validation.py
  Unused import 'VideoService' in examples\video_audio_integration_demo.py
  Unused import 'VideoProcessor' in examples\video_audio_integration_demo.py
  Unused import 'tempfile' in examples\video_audio_integration_demo.py
  Unused import 'VideoConverter' in examples\video_audio_integration_demo.py
  Unused import 'settings' in examples\enhanced_audio_processing_demo.py
  Unused import 'DocumentChunk' in packages\morag-web\src\morag_web\tasks.py
  Unused import 'AsyncMock' in tests\integration\test_gemini.py
  Unused import 'asyncio' in tests\integration\test_gemini.py
  Unused import 'Path' in packages\morag-graph\src\morag_graph\visualization\langextract_visualizer.py
  Unused import 'np' in packages\morag-image\src\morag_image\processor.py
  Unused import 'List' in tools\remote-converter\remote_converter.py
  Unused import 'load_dotenv' in tools\remote-converter\remote_converter.py
  Unused import 'MagicMock' in tests\test_enhanced_entity_normalization.py
  Unused import 'asyncio' in tests\test_enhanced_entity_normalization.py
  Unused import 'LLMEntityNormalizer' in tests\test_enhanced_entity_normalization.py
  Unused import 'json' in packages\morag-stages\src\morag_stages\webhook.py
  Unused import 'StageStatus' in packages\morag-stages\src\morag_stages\webhook.py
  Unused import 'StageType' in packages\morag-stages\src\morag_stages\webhook.py
  Unused import 'annotations' in scripts\maintenance_runner.py
  Unused import 'annotations' in packages\morag-graph\src\morag_graph\maintenance\base.py
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\maintenance\base.py
  Unused import 'IDValidator' in packages\morag-graph\src\morag_graph\utils\id_migration.py
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\utils\id_migration.py
  Unused import 'os' in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Unused import 'patch' in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Unused import 'AsyncMock' in tests\test_speaker_diarization_and_rate_limiting_fixes.py
  Unused import 'patch' in packages\morag-graph\tests\test_relationship_cleanup_semantic_value.py
  Unused import 'json' in packages\morag-graph\tests\test_integration.py
  Unused import 'patch' in packages\morag-graph\tests\test_enhanced_type_generation.py
  Unused import 'List' in packages\morag-graph\tests\test_enhanced_type_generation.py
  Unused import 'AsyncMock' in packages\morag-graph\tests\test_enhanced_type_generation.py
  Unused import 'asyncio' in packages\morag-graph\tests\test_enhanced_type_generation.py

Found 62 errors and 33 warnings
ERRORS:
  Missing import for 'x' used in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Missing import for 'strategy' used in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Missing import for 'available_paths' used in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Missing import for 'KeyboardInterrupt' used in tests\cli\validate-standalone-cli.py
  Missing import for 'progress_callback' used in packages\morag-video\src\morag_video\processor.py
  Missing import for 'count' used in packages\morag-video\src\morag_video\processor.py
  Missing import for 'size' used in packages\morag-video\src\morag_video\processor.py
  Missing import for 'threshold' used in packages\morag-video\src\morag_video\processor.py
  Missing import for 'ZeroDivisionError' used in packages\morag-video\src\morag_video\processor.py
  Missing import for 'image_paths' used in packages\morag-video\src\morag_video\processor.py
  Missing import for 'max_frames' used in packages\morag-video\src\morag_video\processor.py
  Missing import for 'database_name' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\connection_operations.py
  Missing import for 'FileNotFoundError' used in scripts\build_check.py
  Missing import for 'x' used in tests\test_search_retrieval_functionality.py
  Missing import for 'test_chunking_with_word_boundaries' used in tests\test_improvements_integration.py
  Missing import for 'test_contextual_retrieval' used in tests\test_improvements_integration.py
  Missing import for 'test_pdf_processing' used in tests\test_improvements_integration.py
  Missing import for 'main' used in tests\test_improvements_integration.py
  Missing import for 'config_overrides' used in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
  Missing import for 'run_keyword_deduplication' used in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
  Missing import for 'progress_callback' used in packages\morag-audio\src\morag_audio\processor.py
  Missing import for 'g' used in packages\morag-reasoning\src\morag_reasoning\iterative_retrieval.py
  Missing import for 'initial_context' used in packages\morag-reasoning\src\morag_reasoning\iterative_retrieval.py
  Missing import for 'ConnectionError' used in tests\utils\mocks.py
  Missing import for 'vector_id' used in tests\utils\mocks.py
  Missing import for 'vector' used in tests\utils\mocks.py
  Missing import for 'status' used in tests\utils\mocks.py
  Missing import for 'limit' used in tests\utils\mocks.py
  Missing import for 'task_type' used in tests\utils\mocks.py
  Missing import for 'payload' used in tests\utils\mocks.py
  Missing import for 'FileNotFoundError' used in tests\utils\mocks.py
  Missing import for 'data' used in tests\utils\mocks.py
  Missing import for 'result' used in tests\utils\mocks.py
  Missing import for 'texts' used in tests\utils\mocks.py
  Missing import for 'LookupError' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Missing import for 'OSError' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Missing import for 'max_keywords' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Missing import for 'transcript' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Missing import for 'transcript_segments' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Missing import for 'data' used in packages\morag-services\src\morag_services\pipeline.py
  Missing import for 'generate_stream' used in packages\morag\src\morag\endpoints\enhanced_query.py
  Missing import for 'background_tasks' used in packages\morag\src\morag\endpoints\enhanced_query.py
  Missing import for '_handle_fact_based_query' used in packages\morag\src\morag\endpoints\enhanced_query.py
  Missing import for 'log_query_analytics' used in packages\morag\src\morag\endpoints\enhanced_query.py
  Missing import for 'request' used in packages\morag\src\morag\endpoints\enhanced_query.py
  Missing import for 'demo_video_transcription_fixes' used in examples\transcription_fixes_demo_alt.py
  Missing import for 'demo_audio_transcription_fixes' used in examples\transcription_fixes_demo_alt.py
  Missing import for 'main' used in examples\transcription_fixes_demo_alt.py
  Missing import for 'test_server_normalization' used in tests\test_dual_format.py
  Missing import for 'test_services_dual_processing' used in tests\test_dual_format.py
  Missing import for 'test_audio_dual_format' used in tests\test_dual_format.py
  Missing import for 'test_document_dual_format' used in tests\test_dual_format.py
  Missing import for 'test_video_dual_format' used in tests\test_dual_format.py
  Missing import for 'main' used in tests\test_dual_format.py

WARNINGS:
  Unused import 'Relation' in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Unused import 'ProcessingError' in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Unused import 'time' in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Unused import 'GraphTraversal' in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Unused import 'NamedTuple' in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Unused import 'Tuple' in packages\morag-graph\src\morag_graph\traversal\path_selector.py
  Unused import 'Any' in tests\cli\validate-standalone-cli.py
  Unused import 'List' in tests\cli\validate-standalone-cli.py
  Unused import 'asyncio' in tests\cli\validate-standalone-cli.py
  Unused import 'scenedetect' in packages\morag-video\src\morag_video\processor.py
  Unused import 'np' in packages\morag-video\src\morag_video\processor.py
  Unused import 'Optional' in tests\test_search_retrieval_functionality.py
  Unused import 'AsyncMock' in tests\test_search_retrieval_functionality.py
  Unused import 'asyncio' in tests\test_search_retrieval_functionality.py
  Unused import 'Mock' in tests\test_search_retrieval_functionality.py
  Unused import 'patch' in tests\test_search_retrieval_functionality.py
  Unused import 'tempfile' in tests\test_search_retrieval_functionality.py
  Unused import 'os' in tests\test_search_retrieval_functionality.py
  Unused import 'RelationExtractionResult' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'ProviderConfig' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'SummaryResult' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'create_agent' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'TranscriptAnalysisResult' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'AgentFactory' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'GeminiProvider' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'ContentAnalysisResult' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'ChunkingConfig' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'SemanticChunker' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'create_chunker' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'SemanticChunkingResult' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'create_agent_with_config' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'ChunkerFactory' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'EntityExtractionResult' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'MoRAGBaseAgent' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'ChunkingStrategy' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'AgentConfig' in packages\morag-core\src\morag_core\__init__.py
  Unused import 'GraphPath' in packages\morag-reasoning\src\morag_reasoning\graph_fact_extractor.py
  Unused import 'QueryContext' in packages\morag-reasoning\src\morag_reasoning\graph_fact_extractor.py
  Unused import 'Relation' in packages\morag-reasoning\src\morag_reasoning\graph_fact_extractor.py
  Unused import 'TraversalResult' in packages\morag-reasoning\src\morag_reasoning\graph_fact_extractor.py
  Unused import 'Entity' in packages\morag-reasoning\src\morag_reasoning\graph_fact_extractor.py
  Unused import 'tempfile' in tests\test_improvements_integration.py
  Unused import 'validate_float_range' in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
  Unused import 'validate_positive_int' in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
  Unused import 'annotations' in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
  Unused import 'PartialFailureError' in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
  Unused import 'EntitySimilarityCalculator' in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
  Unused import 'onnxruntime' in packages\morag-audio\src\morag_audio\processor.py
  Unused import 'field' in packages\morag-audio\src\morag_audio\processor.py
  Unused import 'os' in packages\morag-audio\src\morag_audio\processor.py
  Unused import 'asyncio' in tests\test_pydantic_ai_foundation.py
  Unused import 'AgentError' in tests\test_pydantic_ai_foundation.py
  Unused import 'AsyncMock' in tests\utils\mocks.py
  Unused import 'Mock' in tests\utils\mocks.py
  Unused import 'uuid' in tests\utils\mocks.py
  Unused import 'ProcessingError' in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Unused import 'AgglomerativeClustering' in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Unused import 'ExternalServiceError' in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Unused import 'Union' in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Unused import 'Tuple' in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Unused import 'spacy' in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Unused import 'Set' in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Unused import 'Path' in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  Unused import 'asyncio' in packages\morag-services\src\morag_services\pipeline.py
  Unused import 'ContentType' in packages\morag-services\src\morag_services\pipeline.py
  Unused import 'get_qdrant_storages' in packages\morag\src\morag\endpoints\enhanced_query.py
  Unused import 'get_default_neo4j_storage' in packages\morag\src\morag\endpoints\enhanced_query.py
  Unused import 'get_default_qdrant_storage' in packages\morag\src\morag\endpoints\enhanced_query.py
  Unused import 'Optional' in packages\morag\src\morag\endpoints\enhanced_query.py
  Unused import 'asyncio' in packages\morag-graph\test_enhanced_types_demo.py
  Unused import 'ConversionQualityValidator' in packages\morag-core\src\morag_core\converters\__init__.py
  Unused import 'ConversionResult' in packages\morag-core\src\morag_core\converters\__init__.py
  Unused import 'BaseConverter' in packages\morag-core\src\morag_core\converters\__init__.py
  Unused import 'json' in tests\test_dual_format.py

Found 54 errors and 75 warnings
ERRORS:
  Missing import for 'KeyboardInterrupt' used in tests\manual\test_video_conversion_fixes.py
  Missing import for 'main' used in tests\manual\test_video_conversion_fixes.py
  Missing import for 'test_video_conversion_fixes' used in tests\manual\test_video_conversion_fixes.py
  Missing import for 'process_with_semaphore' used in packages\morag-web\src\morag_web\service.py
  Missing import for 'concurrency_limit' used in packages\morag-web\src\morag_web\service.py
  Missing import for 'urls' used in packages\morag-web\src\morag_web\service.py
  Missing import for 'config_options' used in packages\morag-web\src\morag_web\service.py
  Missing import for 'mock_list' used in packages\morag-youtube\tests\test_transcript.py
  Missing import for 'ConnectionError' used in tests\integration\test_base_components_integration.py
  Missing import for 'process_and_embed' used in tests\integration\test_base_components_integration.py
  Missing import for 'integrated_services' used in tests\integration\test_base_components_integration.py
  Missing import for 'test_basic_format' used in tests\manual\test_audio_format_fix.py
  Missing import for 'main' used in tests\manual\test_audio_format_fix.py
  Missing import for 'test_enhanced_format' used in tests\manual\test_audio_format_fix.py
  Missing import for 'texts' used in tests\conftest.py
  Missing import for 'max_length' used in tests\conftest.py
  Missing import for 'status' used in tests\conftest.py
  Missing import for 'source_data' used in tests\conftest.py
  Missing import for 'task_type' used in tests\conftest.py
  Missing import for 'metadata' used in tests\conftest.py
  Missing import for 'batch_processing_example' used in agents\examples\basic_usage.py
  Missing import for 'entity_extraction_example' used in agents\examples\basic_usage.py
  Missing import for 'multi_agent_workflow_example' used in agents\examples\basic_usage.py
  Missing import for 'exit' used in agents\examples\basic_usage.py
  Missing import for 'fact_extraction_example' used in agents\examples\basic_usage.py
  Missing import for 'main' used in agents\examples\basic_usage.py
  Missing import for 'custom_configuration_example' used in agents\examples\basic_usage.py
  Missing import for 'query_analysis_example' used in agents\examples\basic_usage.py
  Missing import for 'process_this_batch' used in packages\morag-reasoning\src\morag_reasoning\llm.py
  Missing import for 'message_lists' used in packages\morag-reasoning\src\morag_reasoning\llm.py
  Missing import for 'kwargs' used in packages\morag-reasoning\src\morag_reasoning\llm.py
  Missing import for 'process_individual' used in packages\morag-reasoning\src\morag_reasoning\llm.py
  Missing import for 'generate_with_retry' used in packages\morag-reasoning\src\morag_reasoning\llm.py
  Missing import for 'mock_llm_client' used in packages\morag-reasoning\tests\test_llm_client.py

WARNINGS:
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\services\atomic_storage_service.py
  Unused import 'List' in packages\morag-graph\src\morag_graph\services\atomic_storage_service.py
  Unused import 'DocumentConverter' in tests\manual\test_video_conversion_fixes.py
  Unused import 'warnings' in packages\morag-core\src\morag_core\optional_deps.py
  Unused import 'struct' in tests\integration\test_enhanced_audio_pipeline.py
  Unused import 'Union' in packages\morag-web\src\morag_web\service.py
  Unused import 'Path' in packages\morag-web\src\morag_web\service.py
  Unused import 'DocumentChunk' in packages\morag-web\src\morag_web\service.py
  Unused import 'AsyncMock' in packages\morag-youtube\tests\test_transcript.py
  Unused import 'os' in packages\morag-video\src\morag_video\converters\video.py
  Unused import 'field' in packages\morag-video\src\morag_video\converters\video.py
  Unused import 'time' in tests\test_ui_interop_integration.py
  Unused import 'CleanupResult' in packages\morag-graph\src\morag_graph\updates\__init__.py
  Unused import 'DocumentChecksumManager' in packages\morag-graph\src\morag_graph\updates\__init__.py
  Unused import 'DocumentCleanupManager' in packages\morag-graph\src\morag_graph\updates\__init__.py
  Unused import 'asyncio' in tests\integration\test_video_audio_integration.py
  Unused import 'tempfile' in tests\integration\test_video_audio_integration.py
  Unused import 'time' in tests\integration\test_video_audio_integration.py
  Unused import 'Path' in tests\integration\test_base_components_integration.py
  Unused import 'Dict' in tests\integration\test_base_components_integration.py
  Unused import 'tempfile' in tests\integration\test_base_components_integration.py
  Unused import 'Any' in tests\integration\test_base_components_integration.py
  Unused import 'List' in tests\integration\test_base_components_integration.py
  Unused import 'settings' in tests\conftest.py
  Unused import 'AsyncGenerator' in tests\conftest.py
  Unused import 'redis' in tests\conftest.py
  Unused import 'TestClient' in tests\conftest.py
  Unused import 'Generator' in tests\conftest.py
  Unused import 'AsyncMock' in tests\conftest.py
  Unused import 'patch' in tests\conftest.py
  Unused import 'List' in agents\examples\basic_usage.py
  Unused import 'Path' in tests\test_production_ingestion_validation.py
  Unused import 'time' in examples\api_demo.py
  Unused import 'Mock' in packages\morag-graph\tests\test_dynamic_types_async.py
  Unused import 'Dict' in packages\morag-graph\tests\test_dynamic_types_async.py
  Unused import 'Relation' in packages\morag-graph\tests\test_dynamic_types_async.py
  Unused import 'Optional' in packages\morag-graph\tests\test_dynamic_types_async.py
  Unused import 'List' in packages\morag-graph\tests\test_dynamic_types_async.py
  Unused import 'Union' in packages\morag-core\src\morag_core\utils\logging.py
  Unused import 'Dict' in packages\morag-core\src\morag_core\utils\logging.py
  Unused import 'Any' in packages\morag-core\src\morag_core\utils\logging.py
  Unused import 'QdrantService' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'SummaryResult' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'PipelineStep' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'ProcessingResult' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'GeminiEmbeddingService' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'PipelineContext' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'PipelineStepType' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'MoRAGServices' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'ServiceConfig' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'GeminiService' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'EmbeddingCache' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'EmbeddingServiceFactory' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'Pipeline' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'EmbeddingResult' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'ContentType' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'ContextualRetrievalService' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'QdrantVectorStorage' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'DataFileWriter' in packages\morag-services\src\morag_services\__init__.py
  Unused import 'AsyncMock' in packages\morag-reasoning\tests\test_llm_client.py

Found 34 errors and 60 warnings
ERRORS:
  Missing import for 'test_different_batch_sizes' used in tests\test_batch_embedding.py
  Missing import for 'main' used in tests\test_batch_embedding.py
  Missing import for 'test_batch_embedding' used in tests\test_batch_embedding.py
  Missing import for 'entities' used in packages\morag-reasoning\src\morag_reasoning\intelligent_retrieval.py
  Missing import for 'main' used in packages\morag-image\examples\service_usage.py
  Missing import for 'text' used in packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py
  Missing import for 'documents' used in packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py
  Missing import for 'enable_cross_document_deduplication' used in packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py
  Missing import for 'source_id' used in packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py
  Missing import for 'PermissionError' used in scripts\ensure_data_directories.py
  Missing import for 'kwargs' used in packages\morag-document\src\morag_document\service.py
  Missing import for 'output_format' used in packages\morag-document\src\morag_document\service.py
  Missing import for 'save_output' used in packages\morag-document\src\morag_document\service.py
  Missing import for 'test_video_format_without_transcript' used in tests\manual\test_video_format_fix.py
  Missing import for 'main' used in tests\manual\test_video_format_fix.py
  Missing import for 'test_video_format' used in tests\manual\test_video_format_fix.py
  Missing import for 'main' used in tests\cli\test-ingest-workflow.py
  Missing import for 'test_services_availability' used in tests\cli\test-ingest-workflow.py
  Missing import for 'test_ingest_workflow' used in tests\cli\test-ingest-workflow.py
  Missing import for 'vectors' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'vector_ids' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'force_recreate' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'compute_func' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'new_metadata' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'ids' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'score_threshold' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'filters' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'limit' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'upsert' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'vector_size' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'document_id' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'data' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'prefix' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'query_vector' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'filter_expr' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'new_vectors' used in packages\morag-services\src\morag_services\storage.py
  Missing import for 'options' used in packages\morag-web\src\morag_web\converter.py
  Missing import for 'SyntaxError' used in scripts\build_test.py
  Missing import for 'importlib' used in scripts\build_test.py
  Missing import for 'available_entities' used in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py
  Missing import for 'x' used in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py

WARNINGS:
  Unused import 'validate_file_path' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'ContentType' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'setup_logging' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'get_device_info' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'ProcessingMetadata' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'get_optimal_batch_size' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'validate_email' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'parse_size_string' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'Deduplicator' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'get_file_size' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'get_logger' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'ProcessingMode' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'get_safe_device' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'get_file_hash' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'sanitize_filename' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'create_processing_metadata' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'get_output_paths' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'ensure_directory' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'validate_url' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'cleanup_temp_files' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'clear_gpu_memory' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'is_file_readable' in packages\morag-core\src\morag_core\utils\__init__.py
  Unused import 'List' in tests\test_batch_embedding.py
  Unused import 'AsyncMock' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'patch' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'List' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'Dict' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'pytest' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'Relation' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'Optional' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'Mock' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'Entity' in packages\morag-graph\tests\test_dynamic_types.py
  Unused import 'asyncio' in packages\morag-graph\tests\test_intention_based_extraction.py
  Unused import 'os' in packages\morag-graph\tests\test_intention_based_extraction.py
  Unused import 'Relation' in packages\morag-graph\tests\test_intention_based_extraction.py
  Unused import 'VideoConversionOptions' in packages\morag-video\src\morag_video\__init__.py
  Unused import 'VideoService' in packages\morag-video\src\morag_video\__init__.py
  Unused import 'VideoConfig' in packages\morag-video\src\morag_video\__init__.py
  Unused import 'VideoConverter' in packages\morag-video\src\morag_video\__init__.py
  Unused import 'VideoProcessor' in packages\morag-video\src\morag_video\__init__.py
  Unused import 'VideoProcessingError' in packages\morag-video\src\morag_video\__init__.py
  Unused import 'stat' in scripts\ensure_data_directories.py
  Unused import 'List' in packages\morag-document\src\morag_document\service.py
  Unused import 'os' in packages\morag-document\src\morag_document\service.py
  Unused import 'Set' in packages\morag-document\src\morag_document\service.py
  Unused import 'urlparse' in tests\cli\test-web.py
  Unused import 'tempfile' in tests\cli\test-ingest-workflow.py
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\services\entity_categorization_service.py
  Unused import 'Any' in packages\morag-graph\src\morag_graph\services\entity_categorization_service.py
  Unused import 'SearchRequest' in packages\morag-services\src\morag_services\storage.py
  Unused import 'CreateCollection' in packages\morag-services\src\morag_services\storage.py
  Unused import 'PerformanceMonitor' in cli\check-system-status.py
  Unused import 'GraphStorage' in cli\check-system-status.py
  Unused import 'BaseExtractor' in cli\check-system-status.py
  Unused import 'os' in cli\check-system-status.py
  Unused import 'ProcessingError' in packages\morag-web\src\morag_web\converter.py
  Unused import 'Any' in packages\morag-web\src\morag_web\converter.py
  Unused import 'List' in packages\morag-web\src\morag_web\converter.py
  Unused import 'ValidationError' in packages\morag-web\src\morag_web\converter.py
  Unused import 'async_playwright' in packages\morag-web\src\morag_web\converter.py
  Unused import 'trafilatura' in packages\morag-web\src\morag_web\converter.py
  Unused import 'Dict' in packages\morag-web\src\morag_web\converter.py
  Unused import 'urlparse' in packages\morag-web\src\morag_web\converter.py
  Unused import 'asyncio' in packages\morag-web\src\morag_web\converter.py
  Unused import 'Optional' in packages\morag-web\src\morag_web\converter.py
  Unused import 'Document' in packages\morag-web\src\morag_web\converter.py
  Unused import 'Article' in packages\morag-web\src\morag_web\converter.py
  Unused import 'urljoin' in packages\morag-web\src\morag_web\converter.py
  Unused import 'Any' in packages\morag-stages\src\morag_stages\exceptions.py
  Unused import 'List' in tests\test_hybrid_entity_extraction.py
  Unused import 'asyncio' in tests\test_hybrid_entity_extraction.py
  Unused import 'AsyncMock' in agents\tests\test_analysis_agents.py
  Unused import 'Mock' in agents\tests\test_analysis_agents.py
  Unused import 'asyncio' in agents\tests\test_analysis_agents.py
  Unused import 'importlib.util' in scripts\build_test.py
  Unused import 'traceback' in scripts\build_test.py
  Unused import 'QueryAnalysisResult' in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py
  Unused import 'Tuple' in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py
  Unused import 'ProcessingError' in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py
  Unused import 'Set' in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py
  Unused import 'time' in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py

Found 41 errors and 82 warnings
ERRORS:
  Missing import for 'query_embedding' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
  Missing import for 'similarity_threshold' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
  Missing import for 'fact_ids' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
  Missing import for 'x' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
  Missing import for 'batch_size' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
  Missing import for 'fact_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'relation' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'fact_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'max_depth' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'chunk_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'query_text' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'relations' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'context' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'domain' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\youtube_processor.py
  Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\youtube_processor.py
  Missing import for 'config' used in packages\morag-stages\src\morag_stages\processors\youtube_processor.py
  Missing import for 'exit' used in agents\tests\run_all_tests.py
  Missing import for 'test_agent_factory' used in agents\tests\run_all_tests.py
  Missing import for 'call' used in packages\morag-reasoning\src\morag_reasoning\graph_tool_controller.py
  Missing import for 'name' used in packages\morag-graph\src\morag_graph\operations\crud.py
  Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\operations\crud.py
  Missing import for 'cascade' used in packages\morag-graph\src\morag_graph\operations\crud.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\operations\crud.py
  Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\operations\crud.py
  Missing import for 'relation_id' used in packages\morag-graph\src\morag_graph\operations\crud.py
  Missing import for 'direction' used in packages\morag-graph\src\morag_graph\operations\crud.py
  Missing import for 'updates' used in packages\morag-graph\src\morag_graph\operations\crud.py
  Missing import for 'mock_whisper_service' used in tests\unit\test_audio_tasks.py
  Missing import for 'mock_gemini' used in tests\unit\test_audio_tasks.py
  Missing import for 'mock_qdrant' used in tests\unit\test_audio_tasks.py
  Missing import for 'mock_audio_processor' used in tests\unit\test_audio_tasks.py
  Missing import for 'mock_summarization' used in tests\unit\test_audio_tasks.py
  Missing import for 'mock_chunking' used in tests\unit\test_audio_tasks.py
  Missing import for 'query_context' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
  Missing import for 'fact_type' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
  Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
  Missing import for 'context' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
  Missing import for 'query_text' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
  Missing import for 'domain' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
  Missing import for 'filters' used in refactor\archived_code\services_original.py
  Missing import for 'audio_path' used in refactor\archived_code\services_original.py
  Missing import for 'process_with_semaphore' used in refactor\archived_code\services_original.py
  Missing import for 'image_path' used in refactor\archived_code\services_original.py
  Missing import for 'document_path' used in refactor\archived_code\services_original.py
  Missing import for 'limit' used in refactor\archived_code\services_original.py
  Missing import for 'query' used in refactor\archived_code\services_original.py
  Missing import for 'x' used in refactor\archived_code\services_original.py
  Missing import for 'video_path' used in refactor\archived_code\services_original.py
  Missing import for 'items' used in refactor\archived_code\services_original.py
  Missing import for 'stage_test_framework' used in packages\morag-stages\tests\test_fact_generator.py
  Missing import for 'test_performance_expectations' used in tests\manual\test_audio_extraction_optimization.py
  Missing import for 'main' used in tests\manual\test_audio_extraction_optimization.py
  Missing import for 'test_codec_selection_logic' used in tests\manual\test_audio_extraction_optimization.py
  Missing import for 'test_audio_format_defaults' used in tests\manual\test_audio_extraction_optimization.py
  Missing import for 'test_file_size_comparison' used in tests\manual\test_audio_extraction_optimization.py

WARNINGS:
  Unused import 'Set' in agents\config\validation.py
  Unused import 'Optional' in agents\config\validation.py
  Unused import 'validator' in agents\config\validation.py
  Unused import 'MagicMock' in packages\morag-graph\tests\test_checksum_manager.py
  Unused import 'AsyncMock' in packages\morag-graph\tests\test_checksum_manager.py
  Unused import 'Any' in packages\morag-graph\tests\test_relationship_cleanup.py
  Unused import 'Dict' in packages\morag-graph\tests\test_relationship_cleanup.py
  Unused import 'List' in packages\morag-graph\tests\test_relationship_cleanup.py
  Unused import 'Tuple' in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
  Unused import 'AsyncMock' in tests\remote_conversion\test_remote_job_api.py
  Unused import 'Union' in agents\base\config.py
  Unused import 'SpeakerDiarizationService' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'AudioConfig' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'DiarizationResult' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'TopicSegment' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'TopicSegmentationService' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'AudioProcessingResult' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'TopicSegmentationResult' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'AudioConversionOptions' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'AudioProcessingError' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'AudioProcessor' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'SpeakerInfo' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'SpeakerSegment' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'AudioConverter' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'AudioService' in packages\morag-audio\src\morag_audio\__init__.py
  Unused import 'topic_segmentation' in tools\remote-converter\test_env_config.py
  Unused import 'Set' in refactor\archived_code\services_original.py
  Unused import 'BaseService' in refactor\archived_code\services_original.py
  Unused import 'AudioProcessingResult' in refactor\archived_code\services_original.py
  Unused import 'AudioConversionOptions' in refactor\archived_code\services_original.py
  Unused import 'field' in refactor\archived_code\services_original.py
  Unused import 'Path' in packages\morag-stages\tests\test_fact_generator.py
  Unused import 'Set' in packages\morag-graph\src\morag_graph\storage\base.py
  Unused import 'os' in tests\remote_conversion\test_end_to_end.py
  Unused import 'json' in tests\remote_conversion\test_end_to_end.py
  Unused import 'time' in tests\remote_conversion\test_end_to_end.py
  Unused import 'time' in tests\manual\test_audio_extraction_optimization.py
  Unused import 'video_processor' in tests\manual\test_audio_extraction_optimization.py

Found 62 errors and 38 warnings
ERRORS:
  Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\document_processor.py
  Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\document_processor.py
  Missing import for 'test_webhook_integration' used in tests\manual\test_webhook_demo.py
  Missing import for 'video_path' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'document_path' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'audio_path' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'image_path' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'content_type' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'items' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'options' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'url' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'DeprecationWarning' used in packages\morag-services\src\morag_services\services.py
  Missing import for 'video_path' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'document_path' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'path_or_url' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'audio_path' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'image_path' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'process_with_semaphore' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'items' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'options' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'url' used in packages\morag-services\src\morag_services\content_processors.py
  Missing import for 'server_config' used in packages\morag\src\morag\database_factory.py
  Missing import for 'mock_yt_dlp' used in tests\unit\test_youtube_processor.py
  Missing import for 'basic_scraping_example' used in packages\morag-web\examples\web_scraping_example.py
  Missing import for 'service_example' used in packages\morag-web\examples\web_scraping_example.py
  Missing import for 'urls' used in packages\morag-web\examples\web_scraping_example.py
  Missing import for 'main' used in packages\morag-web\examples\web_scraping_example.py
  Missing import for 'execute_stage' used in cli\morag-stages.py
  Missing import for 'execute_full_pipeline' used in cli\morag-stages.py
  Missing import for 'execute_stage_chain' used in cli\morag-stages.py
  Missing import for 'main' used in cli\morag-stages.py
  Missing import for 'demo_basic_scraping' used in examples\web_scraping_demo.py
  Missing import for 'KeyboardInterrupt' used in examples\web_scraping_demo.py
  Missing import for 'demo_configuration_options' used in examples\web_scraping_demo.py
  Missing import for 'demo_batch_processing' used in examples\web_scraping_demo.py
  Missing import for 'main' used in examples\web_scraping_demo.py
  Missing import for 'chunks' used in packages\morag-graph\src\morag_graph\builders\graph_builder.py
  Missing import for 'documents' used in packages\morag-graph\src\morag_graph\builders\graph_builder.py
  Missing import for 'chunk_overlap' used in cli\graph_extraction.py
  Missing import for 'doc_metadata' used in cli\graph_extraction.py
  Missing import for 'GraphExtractionService' used in cli\graph_extraction.py
  Missing import for 'metadata' used in cli\graph_extraction.py
  Missing import for 'use_neo4j' used in cli\graph_extraction.py
  Missing import for 'GraphBuilder' used in cli\graph_extraction.py
  Missing import for 'GraphEntity' used in cli\graph_extraction.py
  Missing import for 'context' used in cli\graph_extraction.py
  Missing import for 'GraphRelation' used in cli\graph_extraction.py
  Missing import for 'doc_id' used in cli\graph_extraction.py
  Missing import for 'text' used in cli\graph_extraction.py
  Missing import for 'Neo4j_storage' used in cli\graph_extraction.py
  Missing import for 'text_content' used in cli\graph_extraction.py
  Missing import for 'chunk_size' used in cli\graph_extraction.py
  Missing import for 'use_qdrant' used in cli\graph_extraction.py
  Missing import for 'encoding' used in packages\morag\src\morag\services\temporary_file_service.py
  Missing import for 'filename' used in packages\morag\src\morag\services\temporary_file_service.py
  Missing import for 'x' used in packages\morag\src\morag\services\temporary_file_service.py
  Missing import for 'FileNotFoundError' used in packages\morag\src\morag\services\temporary_file_service.py
  Missing import for 'RuntimeError' used in packages\morag\src\morag\services\temporary_file_service.py
  Missing import for 'check_reasoning_status' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'check_api_health' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'api_url' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'max_iterations' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'exit' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'KeyboardInterrupt' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'query' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'test_multi_hop_reasoning_api' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'strategy' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'test_reasoning_query_endpoint' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'max_paths' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'main' used in packages\morag-reasoning\test_reasoning_api.py
  Missing import for 'entity2' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Missing import for 'entity1' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Missing import for 'starting_entities' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Missing import for 'dfs_recursive' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Missing import for 'strategy' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Missing import for 'visited' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Missing import for 'mock_convert' used in tests\unit\test_audio_processor.py
  Missing import for 'mock_audio_segment' used in tests\unit\test_audio_processor.py
  Missing import for 'mock_extract_metadata' used in tests\unit\test_audio_processor.py
  Missing import for 'mock_transcribe' used in tests\unit\test_audio_processor.py
  Missing import for 'mock_validate' used in tests\unit\test_audio_processor.py
  Missing import for 'mock_whisper_model' used in tests\unit\test_audio_processor.py

WARNINGS:
  Unused import 'pytest' in tests\remote_conversion\test_remote_job_model.py
  Unused import 'List' in packages\morag-core\src\morag_core\interfaces\task.py
  Unused import 'Union' in packages\morag-core\src\morag_core\interfaces\task.py
  Unused import 'VideoConverter' in packages\morag-video\src\morag_video\converters\__init__.py
  Unused import 'VideoConversionOptions' in packages\morag-video\src\morag_video\converters\__init__.py
  Unused import 'ContentType' in packages\morag-services\src\morag_services\services.py
  Unused import 'Union' in packages\morag-services\src\morag_services\services.py
  Unused import 'ServiceConfig' in packages\morag-services\src\morag_services\services.py
  Unused import 'Dict' in packages\morag-core\src\morag_core\chunking\semantic_chunker.py
  Unused import 'asyncio' in packages\morag-core\src\morag_core\chunking\semantic_chunker.py
  Unused import 'Any' in packages\morag-core\src\morag_core\chunking\semantic_chunker.py
  Unused import 'MagicMock' in packages\morag-image\tests\test_service.py
  Unused import 'asyncio' in packages\morag-image\tests\test_service.py
  Unused import 'Path' in packages\morag-services\src\morag_services\content_processors.py
  Unused import 'SummarizationAgent' in packages\morag-stages\src\morag_stages\stages\chunker.py
  Unused import 'Optional' in cli\morag-stages.py
  Unused import 'List' in cli\morag-stages.py
  Unused import 'Dict' in cli\morag-stages.py
  Unused import 'Any' in cli\morag-stages.py
  Unused import 'VideoProcessingResult' in tools\remote-converter\test_imports.py
  Unused import 'WebScrapingResult' in tools\remote-converter\test_imports.py
  Unused import 'ImageProcessor' in tools\remote-converter\test_imports.py
  Unused import 'YouTubeProcessor' in tools\remote-converter\test_imports.py
  Unused import 'VideoProcessor' in tools\remote-converter\test_imports.py
  Unused import 'AudioProcessor' in tools\remote-converter\test_imports.py
  Unused import 'AudioProcessingResult' in tools\remote-converter\test_imports.py
  Unused import 'ImageProcessingResult' in tools\remote-converter\test_imports.py
  Unused import 'WebProcessor' in tools\remote-converter\test_imports.py
  Unused import 'YouTubeDownloadResult' in tools\remote-converter\test_imports.py
  Unused import 'DocumentProcessor' in tools\remote-converter\test_imports.py
  Unused import 'ProcessingResult' in tools\remote-converter\test_imports.py
  Unused import 'Optional' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'patch' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'json' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'AsyncMock' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'Mock' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'List' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'pytest' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'Relation' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'Dict' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'Entity' in packages\morag-graph\tests\test_dynamic_types_edge_cases.py
  Unused import 'json' in examples\web_scraping_demo.py
  Unused import 'time' in tests\cli\test-worker-fixes.py
  Unused import 'json' in tests\cli\test-worker-fixes.py
  Unused import 'asyncio' in tests\cli\test-worker-fixes.py
  Unused import 'Path' in packages\morag-graph\src\morag_graph\builders\graph_builder.py
  Unused import 'Document' in packages\morag-graph\src\morag_graph\builders\graph_builder.py
  Unused import 'Path' in cli\graph_extraction.py
  Unused import 'asyncio' in cli\graph_extraction.py
  Unused import 'Neo4jStorage' in cli\graph_extraction.py
  Unused import 'List' in packages\morag\src\morag\services\temporary_file_service.py
  Unused import 'List' in packages\morag-reasoning\test_reasoning_api.py
  Unused import 'sys' in packages\morag-reasoning\test_reasoning_api.py
  Unused import 'Optional' in packages\morag-reasoning\test_reasoning_api.py
  Unused import 'ProcessingError' in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Unused import 'NamedTuple' in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  Unused import 'ChunkingStrategy' in packages\morag-core\src\morag_core\chunking\__init__.py
  Unused import 'ChunkingConfig' in packages\morag-core\src\morag_core\chunking\__init__.py
  Unused import 'ChunkerFactory' in packages\morag-core\src\morag_core\chunking\__init__.py
  Unused import 'create_chunker' in packages\morag-core\src\morag_core\chunking\__init__.py
  Unused import 'SemanticChunker' in packages\morag-core\src\morag_core\chunking\__init__.py

Found 82 errors and 62 warnings
ERRORS:
  Missing import for 'stage_test_framework' used in packages\morag-stages\tests\test_chunker.py
  Missing import for 'x' used in packages\morag-stages\src\morag_stages\registry.py
  Missing import for 'batch_process_with_resume' used in cli\batch-process-stages.py
  Missing import for 'process_file_through_stages' used in cli\batch-process-stages.py
  Missing import for 'batch_process' used in cli\batch-process-stages.py
  Missing import for 'query_analysis' used in packages\morag-graph\src\morag_graph\retrieval\fusion.py
  Missing import for 'transcript_example' used in packages\morag-youtube\examples\youtube_example.py
  Missing import for 'main' used in packages\morag-youtube\examples\youtube_example.py
  Missing import for 'basic_example' used in packages\morag-youtube\examples\youtube_example.py
  Missing import for 'service_example' used in packages\morag-youtube\examples\youtube_example.py
  Missing import for 'mock_process_url' used in packages\morag-youtube\tests\test_youtube_processor.py
  Missing import for 'mock_transcribe' used in packages\morag-youtube\tests\test_youtube_processor.py
  Missing import for 'mock_to_thread' used in packages\morag-youtube\tests\test_youtube_processor.py
  Missing import for 'mock_download' used in packages\morag-youtube\tests\test_youtube_processor.py
  Missing import for 'mock_metadata' used in packages\morag-youtube\tests\test_youtube_processor.py
  Missing import for 'mock_store_operation' used in tests\test_03_performance.py
  Missing import for 'mock_unreliable_operation' used in tests\test_03_performance.py
  Missing import for 'mock_batch_upsert' used in tests\test_03_performance.py
  Missing import for 'args' used in tests\test_03_performance.py
  Missing import for 'mock_memory_operation' used in tests\test_03_performance.py
  Missing import for 'kwargs' used in tests\test_03_performance.py
  Missing import for 'mock_upsert' used in tests\test_03_performance.py
  Missing import for 'store_chunk' used in tests\test_03_performance.py
  Missing import for 'index' used in tests\test_03_performance.py
  Missing import for 'mock_search' used in tests\test_03_performance.py
  Missing import for 'mock_performance_service' used in tests\test_03_performance.py
  Missing import for 'v' used in packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py
  Missing import for 'force_reingest' used in packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py
  Missing import for 'relations' used in packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py
  Missing import for 'KeyboardInterrupt' used in cli\validate-standalone-cli.py
  Missing import for 'whisper_model' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'process_video' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'output_format' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'enable_enhanced_audio' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'generate_thumbnails' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'enable_ocr' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'enable_speaker_diarization' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'language' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'enable_topic_segmentation' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'extract_audio' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'device' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'extract_keyframes' used in packages\morag-video\src\morag_video\cli.py
  Missing import for 'ImageConverter' used in packages\morag-document\tests\test_markitdown_converters.py
  Missing import for 'mock_service_class' used in packages\morag-document\tests\test_markitdown_converters.py
  Missing import for 'texts' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
  Missing import for 'response_parser' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
  Missing import for 'results' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
  Missing import for 'prompt_creator' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
  Missing import for 'temperature' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
  Missing import for 'max_tokens' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
  Missing import for 'chunks' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
  Missing import for 'items' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py

WARNINGS:
  Unused import 'os' in packages\morag\src\morag\utils\url_path.py
  Unused import 'Path' in packages\morag-stages\tests\test_chunker.py
  Unused import 'json' in cli\test-remote-conversion.py
  Unused import 'os' in cli\test-remote-conversion.py
  Unused import 'Optional' in packages\morag-stages\src\morag_stages\registry.py
  Unused import 'Dict' in packages\morag-graph\src\morag_graph\retrieval\fusion.py
  Unused import 'Optional' in packages\morag-graph\src\morag_graph\retrieval\fusion.py
  Unused import 'Any' in packages\morag-graph\src\morag_graph\retrieval\fusion.py
  Unused import 'os' in packages\morag-youtube\examples\youtube_example.py
  Unused import 'os' in packages\morag-youtube\tests\test_youtube_processor.py
  Unused import 'patch' in tests\remote_conversion\test_remote_job_service.py
  Unused import 'Dict' in tests\test_15_vector_storage.py
  Unused import 'Any' in tests\test_15_vector_storage.py
  Unused import 'pytest' in tests\integration\test_celery.py
  Unused import 'asyncio' in tests\integration\test_celery.py
  Unused import 'Union' in packages\morag-core\src\morag_core\interfaces\service.py
  Unused import 'ExternalServiceError' in packages\morag-core\src\morag_core\interfaces\service.py
  Unused import 'List' in packages\morag-core\src\morag_core\interfaces\service.py
  Unused import 'Optional' in packages\morag-core\src\morag_core\interfaces\service.py
  Unused import 'Set' in packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py
  Unused import 'List' in cli\validate-standalone-cli.py
  Unused import 'Any' in cli\validate-standalone-cli.py
  Unused import 'asyncio' in cli\validate-standalone-cli.py
  Unused import 'List' in packages\morag-video\src\morag_video\cli.py
  Unused import 'DocumentMetadata' in packages\morag-document\tests\test_markitdown_converters.py
  Unused import 'MagicMock' in packages\morag-document\tests\test_markitdown_converters.py
  Unused import 'Path' in packages\morag-document\tests\test_markitdown_converters.py
  Unused import 'pytest_asyncio' in packages\morag-document\tests\test_markitdown_converters.py
  Unused import 'Dict' in tests\test_recursive_fact_retrieval.py
  Unused import 'Any' in tests\test_recursive_fact_retrieval.py
  Unused import 'asyncio' in tests\test_recursive_fact_retrieval.py
  Unused import 'LLMConfig' in tests\test_recursive_fact_retrieval.py
  Unused import 'LLMClient' in tests\test_recursive_fact_retrieval.py
  Unused import 'List' in tests\test_recursive_fact_retrieval.py
  Unused import 'Union' in packages\morag-core\src\morag_core\ai\models.py

Found 52 errors and 35 warnings
ERRORS:
  Missing import for 'x' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
  Missing import for 'fact_extractor' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
  Missing import for 'agent' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
  Missing import for 'entity_normalizer' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
  Missing import for 'chunks' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
  Missing import for 'content' used in packages\morag-services\src\morag_services\graph_processor.py
  Missing import for 'document_metadata' used in packages\morag-services\src\morag_services\graph_processor.py
  Missing import for 'document_path' used in packages\morag-services\src\morag_services\graph_processor.py
  Missing import for 'max_length' used in packages\morag-services\src\morag_services\graph_processor.py
  Missing import for 'source_doc_id' used in packages\morag-services\src\morag_services\graph_processor.py
  Missing import for 'database_configs' used in packages\morag-services\src\morag_services\graph_processor.py
  Missing import for 'FileNotFoundError' used in tests\test_deployment.py
  Missing import for 'progress_callback' used in packages\morag-video\src\morag_video\service.py
  Missing import for 'json_result' used in packages\morag-video\src\morag_video\service.py
  Missing import for 'output_format' used in packages\morag-video\src\morag_video\service.py
  Missing import for 'save_output' used in packages\morag-video\src\morag_video\service.py
  Missing import for 'transcript' used in packages\morag-youtube\src\morag_youtube\service.py
  Missing import for 'extract_audio' used in packages\morag-youtube\src\morag_youtube\service.py
  Missing import for 'playlist_url' used in packages\morag-youtube\src\morag_youtube\service.py
  Missing import for 'transcript_segments' used in packages\morag-youtube\src\morag_youtube\service.py
  Missing import for 'download_subtitles' used in packages\morag-youtube\src\morag_youtube\service.py
  Missing import for 'quality' used in packages\morag-youtube\src\morag_youtube\service.py
  Missing import for 'urls' used in packages\morag-youtube\src\morag_youtube\service.py
  Missing import for 'metadata' used in packages\morag-youtube\src\morag_youtube\service.py
  Missing import for 'kwargs' used in packages\morag-document\src\morag_document\processor.py
  Missing import for 'audio_path' used in packages\morag-audio\src\morag_audio\rest_transcription.py
  Missing import for 'mock_gemini' used in tests\integration\test_audio_pipeline.py
  Missing import for 'mock_summarization' used in tests\integration\test_audio_pipeline.py
  Missing import for 'mock_chunking' used in tests\integration\test_audio_pipeline.py
  Missing import for 'mock_qdrant' used in tests\integration\test_audio_pipeline.py
  Missing import for 'mock_whisper_model' used in tests\integration\test_audio_pipeline.py
  Missing import for 'query' used in packages\morag-reasoning\src\morag_reasoning\response_assessor.py
  Missing import for 'original_query' used in packages\morag-reasoning\src\morag_reasoning\response_assessor.py
  Missing import for 'response' used in packages\morag-reasoning\src\morag_reasoning\response_assessor.py
  Missing import for 'ConnectionError' used in tests\unit\core\test_base_storage.py
  Missing import for 'limit' used in tests\unit\core\test_base_storage.py
  Missing import for 'query' used in tests\unit\core\test_base_storage.py
  Missing import for 'source_entity_id' used in tests\unit\core\test_base_storage.py
  Missing import for 'mock_storage' used in tests\unit\core\test_base_storage.py
  Missing import for 'entity_type' used in tests\unit\core\test_base_storage.py
  Missing import for 'target_entity_id' used in tests\unit\core\test_base_storage.py
  Missing import for 'relation_type' used in tests\unit\core\test_base_storage.py
  Missing import for 'direction' used in tests\unit\core\test_base_storage.py
  Missing import for 'FileNotFoundError' used in tests\test_temporary_file_management.py
  Missing import for 'checkpoint_loop' used in packages\morag\src\morag\pipeline\state_manager.py
  Missing import for 'file_path' used in packages\morag\src\morag\pipeline\state_manager.py
  Missing import for 'state' used in packages\morag\src\morag\pipeline\state_manager.py
  Missing import for 'retry' used in packages\morag\src\morag\pipeline\state_manager.py
  Missing import for 'stage_configs' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'stage_result' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'send_webhook_notification' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'chunking_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'webhook_url' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'background_tasks' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'send_webhook_notification_for_chain' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'markdown_optimizer_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'execute_stage_chain' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'success' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'entity_extraction_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'stages' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'file' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'global_config' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for '_list_stages_impl' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'force' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'summarization_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'skip_existing' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'content_analysis_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'UnicodeDecodeError' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'relation_extraction_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'default_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'return_content' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'stop_on_failure' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'keyword_extraction_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'fact_extraction_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
  Missing import for 'total_time' used in packages\morag\src\morag\api_models\endpoints\stages.py

WARNINGS:
  Unused import 'EnhancedGraphBuildResult' in packages\morag-services\src\morag_services\graph_processor.py
  Unused import 'Path' in packages\morag-services\src\morag_services\graph_processor.py
  Unused import 'DatabaseResult' in packages\morag-services\src\morag_services\graph_processor.py
  Unused import 'MagicMock' in tests\test_deployment.py
  Unused import 'patch' in tests\test_deployment.py
  Unused import 'os' in tests\test_deployment.py
  Unused import 'List' in packages\morag-video\src\morag_video\service.py
  Unused import 'VideoProcessingError' in packages\morag-video\src\morag_video\service.py
  Unused import 'os' in packages\morag-video\src\morag_video\service.py
  Unused import 'Union' in packages\morag-core\src\morag_core\models\api.py
  Unused import 'uuid' in packages\morag-core\src\morag_core\models\api.py
  Unused import 'MagicMock' in packages\morag-graph\tests\test_hybrid_retrieval.py
  Unused import 'DocumentResult' in packages\morag-graph\tests\test_hybrid_retrieval.py
  Unused import 'asyncio' in packages\morag-graph\tests\test_hybrid_retrieval.py
  Unused import 'annotations' in packages\morag-graph\src\morag_graph\maintenance\config_validator.py
  Unused import 'Tuple' in packages\morag-graph\src\morag_graph\maintenance\config_validator.py
  Unused import 'Optional' in packages\morag-graph\src\morag_graph\maintenance\config_validator.py
  Unused import 'Document' in packages\morag-document\src\morag_document\processor.py
  Unused import 'Optional' in packages\morag-document\src\morag_document\processor.py
  Unused import 'os' in packages\morag-document\src\morag_document\processor.py
  Unused import 'List' in packages\morag-document\src\morag_document\processor.py
  Unused import 'get_file_info' in packages\morag-document\src\morag_document\processor.py
  Unused import 'Any' in packages\morag-document\src\morag_document\processor.py
  Unused import 'Set' in packages\morag-document\src\morag_document\processor.py
  Unused import 'DocumentType' in packages\morag-document\src\morag_document\processor.py
  Unused import 'get_settings' in packages\morag-document\src\morag_document\processor.py
  Unused import 'Union' in packages\morag-core\src\morag_core\models\document.py
  Unused import 'Union' in packages\morag\src\morag\models\enhanced_query.py
  Unused import 'Optional' in packages\morag-audio\src\morag_audio\rest_transcription.py
  Unused import 'asyncio' in packages\morag-audio\src\morag_audio\rest_transcription.py
  Unused import 'List' in tests\test_relationship_merger.py
  Unused import 'Any' in tests\test_relationship_merger.py
  Unused import 'Dict' in tests\test_relationship_merger.py
  Unused import 'RelationBatch' in packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py
  Unused import 'DocumentBatch' in packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py
  Unused import 'FactBatch' in packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py
  Unused import 'EntityBatch' in packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py
  Unused import 'FactExtractionEngine' in packages\morag-stages\src\morag_stages\stages\fact_generator.py
  Unused import 'FactGeneratorStage' in packages\morag-stages\src\morag_stages\stages\fact_generator.py
  Unused import 'np' in tests\integration\test_audio_pipeline.py
  Unused import 'asyncio' in tests\integration\test_audio_pipeline.py
  Unused import 'Mock' in tests\test_temporary_file_management.py
  Unused import 'asyncio' in tests\test_temporary_file_management.py
  Unused import 'json' in packages\morag-image\tests\test_cli.py
  Unused import 'asyncio' in packages\morag-image\tests\test_cli.py
  Unused import 'Depends' in packages\morag\src\morag\api_models\endpoints\stages.py
  Unused import 'List' in packages\morag\src\morag\api_models\endpoints\stages.py
  Unused import 'FileDownloadResponse' in packages\morag\src\morag\api_models\endpoints\stages.py
  Unused import 'Request' in packages\morag\src\morag\api_models\endpoints\stages.py
  Unused import 'FileListResponse' in packages\morag\src\morag\api_models\endpoints\stages.py
  Unused import 'uuid' in packages\morag\src\morag\api_models\endpoints\stages.py
  Unused import 'asyncio' in packages\morag\src\morag\api_models\endpoints\stages.py
  Unused import 'FileResponse' in packages\morag\src\morag\api_models\endpoints\stages.py
  Unused import 'ErrorResponse' in packages\morag\src\morag\api_models\endpoints\stages.py

Found 75 errors and 54 warnings
ERRORS:
  Missing import for 'tmp_path' used in packages\morag-document\tests\test_markitdown_base.py
  Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\web_processor.py
  Missing import for 'config' used in packages\morag-stages\src\morag_stages\processors\web_processor.py
  Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\web_processor.py
  Missing import for 'main' used in cli\create-databases.py
  Missing import for 'vector_size' used in cli\create-databases.py
  Missing import for 'database_name' used in cli\create-databases.py
  Missing import for 'collection_name' used in cli\create-databases.py
  Missing import for 'create_neo4j_database' used in cli\create-databases.py
  Missing import for 'list_existing_databases' used in cli\create-databases.py
  Missing import for 'create_qdrant_collection' used in cli\create-databases.py
  Missing import for 'limit' used in packages\morag-graph\tests\test_qdrant_checksum.py
  Missing import for 'scroll_filter' used in packages\morag-graph\tests\test_qdrant_checksum.py
  Missing import for 'collection_name' used in packages\morag-graph\tests\test_qdrant_checksum.py
  Missing import for 'RuntimeError' used in packages\morag-graph\tests\test_qdrant_checksum.py
  Missing import for 'points_selector' used in packages\morag-graph\tests\test_qdrant_checksum.py
  Missing import for 'ids' used in packages\morag-graph\tests\test_qdrant_checksum.py
  Missing import for 'points' used in packages\morag-graph\tests\test_qdrant_checksum.py
  Missing import for 'failing_operation' used in tests\unit\test_ai_error_handling.py
  Missing import for 'fallback_operation' used in tests\unit\test_ai_error_handling.py
  Missing import for 'mock_operation' used in tests\unit\test_ai_error_handling.py
  Missing import for 'max_depth' used in cli\test-intelligent-retrieval.py
  Missing import for 'main' used in cli\test-intelligent-retrieval.py
  Missing import for 'min_relevance_threshold' used in cli\test-intelligent-retrieval.py
  Missing import for 'max_entities_per_iteration' used in cli\test-intelligent-retrieval.py
  Missing import for 'language' used in cli\test-intelligent-retrieval.py
  Missing import for 'max_paths_per_entity' used in cli\test-intelligent-retrieval.py
  Missing import for 'query' used in cli\test-intelligent-retrieval.py
  Missing import for 'max_iterations' used in cli\test-intelligent-retrieval.py
  Missing import for 'include_debug_info' used in cli\test-intelligent-retrieval.py
  Missing import for 'demo_pdf_conversion' used in examples\universal_converter_demo.py
  Missing import for 'demo_quality_assessment' used in examples\universal_converter_demo.py
  Missing import for 'main' used in examples\universal_converter_demo.py
  Missing import for 'demo_basic_conversion' used in examples\universal_converter_demo.py
  Missing import for 'demo_conversion_options' used in examples\universal_converter_demo.py
  Missing import for 'demo_configuration' used in examples\universal_converter_demo.py
  Missing import for 'use_neo4j' used in cli\resume_utils.py
  Missing import for 'resume_from_ingestion_data' used in cli\resume_utils.py
  Missing import for 'use_qdrant' used in cli\resume_utils.py
  Missing import for 'resume_from_process_result' used in cli\resume_utils.py
  Missing import for '_recreate_chunk_entity_mapping' used in cli\resume_utils.py
  Missing import for 'chunks' used in packages\morag\src\morag\embedding_processor.py
  Missing import for 'content' used in packages\morag\src\morag\embedding_processor.py
  Missing import for 'process_document' used in packages\morag-document\src\morag_document\cli.py
  Missing import for 'FileNotFoundError' used in scripts\static_analysis.py
  Missing import for 'SyntaxError' used in scripts\static_analysis.py
  Missing import for 'SyntaxError' used in scripts\syntax_check.py
  Missing import for 'test_summarization_fix' used in tests\manual\test_summarization_fix.py
  Missing import for 'prop' used in tests\integration\test_video_pipeline.py
  Missing import for 'mock_processor' used in tests\integration\test_video_pipeline.py
  Missing import for 'mock_to_thread' used in tests\integration\test_video_pipeline.py
  Missing import for 'mock_exists' used in tests\integration\test_video_pipeline.py
  Missing import for 'mock_probe' used in tests\integration\test_video_pipeline.py
  Missing import for 'mock_audio_task' used in tests\integration\test_video_pipeline.py
  Missing import for 'mock_cv2_cap' used in tests\integration\test_video_pipeline.py

WARNINGS:
  Unused import 'AsyncMock' in packages\morag-reasoning\tests\test_response_generator.py
  Unused import 'asyncio' in packages\morag-reasoning\tests\test_response_generator.py
  Unused import 'Path' in packages\morag-document\tests\test_markitdown_base.py
  Unused import 'ExpansionStrategy' in packages\morag\tests\test_enhanced_api.py
  Unused import 'QueryType' in packages\morag\tests\test_enhanced_api.py
  Unused import 'json' in packages\morag\tests\test_enhanced_api.py
  Unused import 'FusionStrategy' in packages\morag\tests\test_enhanced_api.py
  Unused import 'EnhancedQueryRequest' in packages\morag\tests\test_enhanced_api.py
  Unused import 'Optional' in cli\create-databases.py
  Unused import 'Neo4jConfig' in cli\create-databases.py
  Unused import 'Neo4jStorage' in cli\create-databases.py
  Unused import 'List' in packages\morag-graph\tests\test_qdrant_checksum.py
  Unused import 'Optional' in packages\morag-graph\tests\test_qdrant_checksum.py
  Unused import 'Entity' in packages\morag-graph\tests\test_qdrant_checksum.py
  Unused import 'AsyncMock' in packages\morag\tests\test_integration.py
  Unused import 'MagicMock' in packages\morag\tests\test_integration.py
  Unused import 'patch' in packages\morag\tests\test_integration.py
  Unused import 'asyncio' in packages\morag\tests\test_integration.py
  Unused import 'json' in tests\test_universal_converter_integration.py
  Unused import 'ConversionResult' in tests\test_universal_converter_integration.py
  Unused import 'asyncio' in tests\test_universal_converter_integration.py
  Unused import 'FileIngestion' in packages\morag-graph\src\morag_graph\ingestion\__init__.py
  Unused import 'FileMetadata' in packages\morag-graph\src\morag_graph\ingestion\__init__.py
  Unused import 'List' in packages\morag-core\src\morag_core\interfaces\processor.py
  Unused import 'IntelligentRetrievalResponse' in cli\test-intelligent-retrieval.py
  Unused import 'json' in examples\universal_converter_demo.py
  Unused import 'QualityScore' in examples\universal_converter_demo.py
  Unused import 'List' in cli\resume_utils.py
  Unused import 'Optional' in packages\morag\src\morag\embedding_processor.py
  Unused import 'sys' in packages\morag-document\src\morag_document\cli.py
  Unused import 'List' in packages\morag-document\src\morag_document\cli.py
  Unused import 'Dict' in packages\morag-document\src\morag_document\cli.py
  Unused import 'Optional' in packages\morag-document\src\morag_document\cli.py
  Unused import 'Any' in packages\morag-document\src\morag_document\cli.py
  Unused import 'Optional' in scripts\static_analysis.py
  Unused import 'Any' in scripts\syntax_check.py
  Unused import 'Dict' in scripts\syntax_check.py
  Unused import 'os' in tests\manual\test_summarization_fix.py
  Unused import 'tempfile' in tests\integration\test_video_pipeline.py

Found 55 errors and 39 warnings
ERRORS:
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Missing import for 'score_threshold' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Missing import for 'filters' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Missing import for 'query_embedding' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Missing import for 'facts' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Missing import for 'main' used in tests\test_document_features.py
  Missing import for 'test_json_output' used in tests\test_document_features.py
  Missing import for 'test_pdf_chapter_support' used in tests\test_document_features.py
  Missing import for 'test_document_processor_integration' used in tests\test_document_features.py
  Missing import for 'test_chunking_strategies' used in tests\test_document_features.py
  Missing import for 'test_chapter_detection' used in tests\test_document_features.py
  Missing import for 'exit' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'end' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'limit' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'max_iterations' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'test_multi_hop_reasoning' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'main' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'start' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'KeyboardInterrupt' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'RelationType' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'strategy' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'model' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'max_paths' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'max_depth' used in packages\morag-reasoning\test_multi_hop_cli.py
  Missing import for 'perform_retrieval' used in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Missing import for 'request' used in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Missing import for 'get_recursive_fact_retrieval_service' used in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Missing import for 'demo_fallback_mechanism' used in examples\ai_error_handling_demo.py
  Missing import for 'main' used in examples\ai_error_handling_demo.py
  Missing import for 'execute_with_ai_resilience' used in examples\ai_error_handling_demo.py
  Missing import for 'primary_operation' used in examples\ai_error_handling_demo.py
  Missing import for 'gemini_service' used in examples\ai_error_handling_demo.py
  Missing import for 'fast_operation' used in examples\ai_error_handling_demo.py
  Missing import for 'demo_circuit_breaker' used in examples\ai_error_handling_demo.py
  Missing import for 'demo_performance_impact' used in examples\ai_error_handling_demo.py
  Missing import for 'universal_ai_handler' used in examples\ai_error_handling_demo.py
  Missing import for 'always_failing_operation' used in examples\ai_error_handling_demo.py
  Missing import for 'demo_retry_mechanism' used in examples\ai_error_handling_demo.py
  Missing import for 'demo_comprehensive_health_report' used in examples\ai_error_handling_demo.py
  Missing import for 'get_ai_service_health' used in examples\ai_error_handling_demo.py
  Missing import for 'flaky_operation' used in examples\ai_error_handling_demo.py
  Missing import for 'fallback_operation' used in examples\ai_error_handling_demo.py
  Missing import for 'demo_health_monitoring' used in examples\ai_error_handling_demo.py
  Missing import for 'demo_successful_operations' used in examples\ai_error_handling_demo.py
  Missing import for 'demo_error_classification' used in examples\ai_error_handling_demo.py
  Missing import for 'stage_test_framework' used in packages\morag-stages\tests\test_markdown_conversion.py
  Missing import for 'EnhancedSpeakerDiarization' used in examples\gpu_cpu_fallback_demo.py
  Missing import for 'test_async_operations' used in examples\gpu_cpu_fallback_demo.py
  Missing import for 'WhisperService' used in examples\gpu_cpu_fallback_demo.py
  Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\updates\checksum_manager.py
  Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\updates\checksum_manager.py
  Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\fact_critic_agent.py
  Missing import for 'raw_facts' used in packages\morag-reasoning\src\morag_reasoning\fact_critic_agent.py
  Missing import for 'batch_size' used in packages\morag-reasoning\src\morag_reasoning\fact_critic_agent.py
  Missing import for 'mock_service' used in tests\test_03_database_init.py
  Missing import for 'replace_existing' used in refactor\archived_code\ingestion_coordinator_original.py
  Missing import for 'doc_id' used in refactor\archived_code\ingestion_coordinator_original.py
  Missing import for 'text' used in refactor\archived_code\ingestion_coordinator_original.py
  Missing import for 'batch_size' used in refactor\archived_code\ingestion_coordinator_original.py
  Missing import for 'ingest_to_neo4j' used in packages\morag-graph\run_ingestion.py
  Missing import for 'exit' used in packages\morag-graph\run_ingestion.py
  Missing import for 'main' used in packages\morag-graph\run_ingestion.py
  Missing import for 'neo4j_password' used in packages\morag-graph\run_ingestion.py
  Missing import for 'neo4j_user' used in packages\morag-graph\run_ingestion.py
  Missing import for 'clear_existing' used in packages\morag-graph\run_ingestion.py
  Missing import for 'neo4j_uri' used in packages\morag-graph\run_ingestion.py
  Missing import for 'database_configs' used in packages\morag\src\morag\database_handler.py
  Missing import for 'embeddings_data' used in packages\morag\src\morag\database_handler.py
  Missing import for 'ingest_data' used in packages\morag\src\morag\database_handler.py
  Missing import for 'entities' used in packages\morag-graph\src\morag_graph\extraction\entity_normalizer.py

WARNINGS:
  Unused import 'Path' in tests\test_periodic_cleanup_service.py
  Unused import 'tempfile' in tests\test_periodic_cleanup_service.py
  Unused import 'UnexpectedResponse' in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Unused import 'timezone' in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Unused import 'datetime' in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Unused import 'CollectionInfo' in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  Unused import 'UnifiedProcessResponse' in packages\morag\tests\test_unified_endpoint.py
  Unused import 'UnifiedProcessRequest' in packages\morag\tests\test_unified_endpoint.py
  Unused import 'json' in tests\test_document_features.py
  Unused import 'easyocr' in packages\morag-image\tests\conftest.py
  Unused import 'get_qdrant_storages' in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Unused import 'get_neo4j_storages' in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Unused import 'Depends' in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Unused import 'get_default_qdrant_storage' in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Unused import 'get_default_neo4j_storage' in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Unused import 'Optional' in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  Unused import 'Dict' in examples\ai_error_handling_demo.py
  Unused import 'GeminiEmbeddingService' in examples\ai_error_handling_demo.py
  Unused import 'ExternalServiceError' in examples\ai_error_handling_demo.py
  Unused import 'RateLimitError' in examples\ai_error_handling_demo.py
  Unused import 'Any' in examples\ai_error_handling_demo.py
  Unused import 'process_document_task' in tests\integration\test_document_tasks.py
  Unused import 'Path' in packages\morag-stages\tests\test_markdown_conversion.py
  Unused import 'AudioService' in examples\gpu_cpu_fallback_demo.py
  Unused import 'SpeakerDiarizationService' in examples\gpu_cpu_fallback_demo.py
  Unused import 'Document' in packages\morag-graph\src\morag_graph\updates\checksum_manager.py
  Unused import 'time' in tests\test_shared_volume_access.py
  Unused import 'tempfile' in tests\test_shared_volume_access.py
  Unused import 'QdrantStorage' in refactor\archived_code\ingestion_coordinator_original.py
  Unused import 'Relation' in refactor\archived_code\ingestion_coordinator_original.py
  Unused import 'FactExtractionService' in refactor\archived_code\ingestion_coordinator_original.py
  Unused import 'QdrantConfig' in refactor\archived_code\ingestion_coordinator_original.py
  Unused import 'QdrantStorage' in packages\morag\src\morag\database_handler.py
  Unused import 'Document' in packages\morag\src\morag\database_handler.py
  Unused import 'Optional' in packages\morag\src\morag\database_handler.py
  Unused import 'Path' in packages\morag\src\morag\database_handler.py
  Unused import 'json' in packages\morag\src\morag\database_handler.py
  Unused import 'QdrantConfig' in packages\morag\src\morag\database_handler.py
  Unused import 'DocumentChunk' in packages\morag\src\morag\database_handler.py
  Unused import 'FactRelation' in packages\morag\src\morag\database_handler.py

Found 70 errors and 40 warnings
ERRORS:
  Missing import for 'main' used in packages\morag-document\examples\process_text.py
  Missing import for 'overrides' used in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
  Missing import for 'r' used in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
  Missing import for 'relationship_id' used in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
  Missing import for 'failing_method' used in packages\morag-stages\tests\test_error_handling.py
  Missing import for 'test_function' used in packages\morag-stages\tests\test_error_handling.py
  Missing import for 'filters' used in packages\morag\src\morag\orchestrator.py
  Missing import for 'limit' used in packages\morag\src\morag\orchestrator.py
  Missing import for 'query' used in packages\morag\src\morag\orchestrator.py
  Missing import for 'options' used in packages\morag\src\morag\orchestrator.py
  Missing import for 'items' used in packages\morag\src\morag\orchestrator.py
  Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\base_operations.py
  Missing import for 'parameters' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\base_operations.py
  Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\base_operations.py
  Missing import for 'NotImplementedError' used in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
  Missing import for 'extractor' used in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
  Missing import for 'source_doc_id' used in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
  Missing import for 'context' used in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
  Missing import for 'max_concurrent' used in cli\ingest-markdown-folder.py
  Missing import for 'process_single_markdown_file' used in cli\ingest-markdown-folder.py
  Missing import for 'KeyboardInterrupt' used in cli\ingest-markdown-folder.py
  Missing import for 'process_markdown_folder' used in cli\ingest-markdown-folder.py
  Missing import for 'dry_run' used in cli\ingest-markdown-folder.py
  Missing import for 'process_with_semaphore' used in cli\ingest-markdown-folder.py
  Missing import for 'language' used in cli\ingest-markdown-folder.py
  Missing import for 'm' used in packages\morag-reasoning\src\morag_reasoning\citation_integrator.py
  Missing import for 'facts' used in packages\morag-reasoning\src\morag_reasoning\citation_integrator.py
  Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\updates\cleanup_manager.py
  Missing import for 'texts' used in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
  Missing import for 'max_facts' used in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
  Missing import for 'min_confidence' used in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
  Missing import for 'f' used in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
  Missing import for 'stage_types' used in packages\morag-stages\src\morag_stages\manager.py
  Missing import for 'initial_input_files' used in packages\morag-stages\src\morag_stages\manager.py
  Missing import for 'mock_processor' used in tests\unit\test_video_tasks.py
  Missing import for 'mock_audio_task' used in tests\unit\test_video_tasks.py
  Missing import for 'mock_service' used in tests\unit\test_video_tasks.py
  Missing import for 'input_files' used in packages\morag-stages\tests\test_framework.py
  Missing import for 'stage_type' used in packages\morag-stages\tests\test_framework.py
  Missing import for 'AssertionError' used in packages\morag-stages\tests\test_framework.py
  Missing import for 'save_output' used in packages\morag-audio\src\morag_audio\service.py
  Missing import for 'progress_callback' used in packages\morag-audio\src\morag_audio\service.py
  Missing import for 'markdown_content' used in packages\morag-audio\src\morag_audio\service.py
  Missing import for 'output_format' used in packages\morag-audio\src\morag_audio\service.py

WARNINGS:
  Unused import 'Optional' in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
  Unused import 'Set' in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
  Unused import 'annotations' in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
  Unused import 'AsyncMock' in packages\morag-stages\tests\test_error_handling.py
  Unused import 'Path' in packages\morag-stages\tests\test_error_handling.py
  Unused import 'DocumentChunk' in packages\morag\src\morag\orchestrator.py
  Unused import 'Document' in packages\morag\src\morag\orchestrator.py
  Unused import 'asyncio' in packages\morag\src\morag\orchestrator.py
  Unused import 'Any' in tests\test_rag_quality_validation.py
  Unused import 'List' in tests\test_rag_quality_validation.py
  Unused import 'os' in tests\test_rag_quality_validation.py
  Unused import 'tempfile' in tests\test_rag_quality_validation.py
  Unused import 'Dict' in tests\test_rag_quality_validation.py
  Unused import 'DocumentChunk' in packages\morag\src\morag\__init__.py
  Unused import 'ServiceConfig' in packages\morag\src\morag\__init__.py
  Unused import 'WebProcessor' in packages\morag\src\morag\__init__.py
  Unused import 'ContentType' in packages\morag\src\morag\__init__.py
  Unused import 'PipelineStateManager' in packages\morag\src\morag\__init__.py
  Unused import 'Document' in packages\morag\src\morag\__init__.py
  Unused import 'server_main' in packages\morag\src\morag\__init__.py
  Unused import 'IntermediateFileManager' in packages\morag\src\morag\__init__.py
  Unused import 'MoRAGOrchestrator' in packages\morag\src\morag\__init__.py
  Unused import 'worker_main' in packages\morag\src\morag\__init__.py
  Unused import 'MoRAGServices' in packages\morag\src\morag\__init__.py
  Unused import 'IngestionOptions' in packages\morag\src\morag\__init__.py
  Unused import 'MoRAGPipelineAgent' in packages\morag\src\morag\__init__.py
  Unused import 'MoRAGAPI' in packages\morag\src\morag\__init__.py
  Unused import 'create_app' in packages\morag\src\morag\__init__.py
  Unused import 'ResolutionOptions' in packages\morag\src\morag\__init__.py
  Unused import 'ProcessingResult' in packages\morag\src\morag\__init__.py
  Unused import 'cli_main' in packages\morag\src\morag\__init__.py
  Unused import 'YouTubeProcessor' in packages\morag\src\morag\__init__.py
  Unused import 'WebConverter' in packages\morag\src\morag\__init__.py
  Unused import 'AsyncSession' in packages\morag-graph\src\morag_graph\storage\neo4j_operations\base_operations.py
  Unused import 'create_path_from_string' in packages\morag\src\morag\utils\__init__.py
  Unused import 'is_url' in packages\morag\src\morag\utils\__init__.py
  Unused import 'URLPath' in packages\morag\src\morag\utils\__init__.py
  Unused import 'get_url_string' in packages\morag\src\morag\utils\__init__.py
  Unused import 'lx' in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
  Unused import 'os' in packages\morag-audio\tests\test_processor.py
  Unused import 'Path' in packages\morag-audio\tests\test_processor.py
  Unused import 'quote_plus' in tests\cli\test-remote-debug.py
  Unused import 'urlparse' in tests\cli\test-remote-debug.py
  Unused import 'os' in tests\cli\test-remote-debug.py
  Unused import 'time' in tests\cli\test-remote-debug.py
  Unused import 'Optional' in tests\cli\test-remote-debug.py
  Unused import 'Optional' in packages\morag-graph\src\morag_graph\updates\cleanup_manager.py
  Unused import 'IDCollisionDetector' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'IDCollisionError' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'clean_json_response' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'extract_json_from_text' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'IDValidationError' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'retry_on_api_errors' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'retry_with_exponential_backoff' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'parse_json_response' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'UnifiedIDGenerator' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'IDValidator' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'LLMResponseParseError' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'is_retryable_error' in packages\morag-graph\src\morag_graph\utils\__init__.py
  Unused import 'Dict' in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
  Unused import 'Any' in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
  Unused import 'ExtractedFact' in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
  Unused import 'Dict' in packages\morag-document\src\morag_document\converters\document_converters.py
  Unused import 'DocumentType' in packages\morag-document\src\morag_document\converters\document_converters.py
  Unused import 'List' in packages\morag-document\src\morag_document\converters\document_converters.py
  Unused import 'Any' in packages\morag-document\src\morag_document\converters\document_converters.py
  Unused import 'Dict' in packages\morag-stages\src\morag_stages\manager.py
  Unused import 'PipelineConfig' in packages\morag-stages\src\morag_stages\manager.py
  Unused import 'Any' in packages\morag-stages\src\morag_stages\manager.py
  Unused import 'Stage' in packages\morag-stages\src\morag_stages\manager.py
  Unused import 'os' in agents\config\manager.py
  Unused import 'Any' in agents\config\manager.py
  Unused import 'Type' in agents\config\manager.py
  Unused import 'json' in agents\config\manager.py
  Unused import 'asyncio' in packages\morag-stages\tests\test_framework.py
  Unused import 'os' in packages\morag-audio\src\morag_audio\service.py
  Unused import 'List' in packages\morag-audio\src\morag_audio\service.py
  Unused import 'AudioProcessingError' in packages\morag-audio\src\morag_audio\service.py
  Unused import 'AsyncMock' in agents\tests\test_reasoning_agents.py
  Unused import 'asyncio' in agents\tests\test_reasoning_agents.py
  Unused import 'Mock' in agents\tests\test_reasoning_agents.py

Found 44 errors and 82 warnings
ERRORS:
  Missing import for 'test_dynamic_extraction' used in packages\morag-graph\test_dynamic_extraction.py
  Missing import for 'process_candidate' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'proposal_ids' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'config_overrides' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'llm_inference' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'run_keyword_hierarchization' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'parent_id' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'limit_keywords' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'child_id' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'fid_batch' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'detach' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Missing import for 'SyntaxError' used in scripts\check_imports.py
  Missing import for 'test_audio_processing' used in tools\remote-converter\remote_converter_minimal.py
  Missing import for 'file_paths' used in tests\unit\processors\test_audio_processor.py
  Missing import for 'audience' used in agents\generation\explanation.py
  Missing import for 'kwargs' used in agents\generation\explanation.py
  Missing import for 'context' used in agents\generation\explanation.py
  Missing import for 'explanation_type' used in agents\generation\explanation.py
  Missing import for 'topic' used in agents\generation\explanation.py
  Missing import for 'allow_intermediate' used in packages\morag\src\morag\utils\file_upload.py
  Missing import for 'x' used in packages\morag\src\morag\utils\file_upload.py
  Missing import for 'RuntimeError' used in packages\morag\src\morag\utils\file_upload.py
  Missing import for 'file' used in packages\morag\src\morag\utils\file_upload.py
  Missing import for 'mock_celery_task' used in tests\integration\test_youtube_pipeline.py
  Missing import for 'mock_qdrant_service' used in tests\integration\test_youtube_pipeline.py
  Missing import for 'tmp_path' used in tests\integration\test_youtube_pipeline.py
  Missing import for 'mock_youtube_metadata' used in tests\integration\test_youtube_pipeline.py
  Missing import for 'mock_gemini_service' used in tests\integration\test_youtube_pipeline.py
  Missing import for 'exit' used in agents\test_simple_import.py

WARNINGS:
  Unused import 'datetime' in cli\stage-status.py
  Unused import 'WebConverter' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'process_web_urls_batch' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'WebScrapingResult' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'WebService' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'process_web_url' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'WebProcessor' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'WebContent' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'ProcessWebUrlTask' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'WebScrapingConfig' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'ProcessWebUrlsBatchTask' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'create_celery_tasks' in packages\morag-web\src\morag_web\__init__.py
  Unused import 'annotations' in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  Unused import 'MagicMock' in tests\test_qdrant_collection_unification.py
  Unused import 'GraphBuildResult' in packages\morag-graph\src\morag_graph\builders\__init__.py
  Unused import 'GraphBuildError' in packages\morag-graph\src\morag_graph\builders\__init__.py
  Unused import 'EnhancedGraphBuilder' in packages\morag-graph\src\morag_graph\builders\__init__.py
  Unused import 'GraphBuilder' in packages\morag-graph\src\morag_graph\builders\__init__.py
  Unused import 'EnhancedGraphBuildResult' in packages\morag-graph\src\morag_graph\builders\__init__.py
  Unused import 'AudioConverter' in packages\morag-audio\src\morag_audio\converters\__init__.py
  Unused import 'AudioConversionResult' in packages\morag-audio\src\morag_audio\converters\__init__.py
  Unused import 'AudioConversionOptions' in packages\morag-audio\src\morag_audio\converters\__init__.py
  Unused import 'get_file_hash' in packages\morag-document\src\morag_document\converters\base_converter.py
  Unused import 'List' in packages\morag-document\src\morag_document\converters\base_converter.py
  Unused import 'UnsupportedFormatError' in packages\morag-document\src\morag_document\converters\base_converter.py
  Unused import 'get_file_info' in packages\morag-document\src\morag_document\converters\base_converter.py
  Unused import 'detect' in packages\morag-document\src\morag_document\converters\base_converter.py
  Unused import 'ChunkingStrategy' in packages\morag-document\src\morag_document\converters\base_converter.py
  Unused import 'os' in packages\morag-document\src\morag_document\converters\base_converter.py
  Unused import 'DocumentMetadata' in packages\morag-document\src\morag_document\converters\base_converter.py
  Unused import 'defaultdict' in scripts\check_imports.py
  Unused import 're' in scripts\check_imports.py
  Unused import 'Optional' in scripts\check_imports.py
  Unused import 'Optional' in packages\morag-core\src\morag_core\exceptions.py
  Unused import 'requests' in tools\remote-converter\remote_converter_minimal.py
  Unused import 'shutil' in tools\remote-converter\remote_converter_minimal.py
  Unused import 'List' in tools\remote-converter\remote_converter_minimal.py
  Unused import 'time' in tools\remote-converter\remote_converter_minimal.py
  Unused import 'load_dotenv' in tools\remote-converter\remote_converter_minimal.py
  Unused import 'tempfile' in tools\remote-converter\remote_converter_minimal.py
  Unused import 'os' in tools\remote-converter\remote_converter_minimal.py
  Unused import 'signal' in tools\remote-converter\remote_converter_minimal.py
  Unused import 'Union' in packages\morag-core\src\morag_core\chunking\config.py
  Unused import 'RemoteConverterConfig' in tools\remote-converter\__init__.py
  Unused import 'RemoteConverter' in tools\remote-converter\__init__.py
  Unused import 'setup_logging' in tools\remote-converter\__init__.py
  Unused import 'Optional' in packages\morag-core\src\morag_core\models\embedding.py
  Unused import 'Union' in packages\morag-core\src\morag_core\models\embedding.py
  Unused import 'Any' in packages\morag\src\morag\utils\file_upload.py
  Unused import 'List' in packages\morag\src\morag\utils\file_upload.py
  Unused import 'asyncio' in packages\morag\src\morag\utils\file_upload.py
  Unused import 'Dict' in packages\morag\src\morag\utils\file_upload.py
  Unused import 'HTTPException' in packages\morag\src\morag\utils\file_upload.py
  Unused import 'Optional' in packages\morag-image\src\morag_image\converters\image_formatter.py
  Unused import 'List' in packages\morag-image\src\morag_image\converters\image_formatter.py
  Unused import 'process_youtube_playlist' in tests\integration\test_youtube_pipeline.py
  Unused import 'process_youtube_video' in tests\integration\test_youtube_pipeline.py
  Unused import 'extract_youtube_metadata' in tests\integration\test_youtube_pipeline.py
  Unused import 'EmbeddingResult' in tests\integration\test_youtube_pipeline.py
  Unused import 'Path' in tests\integration\test_youtube_pipeline.py
  Unused import 'BaseAgent' in agents\test_simple_import.py
  Unused import 'create_agent' in agents\test_simple_import.py
  Unused import 'Optional' in packages\morag-core\src\morag_core\utils\processing.py
  Unused import 'asdict' in packages\morag-core\src\morag_core\utils\processing.py
  Unused import 'json' in packages\morag-core\src\morag_core\utils\processing.py
  Unused import 'List' in packages\morag-core\src\morag_core\utils\processing.py
  Unused import 'types' in packages\morag-services\src\morag_services\embedding.py

Found 29 errors and 67 warnings
ERRORS:
  Missing import for 'x' used in refactor\archived_code\fact_generator_original.py
  Missing import for 'mock_transcribe_audio' used in tests\unit\test_whisper_service.py
  Missing import for 'mock_get_model' used in tests\unit\test_whisper_service.py
  Missing import for 'KeyboardInterrupt' used in packages\morag-graph\run_tests.py
  Missing import for 'exit' used in packages\morag-graph\run_tests.py
  Missing import for 'FileNotFoundError' used in packages\morag-graph\run_tests.py
  Missing import for 'config_overrides' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  Missing import for 'llm_inference' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  Missing import for 'run_keyword_linking' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  Missing import for 'k_id' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  Missing import for 'process_parent' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  Missing import for 'row' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  Missing import for 'chunk_text' used in packages\morag-graph\src\morag_graph\extraction\fact_extractor.py
  Missing import for 'relation_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  Missing import for 'entity_name' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  Missing import for 'relation_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  Missing import for 'relation_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  Missing import for 'direction' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  Missing import for 'language' used in packages\morag\src\morag\graph_extractor_wrapper.py
  Missing import for 'content' used in packages\morag\src\morag\graph_extractor_wrapper.py
  Missing import for 'config_overrides' used in packages\morag-graph\src\morag_graph\maintenance\isolated_nodes_cleanup.py
  Missing import for 'mock_generate_embedding' used in tests\test_15_integration.py
  Missing import for 'ingest_entities' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'file_path' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'ingest_relations' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'main' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'query_graph_stats' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'entities_data' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'relations_data' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'test_neo4j_connection' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'load_extracted_data' used in packages\morag-graph\test_neo4j_ingestion.py
  Missing import for 'max_context_length' used in packages\morag-services\src\morag_services\contextual_retrieval.py
  Missing import for 'text' used in packages\morag-services\src\morag_services\contextual_retrieval.py
  Missing import for 'collection_name' used in packages\morag-services\src\morag_services\contextual_retrieval.py
  Missing import for 'max_length' used in packages\morag-services\src\morag_services\contextual_retrieval.py
  Missing import for 'vector_storage' used in packages\morag-services\src\morag_services\contextual_retrieval.py
  Missing import for 'document' used in packages\morag-services\src\morag_services\contextual_retrieval.py

WARNINGS:
  Unused import 'AgentConfig' in refactor\archived_code\fact_generator_original.py
  Unused import 'create_agent' in refactor\archived_code\fact_generator_original.py
  Unused import 'MoRAGServices' in tests\test_modular_integration.py
  Unused import 'ContentType' in tests\test_modular_integration.py
  Unused import 'Document' in tests\test_modular_integration.py
  Unused import 'asyncio' in tests\test_modular_integration.py
  Unused import 'DocumentChunk' in tests\test_modular_integration.py
  Unused import 'annotations' in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  Unused import 'asyncio' in packages\morag-image\tests\test_processor.py
  Unused import 'Any' in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  Unused import 'Dict' in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  Unused import 'RetryConfig' in agents\__init__.py
  Unused import 'BaseAgent' in agents\__init__.py
  Unused import 'SynthesisAgent' in agents\__init__.py
  Unused import 'ResponseGenerationAgent' in agents\__init__.py
  Unused import 'AgentError' in agents\__init__.py
  Unused import 'ModelConfig' in agents\__init__.py
  Unused import 'ExplanationAgent' in agents\__init__.py
  Unused import 'LLMResponseParser' in agents\__init__.py
  Unused import 'ContextAnalysisAgent' in agents\__init__.py
  Unused import 'TopicAnalysisAgent' in agents\__init__.py
  Unused import 'KeywordExtractionAgent' in agents\__init__.py
  Unused import 'FilteringAgent' in agents\__init__.py
  Unused import 'register_agent' in agents\__init__.py
  Unused import 'ContentAnalysisAgent' in agents\__init__.py
  Unused import 'ConfigurationError' in agents\__init__.py
  Unused import 'LLMResponseParseError' in agents\__init__.py
  Unused import 'ValidationAgent' in agents\__init__.py
  Unused import 'AgentRegistry' in agents\__init__.py
  Unused import 'AgentConfigManager' in agents\__init__.py
  Unused import 'create_agent' in agents\__init__.py
  Unused import 'SemanticChunkingAgent' in agents\__init__.py
  Unused import 'AgentFactory' in agents\__init__.py
  Unused import 'SummarizationAgent' in agents\__init__.py
  Unused import 'get_agent' in agents\__init__.py
  Unused import 'PathSelectionAgent' in agents\__init__.py
  Unused import 'EntityExtractionAgent' in agents\__init__.py
  Unused import 'ChunkingAgent' in agents\__init__.py
  Unused import 'PromptGenerationError' in agents\__init__.py
  Unused import 'FactExtractionAgent' in agents\__init__.py
  Unused import 'ReasoningAgent' in agents\__init__.py
  Unused import 'QueryAnalysisAgent' in agents\__init__.py
  Unused import 'ClassificationAgent' in agents\__init__.py
  Unused import 'DecisionMakingAgent' in agents\__init__.py
  Unused import 'SentimentAnalysisAgent' in agents\__init__.py
  Unused import 'RelationExtractionAgent' in agents\__init__.py
  Unused import 'PromptConfig' in agents\__init__.py
  Unused import 'PromptTemplate' in agents\__init__.py
  Unused import 'AgentConfig' in agents\__init__.py
  Unused import 'annotations' in packages\morag-graph\src\morag_graph\maintenance\isolated_nodes_cleanup.py
  Unused import 'time' in tests\cli\test-docker-fixes.py
  Unused import 'Path' in tests\cli\test-docker-fixes.py
  Unused import 'Fact' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'FactRelation' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'Entity' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'Document' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'FactRelationType' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'Relation' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'FactType' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'DocumentChunk' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'Graph' in packages\morag-graph\src\morag_graph\models\__init__.py
  Unused import 'json' in tools\remote-converter\test_converter.py
  Unused import 'asyncio' in packages\morag\src\morag\services\cleanup_service.py
  Unused import 'time' in packages\morag\src\morag\services\cleanup_service.py
  Unused import 'Any' in tests\test_15_integration.py
  Unused import 'List' in tests\test_15_integration.py
  Unused import 'Dict' in tests\test_15_integration.py
  Unused import 'Graph' in packages\morag-graph\test_neo4j_ingestion.py
  Unused import 'asyncio' in packages\morag-services\src\morag_services\contextual_retrieval.py
  Unused import 'Tuple' in packages\morag-services\src\morag_services\contextual_retrieval.py
  Unused import 'ExternalServiceError' in packages\morag-services\src\morag_services\contextual_retrieval.py

Found 39 errors and 71 warnings
ERRORS:
  Missing import for 'v' used in scripts\run_keyword_hierarchization.py
  Missing import for 'main_async' used in scripts\run_keyword_hierarchization.py
  Missing import for 'run_conversion' used in scripts\test_docling_docker.py
  Missing import for 'format_type' used in packages\morag-document\src\morag_document\converters\text.py
  Missing import for 'test_qdrant_connection' used in tests\manual\test_qdrant_connection.py
  Missing import for 'source_entity_id' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'mock_relation_extract' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'relations' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'target_entity_id' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'direction' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'entity_type' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'relation_ids' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'entity_ids' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'relation_id' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'query' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'graph' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'relation_type' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'limit' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'entity_id' used in packages\morag-graph\tests\test_graph_builder.py
  Missing import for 'OSError' used in packages\morag-core\src\morag_core\services\language_detection.py
  Missing import for 'UnicodeDecodeError' used in packages\morag-document\src\morag_document\services\markitdown_service.py
  Missing import for 'AssertionError' used in tests\test_chunk_size_config.py
  Missing import for 'test_httpx_request' used in tests\manual\test_qdrant_network.py
  Missing import for 'main' used in tests\manual\test_qdrant_network.py
  Missing import for 'RuntimeError' used in scripts\install_morag.py
  Missing import for 'text' used in packages\morag-graph\src\morag_graph\extraction\base.py

WARNINGS:
  Unused import 'annotations' in scripts\run_keyword_hierarchization.py
  Unused import 'subprocess' in scripts\check_dependencies.py
  Unused import 'pyannote.audio' in scripts\check_dependencies.py
  Unused import 'playwright' in scripts\check_dependencies.py
  Unused import 'asyncio' in tests\integration\test_webhooks.py
  Unused import 'MagicMock' in tests\integration\test_webhooks.py
  Unused import 'Path' in packages\morag-document\src\morag_document\converters\text.py
  Unused import 'os' in tests\manual\test_qdrant_connection.py
  Unused import 'MagicMock' in packages\morag-graph\tests\test_graph_builder.py
  Unused import 'Any' in packages\morag-graph\tests\test_graph_builder.py
  Unused import 'List' in packages\morag-graph\tests\test_graph_builder.py
  Unused import 'asyncio' in packages\morag-graph\tests\test_graph_builder.py
  Unused import 'Dict' in packages\morag-graph\tests\test_graph_builder.py
  Unused import 'langdetect' in packages\morag-core\src\morag_core\services\language_detection.py
  Unused import 'tempfile' in tests\test_chunk_size_config.py
  Unused import 'asyncio' in scripts\demo_graph_extractor.py
  Unused import 'sys' in scripts\demo_graph_extractor.py
  Unused import 'datetime' in packages\morag-graph\tests\test_fact_models.py
  Unused import 'os' in tests\manual\test_qdrant_network.py
  Unused import 'os' in tests\integration\test_package_independence.py
  Unused import 'tempfile' in tests\integration\test_package_independence.py
  Unused import 'BaseConverter' in tests\integration\test_package_independence.py
  Unused import 'BaseProcessor' in tests\integration\test_package_independence.py
  Unused import 'Any' in tests\integration\test_package_independence.py
  Unused import 'Dict' in tests\integration\test_package_independence.py
  Unused import 'RelationExtractionAgent' in agents\extraction\__init__.py
  Unused import 'FactExtractionAgent' in agents\extraction\__init__.py
  Unused import 'KeywordExtractionAgent' in agents\extraction\__init__.py
  Unused import 'EntityExtractionAgent' in agents\extraction\__init__.py
  Unused import 'StageConfig' in packages\morag-stages\tests\test_models.py
  Unused import 'PipelineConfig' in packages\morag-stages\tests\test_models.py
  Unused import 'pytest' in packages\morag-stages\tests\test_models.py
  Unused import 'Optional' in scripts\install_morag.py
  Unused import 'Dict' in scripts\install_morag.py
  Unused import 'Any' in scripts\install_morag.py
  Unused import 'List' in scripts\install_morag.py
  Unused import 'MagicMock' in packages\morag-reasoning\tests\test_path_selection.py
  Unused import 'json' in scripts\test-docker-build.py
  Unused import 'time' in scripts\test-docker-build.py

Found 26 errors and 39 warnings
ERRORS:
  Missing import for 'OSError' used in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Missing import for 'x' used in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Missing import for 'prompt' used in packages\morag-reasoning\tests\conftest.py
  Missing import for 'mock_generate' used in packages\morag-reasoning\tests\conftest.py
  Missing import for 'get_connected_default_qdrant_storage' used in packages\morag\src\morag\dependencies.py
  Missing import for 'name' used in packages\morag\src\morag\dependencies.py
  Missing import for 'depth' used in packages\morag\src\morag\dependencies.py
  Missing import for 'end_id' used in packages\morag\src\morag\dependencies.py
  Missing import for 'entity_type' used in packages\morag\src\morag\dependencies.py
  Missing import for 'get_connected_default_neo4j_storage' used in packages\morag\src\morag\dependencies.py
  Missing import for 'max_results' used in packages\morag\src\morag\dependencies.py
  Missing import for 'entity_id' used in packages\morag\src\morag\dependencies.py
  Missing import for 'query' used in packages\morag\src\morag\dependencies.py
  Missing import for 'start_id' used in packages\morag\src\morag\dependencies.py
  Missing import for 'max_depth' used in packages\morag\src\morag\dependencies.py
  Missing import for 'relation_filters' used in packages\morag\src\morag\dependencies.py
  Missing import for 'limit' used in packages\morag\src\morag\dependencies.py
  Missing import for 'file_path' used in tests\test_race_condition_integration.py
  Missing import for 'FileNotFoundError' used in tests\test_race_condition_integration.py
  Missing import for 'simulate_worker_processing' used in tests\test_race_condition_integration.py
  Missing import for 'DocumentParseResult' used in examples\page_based_chunking_demo.py
  Missing import for 'demonstrate_chunking_strategies' used in examples\page_based_chunking_demo.py
  Missing import for 'demonstrate_page_based_chunking' used in examples\page_based_chunking_demo.py
  Missing import for 'create_sample_document_chunks' used in examples\page_based_chunking_demo.py
  Missing import for 'main' used in examples\page_based_chunking_demo.py
  Missing import for 'test_httpx_with_auth' used in tests\manual\test_qdrant_auth.py
  Missing import for 'test_qdrant_client_async' used in tests\manual\test_qdrant_auth.py
  Missing import for 'main' used in tests\manual\test_qdrant_auth.py
  Missing import for 'async_wrapper' used in packages\morag-stages\src\morag_stages\error_handling.py
  Missing import for 'target_entities' used in packages\morag-reasoning\src\morag_reasoning\path_selection.py
  Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\path_selection.py
  Missing import for 'start_entities' used in packages\morag-reasoning\src\morag_reasoning\path_selection.py
  Missing import for 'strategy' used in packages\morag-reasoning\src\morag_reasoning\path_selection.py
  Missing import for 'content_type' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Missing import for 'UnicodeDecodeError' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Missing import for 'config' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\audio_processor.py
  Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\audio_processor.py
  Missing import for 'x' used in packages\morag-stages\src\morag_stages\file_manager.py
  Missing import for 'mock_read' used in tests\test_file_upload_api.py
  Missing import for 'size' used in tests\test_file_upload_api.py
  Missing import for 'chunk_id' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'vector' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'metadata' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'relations' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 'relation' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Missing import for 't' used in packages\morag-reasoning\src\morag_reasoning\graph_traversal_agent.py

WARNINGS:
  Unused import 'asyncio' in agents\tests\test_extraction_agents.py
  Unused import 'ExtractedKeyword' in agents\tests\test_extraction_agents.py
  Unused import 'AsyncMock' in agents\tests\test_extraction_agents.py
  Unused import 'RelationTypeExamples' in agents\tests\test_extraction_agents.py
  Unused import 'EntityTypeExamples' in agents\tests\test_extraction_agents.py
  Unused import 'ExtractedFact' in agents\tests\test_extraction_agents.py
  Unused import 'ConfidenceLevel' in agents\tests\test_extraction_agents.py
  Unused import 'Mock' in agents\tests\test_extraction_agents.py
  Unused import 'ExtractedRelation' in agents\tests\test_extraction_agents.py
  Unused import 'Any' in agents\factory\registry.py
  Unused import 'ConfigurationError' in agents\factory\registry.py
  Unused import 'ExternalServiceError' in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Unused import 'Dict' in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Unused import 'Tuple' in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Unused import 'Any' in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Unused import 'ProcessingError' in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Unused import 'Segment' in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Unused import 'np' in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Unused import 'torch' in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  Unused import 'Any' in packages\morag-reasoning\tests\conftest.py
  Unused import 'Dict' in packages\morag-reasoning\tests\conftest.py
  Unused import 'List' in packages\morag-reasoning\tests\conftest.py
  Unused import 'RetrievalContext' in packages\morag\src\morag\dependencies.py
  Unused import 'AsyncMock' in tests\test_race_condition_integration.py
  Unused import 'tempfile' in tests\test_race_condition_integration.py
  Unused import 'Path' in tests\test_race_condition_integration.py
  Unused import 'QueryEntity' in packages\morag-graph\src\morag_graph\query\__init__.py
  Unused import 'QueryEntityExtractor' in packages\morag-graph\src\morag_graph\query\__init__.py
  Unused import 'QueryAnalysis' in packages\morag-graph\src\morag_graph\query\__init__.py
  Unused import 'QueryIntentAnalyzer' in packages\morag-graph\src\morag_graph\query\__init__.py
  Unused import 'tempfile' in examples\page_based_chunking_demo.py
  Unused import 'os' in tests\manual\test_qdrant_auth.py
  Unused import 'ResponseHandlingException' in tests\manual\test_qdrant_auth.py
  Unused import 'asyncio' in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Unused import 'URLPath' in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Unused import 'MoRAGServices' in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Unused import 'ContentType' in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Unused import 'get_url_string' in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  Unused import 'os' in tests\test_progress_logging.py
  Unused import 'asyncio' in tests\test_progress_logging.py
  Unused import 'PDFConverter' in tests\test_progress_logging.py
  Unused import 'DocumentProcessor' in tests\test_progress_logging.py
  Unused import 'patch' in tests\test_progress_logging.py
  Unused import 'process_file_task' in tests\test_progress_logging.py
  Unused import 'tempfile' in tests\test_progress_logging.py
  Unused import 'Mock' in tests\test_progress_logging.py
  Unused import 'Path' in packages\morag-audio\tests\test_rest_transcription.py
  Unused import 'Path' in tests\test_file_upload_api.py
  Unused import 'asyncio' in tests\test_file_upload_api.py
  Unused import 'io' in tests\test_file_upload_api.py
  Unused import 'tempfile' in tests\test_file_upload_api.py
  Unused import 'Any' in packages\morag-graph\src\morag_graph\query\entity_extractor.py
  Unused import 'Dict' in packages\morag-graph\src\morag_graph\query\entity_extractor.py
  Unused import 'CreateCollection' in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Unused import 'SearchRequest' in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Unused import 'Set' in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  Unused import 'asyncio' in tests\test_pydantic_ai_extraction.py
  Unused import 'MoRAGBaseAgent' in tests\test_pydantic_ai_extraction.py
  Unused import 'List' in tests\test_pydantic_ai_extraction.py
  Unused import 'ConfidenceLevel' in tests\test_pydantic_ai_extraction.py
  Unused import 'AgentConfig' in tests\test_pydantic_ai_extraction.py
  Unused import 'ConversionOptions' in tests\integration\test_content_conversion_integration.py
  Unused import 'asyncio' in tests\test_additional_agents.py

Found 56 errors and 63 warnings
ERRORS:
  Missing import for 'kwargs' used in packages\morag\src\morag\ingestion_coordinator.py
  Missing import for 'chunk_overlap' used in packages\morag\src\morag\ingestion_coordinator.py
  Missing import for 'content_type' used in packages\morag\src\morag\ingestion_coordinator.py
  Missing import for 'chunk_size' used in packages\morag\src\morag\ingestion_coordinator.py
  Missing import for 'mock_model_class' used in tests\unit\test_vision_service.py
  Missing import for 'mock_settings' used in tests\unit\test_vision_service.py
  Missing import for 'OSError' used in packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py
  Missing import for 'RuntimeError' used in packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py
  Missing import for 'facts' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Missing import for 'entities_dict' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Missing import for 'component_type' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Missing import for 'create_keyword_entities' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Missing import for 'create_mandatory_relations' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Missing import for 'entities' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Missing import for 'test_embedding_service_instantiation' used in tests\cli\test-embedding-fix.py
  Missing import for 'main' used in tests\cli\test-embedding-fix.py
  Missing import for 'content_types' used in packages\morag\src\morag\endpoints\remote_jobs.py
  Missing import for 'request' used in packages\morag\src\morag\endpoints\remote_jobs.py
  Missing import for 'worker_id' used in packages\morag\src\morag\endpoints\remote_jobs.py
  Missing import for 'result' used in packages\morag\src\morag\endpoints\remote_jobs.py
  Missing import for 'max_jobs' used in packages\morag\src\morag\endpoints\remote_jobs.py
  Missing import for 'job_id' used in packages\morag\src\morag\endpoints\remote_jobs.py
  Missing import for 'service' used in packages\morag\src\morag\endpoints\remote_jobs.py
  Missing import for '_generate_with_retry' used in packages\morag-embedding\src\morag_embedding\service.py
  Missing import for 'texts' used in packages\morag-embedding\src\morag_embedding\service.py
  Missing import for '_generate_summary_with_retry' used in packages\morag-embedding\src\morag_embedding\service.py
  Missing import for 'language' used in packages\morag-embedding\src\morag_embedding\service.py
  Missing import for '_generate_batch_with_retry' used in packages\morag-embedding\src\morag_embedding\service.py
  Missing import for 'max_length' used in packages\morag-embedding\src\morag_embedding\service.py
  Missing import for 'process_audio' used in packages\morag-audio\src\morag_audio\cli.py
  Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\video_processor.py
  Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\video_processor.py
  Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\recursive_fact_retrieval_service.py
  Missing import for 'node_id' used in packages\morag-reasoning\src\morag_reasoning\recursive_fact_retrieval_service.py
  Missing import for 'relation_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'facts' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'relation' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'context' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'documents' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'chunks' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'direction' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'entity_names' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'max_depth' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'database_name' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'max_clusters' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'entity' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'relation_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'chunk_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'document' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'relation_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'graph' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'min_cluster_size' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'fact_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'search_term' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'entities' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'relations' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'chunk_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'chunk' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'fact' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Missing import for 'retry_on_overload' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'func' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'base_delay' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'max_retries' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'request' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'jitter' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'exponential_base' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'max_delay' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'perform_retrieval' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'get_intelligent_retrieval_service' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Missing import for 'process_directory' used in packages\morag-image\src\morag_image\cli.py
  Missing import for 'max_concurrency' used in packages\morag-image\src\morag_image\cli.py
  Missing import for 'file_path' used in packages\morag-image\src\morag_image\cli.py
  Missing import for 'main' used in packages\morag-image\src\morag_image\cli.py
  Missing import for 'dir_path' used in packages\morag-image\src\morag_image\cli.py
  Missing import for 'process_single_image' used in packages\morag-image\src\morag_image\cli.py

WARNINGS:
  Unused import 'Path' in packages\morag\src\morag\ingestion_coordinator.py
  Unused import 'asyncio' in packages\morag\src\morag\ingestion_coordinator.py
  Unused import 'time' in tests\test_03_integration.py
  Unused import 'Any' in packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py
  Unused import 'StageValidationError' in packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py
  Unused import 'Dict' in packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py
  Unused import 'FactGraphOperations' in packages\morag-graph\src\morag_graph\extraction\fact_graph_builder.py
  Unused import 'FactGraphBuilder' in packages\morag-graph\src\morag_graph\extraction\fact_graph_builder.py
  Unused import 'GraphUtilities' in packages\morag-graph\src\morag_graph\extraction\fact_graph_builder.py
  Unused import 'asyncio' in packages\morag-reasoning\tests\test_graph_tool_controller.py
  Unused import 'Any' in packages\morag-reasoning\tests\test_graph_tool_controller.py
  Unused import 'ToolResult' in packages\morag-reasoning\tests\test_graph_tool_controller.py
  Unused import 'List' in packages\morag-reasoning\tests\test_graph_tool_controller.py
  Unused import 'Dict' in packages\morag-reasoning\tests\test_graph_tool_controller.py
  Unused import 'tempfile' in tests\test_17_integration.py
  Unused import 'Relation' in packages\morag-graph\tests\test_langextract_integration.py
  Unused import 'patch' in packages\morag-graph\tests\test_langextract_integration.py
  Unused import 'asyncio' in packages\morag-graph\tests\test_langextract_integration.py
  Unused import 'Set' in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Unused import 'Tuple' in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Unused import 'asyncio' in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Unused import 'UnifiedIDGenerator' in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  Unused import 'ingest_file_task' in tests\test_celery_exception_handling.py
  Unused import 'asyncio' in tests\test_celery_exception_handling.py
  Unused import 'os' in tests\cli\test-embedding-fix.py
  Unused import 'List' in packages\morag\src\morag\endpoints\remote_jobs.py
  Unused import 'PollJobsRequest' in packages\morag\src\morag\endpoints\remote_jobs.py
  Unused import 'asyncio' in packages\morag\src\morag\endpoints\remote_jobs.py
  Unused import 'sys' in scripts\test-optimized-build.py
  Unused import 'np' in packages\morag-embedding\src\morag_embedding\service.py
  Unused import 'Union' in packages\morag-embedding\src\morag_embedding\service.py
  Unused import 'QuotaExceededError' in packages\morag-embedding\src\morag_embedding\service.py
  Unused import 'RetryError' in packages\morag-embedding\src\morag_embedding\service.py
  Unused import 'os' in packages\morag-audio\src\morag_audio\cli.py
  Unused import 'sys' in packages\morag-audio\src\morag_audio\cli.py
  Unused import 'AudioProcessor' in packages\morag-audio\src\morag_audio\cli.py
  Unused import 'stop_cleanup_service' in packages\morag\src\morag\services\__init__.py
  Unused import 'PeriodicCleanupService' in packages\morag\src\morag\services\__init__.py
  Unused import 'force_cleanup' in packages\morag\src\morag\services\__init__.py
  Unused import 'start_cleanup_service' in packages\morag\src\morag\services\__init__.py
  Unused import 'get_cleanup_service' in packages\morag\src\morag\services\__init__.py
  Unused import 'AsyncSession' in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Unused import 'datetime' in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Unused import 'AsyncGraphDatabase' in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Unused import 'UnifiedIDGenerator' in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Unused import 'IDValidator' in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Unused import 'Set' in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  Unused import 'Optional' in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Unused import 'RecursiveFactRetrievalService' in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Unused import 'Depends' in packages\morag\src\morag\endpoints\intelligent_retrieval.py
  Unused import 'ImageConfig' in packages\morag-image\src\morag_image\cli.py
  Unused import 'ImageProcessor' in packages\morag-image\src\morag_image\cli.py
  Unused import 'Optional' in packages\morag-image\src\morag_image\cli.py
  Unused import 'DocumentConverter' in packages\morag-document\src\morag_document\converters\__init__.py
  Unused import 'PresentationConverter' in packages\morag-document\src\morag_document\converters\__init__.py
  Unused import 'WordConverter' in packages\morag-document\src\morag_document\converters\__init__.py
  Unused import 'MarkitdownConverter' in packages\morag-document\src\morag_document\converters\__init__.py
  Unused import 'TextConverter' in packages\morag-document\src\morag_document\converters\__init__.py
  Unused import 'ArchiveConverter' in packages\morag-document\src\morag_document\converters\__init__.py
  Unused import 'ExcelConverter' in packages\morag-document\src\morag_document\converters\__init__.py
  Unused import 'PDFConverter' in packages\morag-document\src\morag_document\converters\__init__.py
  Unused import 'Path' in tests\test_basic_enhanced_converters.py

Found 86 errors and 62 warnings
ERRORS:
  Missing import for 'process_batch' used in packages\morag-core\src\morag_core\performance.py
  Missing import for 'max_concurrent' used in packages\morag-core\src\morag_core\performance.py
  Missing import for 'delay_between_batches' used in packages\morag-core\src\morag_core\performance.py
  Missing import for 'items' used in packages\morag-core\src\morag_core\performance.py
  Missing import for 'process_batch_with_semaphore' used in packages\morag-core\src\morag_core\performance.py
  Missing import for 'async_wrapper' used in packages\morag-core\src\morag_core\performance.py
  Missing import for 'process_func' used in packages\morag-core\src\morag_core\performance.py
  Missing import for 'test_hybrid_retrieval' used in cli\test-query.py
  Missing import for 'test_simple_query' used in cli\test-query.py
  Missing import for 'main' used in cli\test-query.py
  Missing import for 'test_neo4j_connection' used in cli\test-query.py
  Missing import for 'test_graph_traversal' used in cli\test-query.py
  Missing import for 'end_entity' used in cli\test-query.py
  Missing import for 'KeyboardInterrupt' used in cli\test-query.py
  Missing import for 'entity_name' used in cli\test-query.py
  Missing import for 'query' used in cli\test-query.py
  Missing import for 'start_entity' used in cli\test-query.py
  Missing import for 'test_qdrant_connection' used in cli\test-query.py
  Missing import for 'test_entity_query' used in cli\test-query.py
  Missing import for 'test_graph_analytics' used in cli\test-query.py
  Missing import for 'test_multi_hop_reasoning' used in cli\test-query.py
  Missing import for 'mock_model_class' used in tests\unit\test_image_processor.py
  Missing import for 'mock_tesseract' used in tests\unit\test_image_processor.py
  Missing import for 'mock_reader_class' used in tests\unit\test_image_processor.py
  Missing import for 'existing_relations' used in packages\morag-graph\src\morag_graph\extraction\enhanced_relation_extractor.py
  Missing import for 'entities' used in packages\morag-graph\src\morag_graph\extraction\enhanced_relation_extractor.py
  Missing import for 'source_doc_id' used in packages\morag-graph\src\morag_graph\extraction\enhanced_relation_extractor.py
  Missing import for 'tmp_path' used in packages\morag-document\tests\test_markitdown_service.py
  Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\entity_identification.py
  Missing import for 'query' used in packages\morag-reasoning\src\morag_reasoning\entity_identification.py
  Missing import for 'facts' used in packages\morag-graph\src\morag_graph\extraction\graph_builder_interface.py
  Missing import for 'mock_client' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'whisper_service' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'always_failing_operation' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'gemini_service' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'concurrent_operation' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'execute_with_ai_resilience' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'initially_failing_operation' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'operation_id' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'get_ai_service_health' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'mock_whisper_model' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'fast_operation' used in tests\integration\test_ai_error_handling_integration.py
  Missing import for 'mock_service_class' used in tests\remote_conversion\test_ingestion_integration.py
  Missing import for 'mock_store' used in tests\remote_conversion\test_ingestion_integration.py
  Missing import for 'facts' used in packages\morag-reasoning\src\morag_reasoning\fact_scorer.py
  Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\fact_scorer.py
  Missing import for 'min_confidence' used in packages\morag-graph\run_extraction.py
  Missing import for 'max_facts' used in packages\morag-graph\run_extraction.py
  Missing import for 'main' used in packages\morag-graph\run_extraction.py
  Missing import for 'exit' used in packages\morag-graph\run_extraction.py
  Missing import for 'model' used in packages\morag-graph\run_extraction.py
  Missing import for 'KeyboardInterrupt' used in packages\morag-graph\run_extraction.py
  Missing import for 'domain' used in packages\morag-graph\run_extraction.py
  Missing import for 'extract_facts_from_file' used in packages\morag-graph\run_extraction.py
  Missing import for 'min_confidence' used in cli\fact-extraction.py
  Missing import for 'max_facts' used in cli\fact-extraction.py
  Missing import for 'main' used in cli\fact-extraction.py
  Missing import for 'model' used in cli\fact-extraction.py
  Missing import for 'collection_name' used in cli\fact-extraction.py
  Missing import for 'qdrant_api_key' used in cli\fact-extraction.py
  Missing import for 'store_in_neo4j' used in cli\fact-extraction.py
  Missing import for 'neo4j_user' used in cli\fact-extraction.py
  Missing import for 'store_in_qdrant' used in cli\fact-extraction.py
  Missing import for 'FactVectorOperations' used in cli\fact-extraction.py
  Missing import for 'domain' used in cli\fact-extraction.py
  Missing import for 'qdrant_url' used in cli\fact-extraction.py
  Missing import for 'FactExtractionService' used in cli\fact-extraction.py
  Missing import for 'extract_facts_from_file' used in cli\fact-extraction.py
  Missing import for 'neo4j_uri' used in cli\fact-extraction.py

WARNINGS:
  Unused import 'BaseMarkitdownConverter' in packages\morag-document\src\morag_document\converters\markitdown_base.py
  Unused import 'MarkitdownConverter' in packages\morag-document\src\morag_document\converters\markitdown_base.py
  Unused import 'ChunkingProcessor' in packages\morag-document\src\morag_document\converters\markitdown_base.py
  Unused import 'RetryExhaustedError' in packages\morag-core\src\morag_core\ai\base_agent.py
  Unused import 'Union' in packages\morag-core\src\morag_core\ai\base_agent.py
  Unused import 'RunContext' in packages\morag-core\src\morag_core\ai\base_agent.py
  Unused import 'EntityQueryRequest' in cli\test-query.py
  Unused import 'QueryEntityExtractor' in cli\test-query.py
  Unused import 'EnhancedQueryRequest' in cli\test-query.py
  Unused import 'ExpansionStrategy' in cli\test-query.py
  Unused import 'HybridRetrievalCoordinator' in cli\test-query.py
  Unused import 'GraphTraversalRequest' in cli\test-query.py
  Unused import 'ReasoningStrategy' in cli\test-query.py
  Unused import 'QueryType' in cli\test-query.py
  Unused import 'IterativeRetriever' in cli\test-query.py
  Unused import 'Neo4jConfig' in cli\test-query.py
  Unused import 'GraphCRUD' in cli\test-query.py
  Unused import 'ContextExpansionEngine' in cli\test-query.py
  Unused import 'GraphPath' in cli\test-query.py
  Unused import 'json' in cli\test-query.py
  Unused import 'FusionStrategy' in cli\test-query.py
  Unused import 'QdrantConfig' in cli\test-query.py
  Unused import 'yaml' in tests\integration\test_architecture_compliance.py
  Unused import 'Path' in packages\morag-document\tests\test_markitdown_service.py
  Unused import 'AsyncMock' in packages\morag-document\tests\test_markitdown_service.py
  Unused import 'json' in tests\test_api_chunk_size.py
  Unused import 'Union' in packages\morag-core\src\morag_core\config.py
  Unused import 'GeminiEmbeddingService' in tests\integration\test_ai_error_handling_integration.py
  Unused import 'asyncio' in tests\test_enhanced_extraction.py
  Unused import 'Dict' in tests\test_enhanced_extraction.py
  Unused import 'MergeCandidate' in tests\test_enhanced_extraction.py
  Unused import 'List' in tests\test_enhanced_extraction.py
  Unused import 'LLMMergeValidator' in tests\test_enhanced_extraction.py
  Unused import 'SemanticGleaningStrategy' in tests\test_enhanced_extraction.py
  Unused import 'SummaryResult' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'BatchEmbeddingResult' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'IngestionResponse' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'DocumentMetadata' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'ErrorResponse' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'RemoteJob' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'DocumentProcessingConfig' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'EmbeddingConfig' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'DocumentType' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'DocumentChunk' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'VideoProcessingConfig' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'BatchIngestionResponse' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'TaskStatusResponse' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'ProcessingConfig' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'ImageProcessingConfig' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'WebProcessingConfig' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'ProcessingResult' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'AudioProcessingConfig' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'Document' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'SourceType' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'EmbeddingResult' in packages\morag-core\src\morag_core\models\__init__.py
  Unused import 'AsyncMock' in agents\tests\test_generation_agents.py
  Unused import 'asyncio' in agents\tests\test_generation_agents.py
  Unused import 'Mock' in agents\tests\test_generation_agents.py
  Unused import 'Set' in agents\tests\test_consistency.py
  Unused import 'GlobalPromptLoader' in agents\tests\test_consistency.py
  Unused import 'AsyncMock' in tests\remote_conversion\test_ingestion_integration.py
  Unused import 'ingest_file_task' in tests\remote_conversion\test_ingestion_integration.py
  Unused import 'os' in scripts\toggle_mock_mode.py
  Unused import 'FactExtractionService' in packages\morag-graph\run_extraction.py
  Unused import 'Fact' in packages\morag-graph\run_extraction.py
  Unused import 'Neo4jStorage' in packages\morag-graph\run_extraction.py
  Unused import 'List' in packages\morag-graph\run_extraction.py

Found 69 errors and 67 warnings
ERRORS:
  Missing import for 'max_distance' used in packages\morag-graph\src\morag_graph\operations\traversal.py
  Missing import for 'max_length' used in packages\morag-graph\src\morag_graph\operations\traversal.py
  Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\operations\traversal.py
  Missing import for 'p' used in packages\morag-graph\src\morag_graph\operations\traversal.py
  Missing import for 'relation' used in packages\morag-graph\tests\test_graph_builder_checksum.py
  Missing import for 'entity_id' used in packages\morag-graph\tests\test_graph_builder_checksum.py
  Missing import for 'relation_id' used in packages\morag-graph\tests\test_graph_builder_checksum.py
  Missing import for 'min_confidence' used in packages\morag-core\src\morag_core\agents\advanced_extraction_agent.py
  Missing import for 'main' used in packages\morag-document\examples\process_document.py
  Missing import for 'mock_to_thread' used in tests\unit\test_video_processor.py
  Missing import for 'mock_cv2_cap' used in tests\unit\test_video_processor.py
  Missing import for 'prop' used in tests\unit\test_video_processor.py
  Missing import for 'mock_probe' used in tests\unit\test_video_processor.py
  Missing import for 'execute_stage_chain' used in packages\morag-stages\examples\cli_example.py
  Missing import for 'input_file' used in packages\morag-stages\examples\cli_example.py
  Missing import for 'IOError' used in packages\morag-stages\examples\cli_example.py
  Missing import for 'webhook_url' used in packages\morag-stages\examples\cli_example.py
  Missing import for 'main' used in packages\morag-stages\examples\cli_example.py
  Missing import for 'stage_name' used in packages\morag-stages\examples\cli_example.py
  Missing import for 'execute_single_stage' used in packages\morag-stages\examples\cli_example.py
  Missing import for 'temp_dir' used in packages\morag\src\morag\api_models\utils.py
  Missing import for 'file_path' used in packages\morag\src\morag\api_models\utils.py
  Missing import for 'relations_by_chunk' used in packages\morag-graph\src\morag_graph\extraction\systematic_deduplicator.py
  Missing import for 'entities_by_chunk' used in packages\morag-graph\src\morag_graph\extraction\systematic_deduplicator.py
  Missing import for 'entity_merge_mapping' used in packages\morag-graph\src\morag_graph\extraction\systematic_deduplicator.py
  Missing import for 'EntityDeduplicator' used in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
  Missing import for 'neo4j_storage' used in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
  Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\retrieval\context_expansion.py
  Missing import for 'messages' used in cli\test-prompt.py
  Missing import for 'max_tokens' used in cli\test-prompt.py
  Missing import for 'temperature' used in cli\test-prompt.py
  Missing import for 'main' used in cli\test-prompt.py
  Missing import for 'test_database_connections' used in cli\test-prompt.py
  Missing import for 'execute_prompt_with_reasoning' used in cli\test-prompt.py
  Missing import for 'KeyboardInterrupt' used in cli\test-prompt.py
  Missing import for 'execute_prompt_with_fact_retrieval' used in cli\test-prompt.py
  Missing import for 'process_batch' used in packages\morag-services\examples\services_example.py
  Missing import for 'detect_content_types' used in packages\morag-services\examples\services_example.py
  Missing import for 'main' used in packages\morag-services\examples\services_example.py
  Missing import for 'process_single_item' used in packages\morag-services\examples\services_example.py
  Missing import for 'use_pipeline' used in packages\morag-services\examples\services_example.py
  Missing import for 'count_words' used in packages\morag-services\examples\services_example.py
  Missing import for 'texts' used in packages\morag-services\examples\services_example.py
  Missing import for 'query_id' used in packages\morag\src\morag\utils\response_builder.py
  Missing import for 'processing_time' used in packages\morag\src\morag\utils\response_builder.py
  Missing import for 'index' used in packages\morag\src\morag\utils\response_builder.py
  Missing import for 'raw_result' used in packages\morag\src\morag\utils\response_builder.py
  Missing import for 'x' used in scripts\analyze_dependencies.py

WARNINGS:
  Unused import 'DummyExtractor' in packages\morag-graph\src\morag_graph\extraction\__init__.py
  Unused import 'Relation' in packages\morag-graph\src\morag_graph\extraction\__init__.py
  Unused import 'Entity' in packages\morag-graph\src\morag_graph\extraction\__init__.py
  Unused import 'BaseExtractor' in packages\morag-graph\src\morag_graph\extraction\__init__.py
  Unused import 'os' in tests\test_document_improvements_integration.py
  Unused import 'json' in tests\test_document_deduplication.py
  Unused import 'MagicMock' in packages\morag-graph\tests\test_graph_builder_checksum.py
  Unused import 'YouTubeService' in packages\morag-stages\src\morag_stages\stages\converter_factory.py
  Unused import 'ContentType' in packages\morag-stages\src\morag_stages\stages\converter_factory.py
  Unused import 'Any' in packages\morag-stages\src\morag_stages\stages\converter_factory.py
  Unused import 'Dict' in packages\morag-stages\src\morag_stages\stages\converter_factory.py
  Unused import 'asyncio' in packages\morag\tests\agents\test_morag_pipeline_agent.py
  Unused import 'PipelineMode' in packages\morag\tests\agents\test_morag_pipeline_agent.py
  Unused import 'Union' in packages\morag-core\src\morag_core\agents\advanced_extraction_agent.py
  Unused import 'YouTubeDownloadResult' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'YouTubeService' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'create_celery_tasks' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'extract_youtube_metadata' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'YouTubeConfig' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'ExtractYouTubeMetadataTask' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'process_youtube_playlist' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'YouTubeMetadata' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'ApifyYouTubeService' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'ApifyYouTubeServiceError' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'ProcessYouTubeVideoTask' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'YouTubeProcessor' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'TranscriptSegment' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'ProcessYouTubePlaylistTask' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'YouTubeTranscript' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'YouTubeTranscriptService' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'process_youtube_video' in packages\morag-youtube\src\morag_youtube\__init__.py
  Unused import 'Optional' in packages\morag-document\src\morag_document\converters\document_formatter.py
  Unused import 'Dict' in packages\morag\src\morag\api_models\utils.py
  Unused import 'asyncio' in packages\morag\src\morag\api_models\utils.py
  Unused import 'Any' in packages\morag\src\morag\api_models\utils.py
  Unused import 'np' in packages\morag-graph\src\morag_graph\extraction\systematic_deduplicator.py
  Unused import 'Any' in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
  Unused import 'asyncio' in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
  Unused import 'Dict' in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
  Unused import 'List' in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
  Unused import 'patch' in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
  Unused import 'Dict' in packages\morag-graph\src\morag_graph\retrieval\context_expansion.py
  Unused import 'ReasoningStrategy' in cli\test-prompt.py
  Unused import 'GraphTraversalRequest' in cli\test-prompt.py
  Unused import 'Neo4jConfig' in cli\test-prompt.py
  Unused import 'QueryType' in cli\test-prompt.py
  Unused import 'HybridRetrievalCoordinator' in cli\test-prompt.py
  Unused import 'ContextExpansionEngine' in cli\test-prompt.py
  Unused import 'GraphPath' in cli\test-prompt.py
  Unused import 'FusionStrategy' in cli\test-prompt.py
  Unused import 'EntityQueryRequest' in cli\test-prompt.py
  Unused import 'GraphTraversal' in cli\test-prompt.py
  Unused import 'IterativeRetriever' in cli\test-prompt.py
  Unused import 'PathSelectionAgent' in cli\test-prompt.py
  Unused import 'GraphCRUD' in cli\test-prompt.py
  Unused import 'ExpansionStrategy' in cli\test-prompt.py
  Unused import 'EnhancedQueryRequest' in cli\test-prompt.py
  Unused import 'GraphAnalytics' in cli\test-prompt.py
  Unused import 'ReasoningPathFinder' in cli\test-prompt.py
  Unused import 'QdrantConfig' in cli\test-prompt.py
  Unused import 'QueryEntityExtractor' in cli\test-prompt.py
  Unused import 'ContentType' in packages\morag-services\examples\services_example.py
  Unused import 'Path' in packages\morag-services\examples\services_example.py
  Unused import 'Dict' in packages\morag\src\morag\utils\response_builder.py
  Unused import 'uuid' in packages\morag\src\morag\utils\response_builder.py
  Unused import 'Optional' in packages\morag\src\morag\utils\response_builder.py
  Unused import 'Set' in scripts\analyze_dependencies.py
  Unused import 'os' in scripts\analyze_dependencies.py
  Unused import 'Dict' in scripts\analyze_dependencies.py
  Unused import 'Optional' in scripts\analyze_dependencies.py
  Unused import 'UnifiedIDGenerator' in packages\morag\src\morag\chunk_processor.py
  Unused import 'ProcessingResult' in packages\morag\src\morag\chunk_processor.py
  Unused import 'EnhancedFactProcessingService' in packages\morag\src\morag\chunk_processor.py
  Unused import 'GeminiEmbeddingService' in packages\morag\src\morag\chunk_processor.py
  Unused import 'asyncio' in packages\morag\src\morag\chunk_processor.py
  Unused import 'timezone' in packages\morag\src\morag\chunk_processor.py
  Unused import 'Path' in packages\morag\src\morag\chunk_processor.py
  Unused import 'Optional' in packages\morag\src\morag\chunk_processor.py
  Unused import 'datetime' in packages\morag\src\morag\chunk_processor.py
  Unused import 'uuid' in packages\morag\src\morag\chunk_processor.py

Found 48 errors and 80 warnings
ERRORS:
  Missing import for 'collection_name' used in cli\deduplicate-entities.py
  Missing import for 'KeyboardInterrupt' used in cli\deduplicate-entities.py
  Missing import for 'RuntimeError' used in cli\deduplicate-entities.py
  Missing import for 'neo4j_password' used in cli\deduplicate-entities.py
  Missing import for 'main' used in cli\deduplicate-entities.py
  Missing import for 'neo4j_username' used in cli\deduplicate-entities.py
  Missing import for 'neo4j_uri' used in cli\deduplicate-entities.py
  Missing import for 'language' used in cli\deduplicate-entities.py
  Missing import for 'neo4j_database' used in cli\deduplicate-entities.py
  Missing import for 'request' used in packages\morag-reasoning\src\morag_reasoning\fact_extraction.py
  Missing import for 'f' used in packages\morag-reasoning\src\morag_reasoning\fact_extraction.py
  Missing import for 'chunks' used in packages\morag-reasoning\src\morag_reasoning\fact_extraction.py
  Missing import for 'expand_terms' used in agents\analysis\query_analysis.py
  Missing import for 'query' used in agents\analysis\query_analysis.py
  Missing import for 'user_history' used in agents\analysis\query_analysis.py
  Missing import for 'context' used in agents\analysis\query_analysis.py
  Missing import for 'extract_youtube_metadata' used in packages\morag-youtube\src\morag_youtube\tasks.py
  Missing import for 'process_youtube_video' used in packages\morag-youtube\src\morag_youtube\tasks.py
  Missing import for 'task_id' used in packages\morag-youtube\src\morag_youtube\tasks.py
  Missing import for 'store_embeddings' used in packages\morag-youtube\src\morag_youtube\tasks.py
  Missing import for 'process_youtube_playlist' used in packages\morag-youtube\src\morag_youtube\tasks.py
  Missing import for 'request' used in packages\morag\src\morag\server.py
  Missing import for 'lifespan' used in packages\morag\src\morag\server.py
  Missing import for 'exc' used in packages\morag\src\morag\server.py
  Missing import for 'min_confidence' used in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
  Missing import for 'entity_types' used in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
  Missing import for 'texts' used in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
  Missing import for 'relation_id' used in packages\morag-graph\tests\test_cleanup_manager.py
  Missing import for 'failing_delete_entity' used in packages\morag-graph\tests\test_cleanup_manager.py
  Missing import for 'entity_id' used in packages\morag-graph\tests\test_cleanup_manager.py
  Missing import for 'RelationType' used in packages\morag-graph\tests\test_cleanup_manager.py
  Missing import for 'test_api_methods' used in tests\test_api_endpoints.py
  Missing import for 'test_content_type_routing' used in tests\test_api_endpoints.py
  Missing import for 'test_audio_configuration' used in tests\test_api_endpoints.py
  Missing import for 'test_services_routing' used in tests\test_api_endpoints.py
  Missing import for 'main' used in tests\test_api_endpoints.py
  Missing import for 'test_video_json_support' used in tests\test_api_endpoints.py
  Missing import for 'entity_names' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
  Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
  Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
  Missing import for 'context' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
  Missing import for 'chunk_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
  Missing import for 'extraction_func' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Missing import for 'wrapper' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Missing import for 'args' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Missing import for 'max_delay' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Missing import for 'retry_with_quota_handling' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Missing import for 'max_quota_wait' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Missing import for 'fallback_strategies' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Missing import for 'kwargs' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Missing import for 'mock_call_model' used in agents\tests\test_basic_functionality.py
  Missing import for 'max_entities_per_iteration' used in packages\morag-reasoning\src\morag_reasoning\recursive_path_follower.py
  Missing import for 'entities' used in packages\morag-reasoning\src\morag_reasoning\recursive_path_follower.py
  Missing import for 'initial_entities' used in packages\morag-reasoning\src\morag_reasoning\recursive_path_follower.py
  Missing import for 'demo_quality_assessment' used in examples\universal_conversion_demo_alt.py
  Missing import for 'demo_format_detection' used in examples\universal_conversion_demo_alt.py
  Missing import for 'demo_pdf_conversion' used in examples\universal_conversion_demo_alt.py
  Missing import for 'main' used in examples\universal_conversion_demo_alt.py
  Missing import for 'demo_converter_info' used in examples\universal_conversion_demo_alt.py
  Missing import for 'demo_text_conversion' used in examples\universal_conversion_demo_alt.py
  Missing import for 'extract_metadata' used in packages\morag-youtube\src\morag_youtube\apify_service.py
  Missing import for 'video_urls' used in packages\morag-youtube\src\morag_youtube\apify_service.py
  Missing import for 'use_proxy' used in packages\morag-youtube\src\morag_youtube\apify_service.py
  Missing import for 'extract_transcript' used in packages\morag-youtube\src\morag_youtube\apify_service.py
  Missing import for 'video_url' used in packages\morag-youtube\src\morag_youtube\apify_service.py
  Missing import for 'max_depth' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'min_fact_score' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'main' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'skip_fact_evaluation' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'facts_only' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'decay_rate' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'user_query' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'max_total_facts' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'language' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'max_facts_per_node' used in cli\test-recursive-fact-retrieval.py
  Missing import for 'KeyboardInterrupt' used in packages\morag-youtube\src\morag_youtube\cli.py
  Missing import for 'transcribe_video' used in packages\morag-youtube\src\morag_youtube\cli.py
  Missing import for 'main' used in packages\morag-youtube\src\morag_youtube\cli.py
  Missing import for 'process_batch' used in packages\morag-youtube\src\morag_youtube\cli.py
  Missing import for 'check_health' used in packages\morag-youtube\src\morag_youtube\cli.py

WARNINGS:
  Unused import 'GraphPath' in packages\morag-graph\src\morag_graph\operations\__init__.py
  Unused import 'GraphAnalytics' in packages\morag-graph\src\morag_graph\operations\__init__.py
  Unused import 'GraphCRUD' in packages\morag-graph\src\morag_graph\operations\__init__.py
  Unused import 'GraphTraversal' in packages\morag-graph\src\morag_graph\operations\__init__.py
  Unused import 'create_agent_with_config' in cli\deduplicate-entities.py
  Unused import 'URLPath' in packages\morag-stages\src\morag_stages\stages\markdown_validators.py
  Unused import 'SpeakerDiarizationService' in packages\morag-audio\src\morag_audio\services\__init__.py
  Unused import 'TopicSegment' in packages\morag-audio\src\morag_audio\services\__init__.py
  Unused import 'SpeakerInfo' in packages\morag-audio\src\morag_audio\services\__init__.py
  Unused import 'SpeakerSegment' in packages\morag-audio\src\morag_audio\services\__init__.py
  Unused import 'DiarizationResult' in packages\morag-audio\src\morag_audio\services\__init__.py
  Unused import 'TopicSegmentationResult' in packages\morag-audio\src\morag_audio\services\__init__.py
  Unused import 'TopicSegmentationService' in packages\morag-audio\src\morag_audio\services\__init__.py
  Unused import 'List' in packages\morag\src\morag\server.py
  Unused import 'Any' in packages\morag\src\morag\server.py
  Unused import 'Dict' in packages\morag\src\morag\server.py
  Unused import 'asyncio' in packages\morag\src\morag\server.py
  Unused import 'HTTPException' in packages\morag\src\morag\server.py
  Unused import 'Optional' in packages\morag\src\morag\server.py
  Unused import 'Entity' in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
  Unused import 'Dict' in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
  Unused import 'Any' in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
  Unused import 'AsyncMock' in packages\morag-graph\tests\test_cleanup_manager.py
  Unused import 'MagicMock' in packages\morag-graph\tests\test_cleanup_manager.py
  Unused import 'Union' in agents\base\template.py
  Unused import 'Template' in agents\base\template.py
  Unused import 'AgentConfig' in agents\base\template.py
  Unused import 'os' in agents\base\template.py
  Unused import 'json' in tests\test_api_endpoints.py
  Unused import 'Set' in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
  Unused import 'Path' in tests\test_document_processing_improvements.py
  Unused import 'asyncio' in tests\test_document_processing_improvements.py
  Unused import 'patch' in tests\test_document_processing_improvements.py
  Unused import 'Union' in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Unused import 'time' in packages\morag-graph\src\morag_graph\utils\quota_retry.py
  Unused import 'AudioProcessingResult' in packages\morag-audio\src\morag_audio\converters\audio_converter.py
  Unused import 'AudioSegment' in packages\morag-audio\src\morag_audio\converters\audio_converter.py
  Unused import 'get_agent' in agents\tests\test_basic_functionality.py
  Unused import 'Mock' in agents\tests\test_basic_functionality.py
  Unused import 'PromptTemplate' in agents\tests\test_basic_functionality.py
  Unused import 'AsyncMock' in agents\tests\test_basic_functionality.py
  Unused import 'ExtractedFact' in agents\tests\test_basic_functionality.py
  Unused import 'RecursiveFactRetrievalResponse' in cli\test-recursive-fact-retrieval.py
  Unused import 'AsyncMock' in packages\morag-graph\tests\traversal\test_path_selector.py
  Unused import 'asyncio' in packages\morag-graph\tests\traversal\test_path_selector.py
  Unused import 'MagicMock' in packages\morag-graph\tests\traversal\test_path_selector.py
  Unused import 'patch' in packages\morag-graph\tests\traversal\test_path_selector.py
  Unused import 'uuid' in tests\test_03_qdrant_service.py
  Unused import 'qdrant_service' in tests\test_03_qdrant_service.py
  Unused import 'asyncio' in tests\test_03_qdrant_service.py

Found 81 errors and 50 warnings
ERRORS:
  Missing import for '_process' used in packages\morag\src\morag\tasks\enhanced_processing_task.py
  Missing import for 'FileNotFoundError' used in packages\morag\src\morag\tasks\enhanced_processing_task.py
  Missing import for 'output_dir' used in packages\morag-stages\src\morag_stages\stages\ingestor.py
  Missing import for 'IOError' used in packages\morag-stages\src\morag_stages\stages\ingestor.py
  Missing import for 's' used in packages\morag-core\src\morag_core\config\manager.py
  Missing import for 'items' used in packages\morag\src\morag\api.py
  Missing import for 'filters' used in packages\morag\src\morag\api.py
  Missing import for 'query' used in packages\morag\src\morag\api.py
  Missing import for 'options' used in packages\morag\src\morag\api.py
  Missing import for 'limit' used in packages\morag\src\morag\api.py
  Missing import for 'tmp_path' used in packages\morag-audio\tests\test_service.py
  Missing import for 'mock_neo4j_storage' used in packages\morag\tests\test_database_servers.py
  Missing import for 'fact_id' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
  Missing import for 'entity_names' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
  Missing import for 'max_facts' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
  Missing import for 'user_query' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
  Missing import for 'language' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
  Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\graph_operations.py
  Missing import for 'test_api_content_type_handling' used in tests\cli\test-bug-fixes.py
  Missing import for 'test_search_endpoint_implementation' used in tests\cli\test-bug-fixes.py
  Missing import for 'test_image_processing_api_fix' used in tests\cli\test-bug-fixes.py
  Missing import for 'test_web_service_method_signature_fix' used in tests\cli\test-bug-fixes.py
  Missing import for 'test_youtube_bot_detection_fix' used in tests\cli\test-bug-fixes.py
  Missing import for 'main' used in tests\cli\test-bug-fixes.py
  Missing import for 'max_length' used in packages\morag-graph\tests\test_graph_processor_intention.py
  Missing import for 'output_dir' used in packages\morag-stages\src\morag_stages\stages\markdown_optimizer.py
  Missing import for 'search_term' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'relation_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'min_cluster_size' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'max_depth' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'max_clusters' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  Missing import for 'KeyboardInterrupt' used in tools\remote-converter\cli.py

WARNINGS:
  Unused import 'asyncio' in packages\morag\src\morag\tasks\enhanced_processing_task.py
  Unused import 'Optional' in packages\morag\src\morag\tasks\enhanced_processing_task.py
  Unused import 'QdrantVectorStorage' in packages\morag-stages\src\morag_stages\stages\ingestor.py
  Unused import 'Type' in packages\morag-core\src\morag_core\config\manager.py
  Unused import 'os' in packages\morag-audio\tests\test_service.py
  Unused import 'Mock' in packages\morag\tests\test_database_servers.py
  Unused import 'get_qdrant_storages' in packages\morag\tests\test_database_servers.py
  Unused import 'get_neo4j_storages' in packages\morag\tests\test_database_servers.py
  Unused import 'Any' in packages\morag-core\src\morag_core\chunking\factory.py
  Unused import 'Dict' in packages\morag-core\src\morag_core\chunking\factory.py
  Unused import 'outlines' in packages\morag-core\src\morag_core\ai\providers.py
  Unused import 'URLPath' in refactor\archived_code\markdown_conversion_original.py
  Unused import 'QdrantStorage' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'GraphAnalytics' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'QdrantConfig' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'Neo4jConfig' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'Neo4jStorage' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'WeightedCombinationFusion' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'ReciprocalRankFusion' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'DatabaseConfig' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'DatabaseServerConfig' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'QueryEntityExtractor' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'RetrievalResult' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'Relation' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'QueryIntentAnalyzer' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'ContextExpansionEngine' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'ExpandedContext' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'GraphTraversal' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'GraphCRUD' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'DatabaseResult' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'Graph' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'Entity' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'EntityExtractor' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'DatabaseServerArray' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'HybridRetrievalCoordinator' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'RelationExtractor' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'RetrievalError' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'ResultFusionEngine' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'DatabaseType' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'GraphPath' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'HybridRetrievalConfig' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'QueryEntity' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'QueryAnalysis' in packages\morag-graph\src\morag_graph\__init__.py
  Unused import 'AsyncMock' in packages\morag-graph\tests\test_graph_processor_intention.py
  Unused import 'os' in packages\morag-graph\tests\test_graph_processor_intention.py
  Unused import 'asyncio' in packages\morag-graph\tests\test_graph_processor_intention.py
  Unused import 'RemoteJob' in tests\remote_conversion\test_remote_job_repository.py
  Unused import 'StageResult' in packages\morag-stages\src\morag_stages\models\stage.py
  Unused import 'StageContext' in packages\morag-stages\src\morag_stages\models\stage.py
  Unused import 'os' in tests\remote_conversion\run_tests.py
  Unused import 'Path' in tools\remote-converter\cli.py
  Unused import 'os' in tools\remote-converter\cli.py

Found 38 errors and 52 warnings

Static analysis..........................................................Failed
- hook id: static-analysis
- exit code: 1

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5068: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 162
Total warnings: 222

File: packages\morag-stages\src\morag_stages\models\result.py
  ERRORS:
    Missing import for 'v' used in packages\morag-stages\src\morag_stages\models\result.py

File: packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
  ERRORS:
    Missing import for 'rel_type' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'relationship_ids' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'fact_rel_type' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'query_name' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'template_params' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'merge_pairs' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'min_facts' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'total_facts' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'min_share' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py
    Missing import for 'params' used in packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py

File: packages\morag-youtube\tests\test_youtube_service.py
  ERRORS:
    Missing import for 'mock_process_url' used in packages\morag-youtube\tests\test_youtube_service.py
    Missing import for 'mock_process_playlist' used in packages\morag-youtube\tests\test_youtube_service.py

File: tests\unit\core\test_base_converter.py
  ERRORS:
    Missing import for 'PermissionError' used in tests\unit\core\test_base_converter.py
    Missing import for 'MemoryError' used in tests\unit\core\test_base_converter.py
    Missing import for 'TimeoutError' used in tests\unit\core\test_base_converter.py

File: packages\morag-services\src\morag_services\cli.py
  ERRORS:
    Missing import for 'process_batch' used in packages\morag-services\src\morag_services\cli.py
    Missing import for 'run_pipeline' used in packages\morag-services\src\morag_services\cli.py
    Missing import for 'process_content' used in packages\morag-services\src\morag_services\cli.py

File: packages\morag-graph\src\morag_graph\storage\__init__.py
  ERRORS:
    Missing import for 'relation' used in packages\morag-graph\src\morag_graph\storage\__init__.py
    Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\storage\__init__.py
    Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\__init__.py
    Missing import for 'source_id' used in packages\morag-graph\src\morag_graph\storage\__init__.py
    Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\storage\__init__.py
    Missing import for 'target_id' used in packages\morag-graph\src\morag_graph\storage\__init__.py

File: scripts\check_syntax.py
  ERRORS:
    Missing import for 'importlib' used in scripts\check_syntax.py
    Missing import for 'SyntaxError' used in scripts\check_syntax.py
    Missing import for 'FileNotFoundError' used in scripts\check_syntax.py

File: packages\morag-core\src\morag_core\utils\validation.py
  ERRORS:
    Missing import for 'OSError' used in packages\morag-core\src\morag_core\utils\validation.py
    Missing import for 'RuntimeError' used in packages\morag-core\src\morag_core\utils\validation.py

File: tests\test_device_fallback.py
  ERRORS:
    Missing import for 'args' used in tests\test_device_fallback.py
    Missing import for 'RuntimeError' used in tests\test_device_fallback.py
    Missing import for 'name' used in tests\test_device_fallback.py

File: tests\manual\test_transcription_fixes.py
  ERRORS:
    Missing import for 'main' used in tests\manual\test_transcription_fixes.py

File: tests\cli\test-qdrant-fix.py
  ERRORS:
    Missing import for 'main' used in tests\cli\test-qdrant-fix.py
    Missing import for 'test_qdrant_instantiation' used in tests\cli\test-qdrant-fix.py

File: tests\manual\test_pdf_parsing.py
  ERRORS:
    Missing import for 'parse_test' used in tests\manual\test_pdf_parsing.py

File: tests\validate_tests.py
  ERRORS:
    Missing import for 'SyntaxError' used in tests\validate_tests.py

File: packages\morag\src\morag\ingest_tasks.py
  ERRORS:
    Missing import for 'remote_job_id' used in packages\morag\src\morag\ingest_tasks.py
    Missing import for '_ingest' used in packages\morag\src\morag\ingest_tasks.py
    Missing import for 'FileNotFoundError' used in packages\morag\src\morag\ingest_tasks.py
    Missing import for 'processing_time' used in packages\morag\src\morag\ingest_tasks.py
    Missing import for 'metadata' used in packages\morag\src\morag\ingest_tasks.py
    Missing import for 'use_content_checksum' used in packages\morag\src\morag\ingest_tasks.py
    Missing import for 'collection_name' used in packages\morag\src\morag\ingest_tasks.py
    Missing import for 'replace_existing' used in packages\morag\src\morag\ingest_tasks.py

File: packages\morag-web\src\morag_web\processor.py
  ERRORS:
    Missing import for 'UnicodeDecodeError' used in packages\morag-web\src\morag_web\processor.py
    Missing import for 'x' used in packages\morag-web\src\morag_web\processor.py
    Missing import for 'text' used in packages\morag-web\src\morag_web\processor.py

File: tests\test_universal_converter.py
  ERRORS:
    Missing import for 'file_path' used in tests\test_universal_converter.py
    tests\test_universal_converter.py:231: Dangerous use of eval/exec

File: mypy
  ERRORS:
    tests\validate_tests.py:139:13: error: "object" has no attribute "append"  [attr-defined]
    tests\validate_tests.py:140:13: error: "object" has no attribute "append"  [attr-defined]
    tests\validate_tests.py:147:13: error: "object" has no attribute "extend"  [attr-defined]
    tests\validate_tests.py:150:13: error: "object" has no attribute "extend"  [attr-defined]
    tests\validate_tests.py:157:13: error: "object" has no attribute "extend"  [attr-defined]
    tests\validate_tests.py:158:13: error: "object" has no attribute "extend"  [attr-defined]
    tests\validate_tests.py:163:13: error: Unsupported operand types for + ("object" and "int")  [operator]
    tests\validate_tests.py:175:13: error: Unsupported operand types for + ("object" and "int")  [operator]
    tests\validate_tests.py:200:36: error: Unsupported left operand type for - ("object")  [operator]
    tests\validate_tests.py:203:43: error: Argument 1 to "len" has incompatible type "object"; expected "Sized"  [arg-type]
    tests\validate_tests.py:204:26: error: "object" has no attribute "__iter__"; maybe "__dir__" or "__str__"? (not iterable)  [attr-defined]
    tests\validate_tests.py:208:43: error: Argument 1 to "len" has incompatible type "object"; expected "Sized"  [arg-type]
    tests\validate_tests.py:209:26: error: "object" has no attribute "__iter__"; maybe "__dir__" or "__str__"? (not iterable)  [attr-defined]
    tests\validate_tests.py:213:46: error: Argument 1 to "len" has incompatible type "object"; expected "Sized"  [arg-type]
    tests\validate_tests.py:214:26: error: "object" has no attribute "__iter__"; maybe "__dir__" or "__str__"? (not iterable)  [attr-defined]
    tests\validate_tests.py:218:14: error: Unsupported left operand type for / ("object")  [operator]
    tests\validate_tests.py:219:16: error: Unsupported operand types for < ("int" and "object")  [operator]
    tests\validate_tests.py:246:9: error: Unsupported left operand type for / ("object")  [operator]
    scripts\check_syntax.py:36:9: error: Need type annotation for "errors" (hint: "errors: list[<type>] = ...")  [var-annotated]
    scripts\check_syntax.py:37:9: error: Need type annotation for "warnings" (hint: "warnings: list[<type>] = ...")  [var-annotated]
    scripts\check_syntax.py:44:46: error: Incompatible default for argument "path" (default has type "None", argument has type "Path")  [assignment]
    scripts\check_syntax.py:339:38: error: Incompatible default for argument "path" (default has type "None", argument has type "Path")  [assignment]
    scripts\check_syntax.py:414:38: error: Argument "path" to "check_all" of "SyntaxChecker" has incompatible type "Path | None"; expected "Path"  [arg-type]
    packages\morag-graph\src\morag_graph\maintenance\query_optimizer.py:202:13: error: Returning Any from function declared to return "list[dict[str, Any]]"  [no-any-return]
    agents\factory\factory.py:133:13: error: Returning Any from function declared to return "T"  [no-any-return]
    agents\factory\factory.py:184:17: error: Returning Any from function declared to return "bool"  [no-any-return]
    tests\unit\core\test_base_converter.py:330:9: error: Need type annotation for "processed_files" (hint: "processed_files: list[<type>] = ...")  [var-annotated]
    tests\unit\core\test_base_converter.py:624:17: error: Unsupported operand types for + ("object" and "int")  [operator]
    tests\unit\core\test_base_converter.py:625:17: error: "object" has no attribute "append"  [attr-defined]
    tests\unit\core\test_base_converter.py:655:64: error: Incompatible default for argument "dependencies" (default has type "None", argument has type "list[Any]")  [assignment]
    tests\unit\core\test_base_converter.py:667:38: error: Incompatible types in assignment (expression has type "ProcessingError", variable has type "None")  [assignment]
    tests\unit\core\test_base_converter.py:668:25: error: Exception must be derived from BaseException  [misc]
    tests\unit\core\test_base_converter.py:673:34: error: Incompatible types in assignment (expression has type "ProcessingError", variable has type "None")  [assignment]
    tests\unit\core\test_base_converter.py:674:21: error: Exception must be derived from BaseException  [misc]
    tests\unit\core\test_base_converter.py:687:9: error: Need type annotation for "completed_stages" (hint: "completed_stages: set[<type>] = ...")  [var-annotated]
    tests\unit\core\test_base_converter.py:710:17: error: Need type annotation for "resources" (hint: "resources: list[<type>] = ...")  [var-annotated]
    packages\morag-graph\tests\test_query_entity_extractor.py:7:1: error: Module "morag_graph.extraction" has no attribute "EntityExtractor"  [attr-defined]
    packages\morag-web\src\morag_web\processor.py:501:24: error: Incompatible types in assignment (expression has type "Tag", variable has type "BeautifulSoup")  [assignment]
    tests\unit\test_audio_converter_fix.py:22:16: error: Unexpected keyword argument "include_metadata" for "ConversionOptions"  [call-arg]
    tests\unit\test_audio_converter_fix.py:22:16: error: Unexpected keyword argument "min_quality_threshold" for "ConversionOptions"; did you mean "quality_threshold"?  [call-arg]
    tests\unit\test_audio_converter_fix.py:22:16: error: Unexpected keyword argument "enable_fallback" for "ConversionOptions"  [call-arg]
    tests\unit\test_audio_converter_fix.py:38:16: error: Unexpected keyword argument "text" for "AudioProcessingResult"  [call-arg]
    tests\unit\test_audio_converter_fix.py:38:16: error: Unexpected keyword argument "language" for "AudioProcessingResult"  [call-arg]
    tests\unit\test_audio_converter_fix.py:38:16: error: Unexpected keyword argument "confidence" for "AudioProcessingResult"  [call-arg]
    tests\unit\test_audio_converter_fix.py:38:16: error: Unexpected keyword argument "duration" for "AudioProcessingResult"  [call-arg]
    tests\unit\test_audio_converter_fix.py:38:16: error: Unexpected keyword argument "model_used" for "AudioProcessingResult"  [call-arg]
    tests\unit\test_audio_converter_fix.py:44:17: error: Unexpected keyword argument "start_time" for "AudioSegment"  [call-arg]
    tests\unit\test_audio_converter_fix.py:44:17: error: Unexpected keyword argument "end_time" for "AudioSegment"  [call-arg]
    tests\unit\test_audio_converter_fix.py:44:17: error: Unexpected keyword argument "language" for "AudioSegment"  [call-arg]
    tests\unit\test_audio_converter_fix.py:51:17: error: Unexpected keyword argument "start_time" for "AudioSegment"  [call-arg]
    tests\unit\test_audio_converter_fix.py:51:17: error: Unexpected keyword argument "end_time" for "AudioSegment"  [call-arg]
    tests\unit\test_audio_converter_fix.py:51:17: error: Unexpected keyword argument "language" for "AudioSegment"  [call-arg]
    tests\unit\test_audio_converter_fix.py:82:13: error: Module "morag_audio" has no attribute "audio_processor"; maybe "AudioProcessor"?  [attr-defined]
    tests\test_device_fallback.py:160:9: error: Module "morag_audio.services" has no attribute "WhisperService"  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\__init__.py:39:52: error: Incompatible default for argument "target_id" (default has type "None", argument has type "str")  [assignment]
    packages\morag-graph\src\morag_graph\storage\__init__.py:79:52: error: Incompatible default for argument "target_id" (default has type "None", argument has type "str")  [assignment]
    packages\morag-graph\src\morag_graph\storage\__init__.py:86:24: error: "Relation" has no attribute "source_id"; maybe "source_doc_id"?  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\__init__.py:86:55: error: "Relation" has no attribute "target_id"  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\__init__.py:90:63: error: "Relation" has no attribute "source_id"; maybe "source_doc_id"?  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\__init__.py:118:52: error: Incompatible default for argument "target_id" (default has type "None", argument has type "str")  [assignment]
    packages\morag-core\src\morag_core\ai\factory.py:51:24: error: Incompatible types in assignment (expression has type "GeminiProvider | OutlinesProvider", variable has type "GeminiProvider | None")  [assignment]
    packages\morag-core\src\morag_core\ai\factory.py:57:32: error: Item "None" of "GeminiProvider | None" has no attribute "is_available"  [union-attr]
    packages\morag-core\src\morag_core\ai\factory.py:102:38: error: Incompatible types in assignment (expression has type "int", target has type "str")  [assignment]
    packages\morag-core\src\morag_core\ai\factory.py:104:42: error: Incompatible types in assignment (expression has type "int", target has type "str")  [assignment]
    packages\morag-core\src\morag_core\ai\factory.py:106:42: error: Incompatible types in assignment (expression has type "float", target has type "str")  [assignment]
    packages\morag-core\src\morag_core\ai\factory.py:108:41: error: Incompatible types in assignment (expression has type "int", target has type "str")  [assignment]
    packages\morag-core\src\morag_core\ai\factory.py:117:30: error: Argument 1 to "ProviderConfig" has incompatible type "**dict[str, str]"; expected "int"  [arg-type]
    packages\morag-core\src\morag_core\ai\factory.py:117:30: error: Argument 1 to "ProviderConfig" has incompatible type "**dict[str, str]"; expected "dict[str, str]"  [arg-type]
    packages\morag-core\src\morag_core\ai\factory.py:117:30: error: Argument 1 to "ProviderConfig" has incompatible type "**dict[str, str]"; expected "dict[str, Any]"  [arg-type]
    packages\morag-core\src\morag_core\ai\factory.py:120:46: error: Incompatible types in assignment (expression has type "ProviderConfig", target has type "str")  [assignment]
    packages\morag-core\src\morag_core\ai\factory.py:122:38: error: Argument 1 to "AgentConfig" has incompatible type "**dict[str, str]"; expected "int"  [arg-type]
    packages\morag-core\src\morag_core\ai\factory.py:122:38: error: Argument 1 to "AgentConfig" has incompatible type "**dict[str, str]"; expected "float"  [arg-type]
    packages\morag-core\src\morag_core\ai\factory.py:122:38: error: Argument 1 to "AgentConfig" has incompatible type "**dict[str, str]"; expected "int | None"  [arg-type]
    packages\morag-core\src\morag_core\ai\factory.py:122:38: error: Argument 1 to "AgentConfig" has incompatible type "**dict[str, str]"; expected "ProviderConfig | None"  [arg-type]
    tests\manual\test_transcription_fixes.py:22:1: error: Module "morag_audio.services" has no attribute "EnhancedTopicSegmentation"  [attr-defined]
    tests\manual\test_transcription_fixes.py:24:1: error: Module "morag_core.models" has no attribute "ChunkingStrategy"  [attr-defined]
    tests\manual\test_transcription_fixes.py:24:1: error: Module "morag_core.models" has no attribute "ConversionOptions"  [attr-defined]
    tests\manual\test_transcription_fixes.py:57:28: error: "AudioProcessor" has no attribute "process_audio_file"  [attr-defined]
    tests\manual\test_pdf_parsing.py:61:9: error: Module "morag_document" has no attribute "UNSTRUCTURED_AVAILABLE"  [attr-defined]
    tests\manual\test_pdf_parsing.py:61:9: error: Module "morag_document" has no attribute "document_processor"; maybe "DocumentProcessor"?  [attr-defined]
    tests\manual\test_pdf_parsing.py:107:9: error: Module "morag_document" has no attribute "document_processor"; maybe "DocumentProcessor"?  [attr-defined]
    packages\morag-services\src\morag_services\cli.py:69:12: error: "ProcessingResult" has no attribute "extracted_files"  [attr-defined]
    packages\morag-services\src\morag_services\cli.py:70:38: error: "ProcessingResult" has no attribute "extracted_files"  [attr-defined]
    packages\morag-services\src\morag_services\cli.py:72:54: error: "ProcessingResult" has no attribute "error_message"  [attr-defined]
    packages\morag-services\src\morag_services\cli.py:123:38: error: "ProcessingResult" has no attribute "error_message"  [attr-defined]
    packages\morag-services\src\morag_services\cli.py:215:38: error: "ProcessingResult" has no attribute "error_message"  [attr-defined]
    tests\test_monitoring.py:12:1: error: Module "morag_services" has no attribute "LoggingService"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:66:27: error: Unexpected keyword argument "task_id" for "ProcessingResult"  [call-arg]
    packages\morag\src\morag\ingest_tasks.py:66:27: error: Unexpected keyword argument "source_type" for "ProcessingResult"  [call-arg]
    packages\morag\src\morag\ingest_tasks.py:513:17: error: Statement is unreachable  [unreachable]
    packages\morag\src\morag\ingest_tasks.py:538:36: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:543:29: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:543:29: error: Argument "content" to "ingest_content" of "IngestionCoordinator" has incompatible type "Any | str | None"; expected "str"  [arg-type]
    packages\morag\src\morag\ingest_tasks.py:584:50: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:584:50: error: Argument 1 to "len" has incompatible type "Any | str | None"; expected "Sized"  [arg-type]
    packages\morag\src\morag\ingest_tasks.py:602:28: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:691:17: error: Statement is unreachable  [unreachable]
    packages\morag\src\morag\ingest_tasks.py:716:30: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:721:29: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:721:29: error: Argument "content" to "ingest_content" of "IngestionCoordinator" has incompatible type "Any | str | None"; expected "str"  [arg-type]
    packages\morag\src\morag\ingest_tasks.py:762:50: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:762:50: error: Argument 1 to "len" has incompatible type "Any | str | None"; expected "Sized"  [arg-type]
    packages\morag\src\morag\ingest_tasks.py:769:28: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:891:25: error: Statement is unreachable  [unreachable]
    packages\morag\src\morag\ingest_tasks.py:920:37: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    packages\morag\src\morag\ingest_tasks.py:920:37: error: Argument "content" to "ingest_content" of "IngestionCoordinator" has incompatible type "Any | str | None"; expected "str"  [arg-type]
    packages\morag\src\morag\ingest_tasks.py:948:40: error: "ProcessingResult" has no attribute "text_content"  [attr-defined]
    tests\cli\validate-ingestion-fixes.py:146:9: error: Module "morag.server" has no attribute "IngestFileRequest"  [attr-defined]
    tests\cli\validate-ingestion-fixes.py:146:9: error: Module "morag.server" has no attribute "IngestURLRequest"  [attr-defined]

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 220
Total warnings: 212

File: agents\config\entity_types.py
  ERRORS:
    Missing import for 'FileNotFoundError' used in agents\config\entity_types.py

File: packages\morag-reasoning\src\morag_reasoning\citation_manager.py
  ERRORS:
    Missing import for 'scored_facts' used in packages\morag-reasoning\src\morag_reasoning\citation_manager.py
    Missing import for 'OSError' used in packages\morag-reasoning\src\morag_reasoning\citation_manager.py

File: packages\morag-document\tests\test_service.py
  ERRORS:
    Missing import for 'tmp_path' used in packages\morag-document\tests\test_service.py

File: tests\test_gpu_error_simulation.py
  ERRORS:
    Missing import for 'gpu' used in tests\test_gpu_error_simulation.py
    Missing import for 'RuntimeError' used in tests\test_gpu_error_simulation.py

File: tests\test_openie_pipeline_integration.py
  ERRORS:
    Missing import for 'entities' used in tests\test_openie_pipeline_integration.py
    Missing import for 'relations' used in tests\test_openie_pipeline_integration.py

File: packages\morag-graph\src\morag_graph\operations\analytics.py
  ERRORS:
    Missing import for 'min_cluster_size' used in packages\morag-graph\src\morag_graph\operations\analytics.py
    Missing import for 'x' used in packages\morag-graph\src\morag_graph\operations\analytics.py
    Missing import for 'c' used in packages\morag-graph\src\morag_graph\operations\analytics.py
    Missing import for 'top_k' used in packages\morag-graph\src\morag_graph\operations\analytics.py
    Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\operations\analytics.py

File: packages\morag-services\src\morag_services\service_coordinator.py
  ERRORS:
    Missing import for 'text' used in packages\morag-services\src\morag_services\service_coordinator.py
    Missing import for 'service_type' used in packages\morag-services\src\morag_services\service_coordinator.py

File: packages\morag-graph\src\morag_graph\utils\retry_utils.py
  ERRORS:
    Missing import for 'kwargs' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
    Missing import for 'exponential_base' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
    Missing import for 'jitter' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
    Missing import for 'retry_with_exponential_backoff' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
    Missing import for 'wrapper' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py
    Missing import for 'args' used in packages\morag-graph\src\morag_graph\utils\retry_utils.py

File: packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
  ERRORS:
    Missing import for 'query_embedding' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
    Missing import for 'x' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
    Missing import for 'similarity_threshold' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
    Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py
    Missing import for 'batch_size' used in packages\morag-graph\src\morag_graph\services\entity_embedding_service.py

File: packages\morag-image\src\morag_image\service.py
  ERRORS:
    Missing import for 'max_concurrency' used in packages\morag-image\src\morag_image\service.py
    Missing import for 'output_format' used in packages\morag-image\src\morag_image\service.py
    Missing import for 'file_paths' used in packages\morag-image\src\morag_image\service.py
    Missing import for 'save_output' used in packages\morag-image\src\morag_image\service.py

File: packages\morag-graph\src\morag_graph\extraction\relation_extractor.py
  ERRORS:
    Missing import for 'main_extraction' used in packages\morag-graph\src\morag_graph\extraction\relation_extractor.py

File: cli\test-custom-database-retrieval.py
  ERRORS:
    Missing import for 'test_rest_api_with_custom_databases' used in cli\test-custom-database-retrieval.py

File: packages\morag-services\tests\test_pipeline.py
  ERRORS:
    Missing import for 'extract_text' used in packages\morag-services\tests\test_pipeline.py
    Missing import for 'data' used in packages\morag-services\tests\test_pipeline.py
    Missing import for 'mock_fn' used in packages\morag-services\tests\test_pipeline.py

File: mypy
  ERRORS:
    packages\morag-core\src\morag_core\optimization.py:220:9: error: Need type annotation for "operations" (hint: "operations: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-core\src\morag_core\optimization.py:230:13: error: Unsupported target for indexed assignment ("object")  [index]
    agents\config\entity_types.py:23:27: error: Incompatible types in assignment (expression has type "Path", variable has type "str | None")  [assignment]
    agents\config\entity_types.py:25:33: error: Argument 1 to "Path" has incompatible type "str | None"; expected "str | PathLike[str]"  [arg-type]
    agents\config\entity_types.py:39:28: error: Incompatible types in assignment (expression has type "dict[str, Any]", variable has type "None")  [assignment]
    agents\config\entity_types.py:42:28: error: Incompatible types in assignment (expression has type "dict[str, Any]", variable has type "None")  [assignment]
    agents\config\entity_types.py:86:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\entity_types.py:86:16: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:94:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\entity_types.py:94:16: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:111:27: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:126:27: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:127:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\entity_types.py:138:26: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:139:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\entity_types.py:150:24: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:151:9: error: Returning Any from function declared to return "str"  [no-any-return]
    agents\config\entity_types.py:162:23: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:163:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\entity_types.py:177:23: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:192:28: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:205:9: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
    agents\config\entity_types.py:205:16: error: "None" has no attribute "get"  [attr-defined]
    agents\config\entity_types.py:214:9: error: Returning Any from function declared to return "bool"  [no-any-return]
    agents\config\entity_types.py:222:9: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
    agents\config\entity_types.py:222:16: error: "None" has no attribute "get"  [attr-defined]
    packages\morag-core\src\morag_core\utils\file_handling.py:69:9: error: Dict entry 5 has incompatible type "str": "float"; expected "str": "str | int"  [dict-item]
    packages\morag-core\src\morag_core\utils\file_handling.py:70:9: error: Dict entry 6 has incompatible type "str": "float"; expected "str": "str | int"  [dict-item]
    cli\test-custom-database-retrieval.py:33:12: error: Missing named argument "port" for "DatabaseServerConfig"  [call-arg]
    cli\test-custom-database-retrieval.py:51:12: error: Missing named argument "username" for "DatabaseServerConfig"  [call-arg]
    cli\test-custom-database-retrieval.py:81:12: error: Missing named argument "neo4j_database" for "IntelligentRetrievalRequest"  [call-arg]
    cli\test-custom-database-retrieval.py:81:12: error: Missing named argument "qdrant_collection" for "IntelligentRetrievalRequest"  [call-arg]
    cli\test-custom-database-retrieval.py:98:12: error: Missing named argument "neo4j_database" for "IntelligentRetrievalRequest"  [call-arg]
    cli\test-custom-database-retrieval.py:98:12: error: Missing named argument "qdrant_collection" for "IntelligentRetrievalRequest"  [call-arg]
    cli\test-custom-database-retrieval.py:98:12: error: Missing named argument "neo4j_server" for "IntelligentRetrievalRequest"  [call-arg]
    cli\test-custom-database-retrieval.py:98:12: error: Missing named argument "qdrant_server" for "IntelligentRetrievalRequest"  [call-arg]
    cli\test-custom-database-retrieval.py:113:12: error: Missing named argument "neo4j_server" for "IntelligentRetrievalRequest"  [call-arg]
    cli\test-custom-database-retrieval.py:113:12: error: Missing named argument "qdrant_server" for "IntelligentRetrievalRequest"  [call-arg]
    packages\morag-graph\src\morag_graph\extraction\relation_extractor.py:15:10: error: Incompatible types in assignment (expression has type "None", variable has type Module)  [assignment]
    packages\morag-graph\src\morag_graph\extraction\relation_extractor.py:414:9: error: Need type annotation for "relations" (hint: "relations: list[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\extraction\relation_extractor.py:588:9: error: Need type annotation for "relations" (hint: "relations: list[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\extraction\relation_extractor.py:696:9: error: Need type annotation for "relations" (hint: "relations: list[<type>] = ...")  [var-annotated]
    packages\morag-image\src\morag_image\service.py:35:31: error: Incompatible types in assignment (expression has type "None", variable has type "Path")  [assignment]
    packages\morag-graph\src\morag_graph\utils\retry_utils.py:114:5: error: Exception must be derived from BaseException  [misc]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:77:29: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:136:17: error: Statement is unreachable  [unreachable]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:139:29: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:214:42: error: Incompatible types in assignment (expression has type "bool | BaseException", target has type "bool")  [assignment]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:235:25: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:287:25: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:347:25: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:363:13: error: Unsupported operand types for + ("object" and "int")  [operator]
    packages\morag-graph\src\morag_graph\services\entity_embedding_service.py:366:13: error: Unsupported target for indexed assignment ("object")  [index]
    packages\morag-graph\src\morag_graph\operations\analytics.py:74:24: error: "BaseStorage" has no attribute "_execute_query"  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:98:26: error: "BaseStorage" has no attribute "get_all_entities"; maybe "get_entities"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:99:27: error: "BaseStorage" has no attribute "get_all_relations"; maybe "get_relations", "get_relation", or "get_entity_relations"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:106:9: error: Need type annotation for "degree_counts"  [var-annotated]
    packages\morag-graph\src\morag_graph\operations\analytics.py:149:26: error: "BaseStorage" has no attribute "get_all_entities"; maybe "get_entities"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:150:27: error: "BaseStorage" has no attribute "get_all_relations"; maybe "get_relations", "get_relation", or "get_entity_relations"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:165:9: error: Need type annotation for "betweenness_scores"  [var-annotated]
    packages\morag-graph\src\morag_graph\operations\analytics.py:275:26: error: "BaseStorage" has no attribute "get_all_entities"; maybe "get_entities"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:276:27: error: "BaseStorage" has no attribute "get_all_relations"; maybe "get_relations", "get_relation", or "get_entity_relations"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:356:26: error: "BaseStorage" has no attribute "get_all_entities"; maybe "get_entities"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:397:27: error: "BaseStorage" has no attribute "get_all_relations"; maybe "get_relations", "get_relation", or "get_entity_relations"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:445:26: error: "BaseStorage" has no attribute "get_all_entities"; maybe "get_entities"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:446:27: error: "BaseStorage" has no attribute "get_all_relations"; maybe "get_relations", "get_relation", or "get_entity_relations"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:480:26: error: "BaseStorage" has no attribute "get_all_entities"; maybe "get_entities"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:481:27: error: "BaseStorage" has no attribute "get_all_relations"; maybe "get_relations", "get_relation", or "get_entity_relations"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:509:17: error: Need type annotation for "cluster" (hint: "cluster: list[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\operations\analytics.py:551:27: error: Argument "key" to "sort" of "list" has incompatible type "Callable[[dict[str, dict[Any, Any] | list[Any] | float | int | Any | None]], dict[Any, Any] | list[Any] | float | int | Any | None]"; expected "Callable[[dict[str, dict[Any, Any] | list[Any] | float | int | Any | None]], SupportsDunderLT[Any] | SupportsDunderGT[Any]]"  [arg-type]
    packages\morag-graph\src\morag_graph\operations\analytics.py:551:37: error: Incompatible return value type (got "dict[Any, Any] | list[Any] | float | int | Any | None", expected "SupportsDunderLT[Any] | SupportsDunderGT[Any]")  [return-value]
    packages\morag-graph\src\morag_graph\operations\analytics.py:565:26: error: "BaseStorage" has no attribute "get_all_entities"; maybe "get_entities"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:566:27: error: "BaseStorage" has no attribute "get_all_relations"; maybe "get_relations", "get_relation", or "get_entity_relations"?  [attr-defined]
    packages\morag-graph\src\morag_graph\operations\analytics.py:573:9: error: Need type annotation for "degree_counts"  [var-annotated]
    packages\morag\src\morag\services\document_deduplication_service.py:73:36: error: Unexpected keyword argument "filter_dict" for "search_by_metadata" of "QdrantVectorStorage"  [call-arg]
    packages\morag\src\morag\services\document_deduplication_service.py:81:35: error: "dict[str, Any]" has no attribute "payload"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:85:46: error: "dict[str, Any]" has no attribute "payload"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:86:41: error: "dict[str, Any]" has no attribute "payload"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:87:44: error: "dict[str, Any]" has no attribute "payload"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:111:36: error: Unexpected keyword argument "filter_dict" for "search_by_metadata" of "QdrantVectorStorage"  [call-arg]
    packages\morag\src\morag\services\document_deduplication_service.py:134:28: error: Unexpected keyword argument "filter_dict" for "search_by_metadata" of "QdrantVectorStorage"  [call-arg]
    packages\morag\src\morag\services\document_deduplication_service.py:143:30: error: "dict[str, Any]" has no attribute "payload"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:144:46: error: "dict[str, Any]" has no attribute "payload"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:145:36: error: "dict[str, Any]" has no attribute "payload"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:146:37: error: "dict[str, Any]" has no attribute "payload"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:159:42: error: "Neo4jStorage" has no attribute "execute_query"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:170:45: error: "Neo4jStorage" has no attribute "execute_query"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:211:19: error: "QdrantVectorStorage" has no attribute "delete_by_metadata"  [attr-defined]
    packages\morag\src\morag\services\document_deduplication_service.py:219:23: error: "Neo4jStorage" has no attribute "execute_query"  [attr-defined]
    tests\test_gpu_error_simulation.py:70:9: error: Module "morag_audio.services" has no attribute "WhisperService"  [attr-defined]
    tests\test_gpu_error_simulation.py:109:9: error: Module "morag_audio.services" has no attribute "EnhancedTopicSegmentation"  [attr-defined]
    tests\test_gpu_error_simulation.py:203:9: error: Module "morag_audio.services" has no attribute "EnhancedTopicSegmentation"  [attr-defined]
    refactor\archived_code\chunk_processor_original.py:38:38: error: Missing positional argument "api_key" in call to "GeminiEmbeddingService"  [call-arg]
    refactor\archived_code\chunk_processor_original.py:42:35: error: Missing positional argument "neo4j_storage" in call to "FactExtractionService"  [call-arg]
    refactor\archived_code\chunk_processor_original.py:56:36: error: Incompatible default for argument "metadata" (default has type "None", argument has type "dict[str, Any]")  [assignment]
    refactor\archived_code\chunk_processor_original.py:60:13: error: Statement is unreachable  [unreachable]
    refactor\archived_code\chunk_processor_original.py:766:13: error: Need type annotation for "chunk_embeddings" (hint: "chunk_embeddings: list[<type>] = ...")  [var-annotated]
    refactor\archived_code\chunk_processor_original.py:968:17: error: Dict entry 0 has incompatible type "str": "int"; expected "str": "list[dict[str, Any]]"  [dict-item]
    refactor\archived_code\chunk_processor_original.py:969:17: error: Dict entry 1 has incompatible type "str": "int"; expected "str": "list[dict[str, Any]]"  [dict-item]
    refactor\archived_code\chunk_processor_original.py:970:17: error: Dict entry 2 has incompatible type "str": "int"; expected "str": "list[dict[str, Any]]"  [dict-item]
    refactor\archived_code\chunk_processor_original.py:971:17: error: Dict entry 3 has incompatible type "str": "bool"; expected "str": "list[dict[str, Any]]"  [dict-item]
    refactor\archived_code\chunk_processor_original.py:972:17: error: Dict entry 4 has incompatible type "str": "bool"; expected "str": "list[dict[str, Any]]"  [dict-item]
    refactor\archived_code\chunk_processor_original.py:973:17: error: Dict entry 5 has incompatible type "str": "bool"; expected "str": "list[dict[str, Any]]"  [dict-item]
    refactor\archived_code\chunk_processor_original.py:1104:9: error: Need type annotation for "serialized" (hint: "serialized: dict[<type>, <type>] = ...")  [var-annotated]
    refactor\archived_code\chunk_processor_original.py:1112:25: error: Item "dict[Any, Any]" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1112:25: error: Item "str" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1112:25: error: Item "int" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1112:25: error: Item "float" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1114:25: error: Item "dict[Any, Any]" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1114:25: error: Item "str" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1114:25: error: Item "int" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1114:25: error: Item "float" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1125:25: error: Item "dict[Any, Any]" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1125:25: error: Item "str" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1125:25: error: Item "int" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    refactor\archived_code\chunk_processor_original.py:1125:25: error: Item "float" of "list[Any] | dict[Any, Any] | str | int | float" has no attribute "append"  [union-attr]
    packages\morag-graph\tests\test_fact_extraction.py:31:16: error: "Fact" has no attribute "subject"  [attr-defined]
    packages\morag-graph\tests\test_fact_extraction.py:32:16: error: "Fact" has no attribute "object"  [attr-defined]
    packages\morag-graph\tests\test_fact_extraction.py:33:16: error: "Fact" has no attribute "approach"  [attr-defined]
    packages\morag-graph\tests\test_fact_extraction.py:34:16: error: "Fact" has no attribute "solution"  [attr-defined]
    packages\morag-graph\tests\test_fact_extraction.py:202:9: error: "FactExtractor" has no attribute "llm_client"  [attr-defined]
    packages\morag-graph\tests\test_fact_extraction.py:327:9: error: Cannot assign to a method  [method-assign]
    packages\morag-graph\tests\test_fact_extraction.py:342:9: error: Cannot assign to a method  [method-assign]
    packages\morag-reasoning\src\morag_reasoning\citation_manager.py:38:32: error: Incompatible types in assignment (expression has type "None", variable has type "dict[str, Any]")  [assignment]
    packages\morag-reasoning\src\morag_reasoning\citation_manager.py:81:9: error: Need type annotation for "_document_metadata_cache" (hint: "_document_metadata_cache: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-reasoning\src\morag_reasoning\citation_manager.py:253:12: error: "CitationManager" has no attribute "_source_cache"  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\citation_manager.py:254:26: error: "CitationManager" has no attribute "_source_cache"  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\citation_manager.py:322:5: error: Missing return statement  [return]
    packages\morag-services\src\morag_services\service_coordinator.py:160:13: error: Module "morag_graph.extraction" has no attribute "FactExtractor"; maybe "BaseExtractor"?  [attr-defined]
    packages\morag-services\src\morag_services\service_coordinator.py:175:13: error: Module "morag_graph.extraction" has no attribute "EntityNormalizer"  [attr-defined]
    packages\morag-services\src\morag_services\service_coordinator.py:217:28: error: Argument "config" to "DocumentService" has incompatible type "ProcessingConfig"; expected "ServiceConfig | None"  [arg-type]
    packages\morag-services\src\morag_services\service_coordinator.py:224:58: error: Argument "config" to "AudioService" has incompatible type "ProcessingConfig"; expected "AudioConfig | None"  [arg-type]
    packages\morag-services\src\morag_services\service_coordinator.py:225:23: error: "AudioService" has no attribute "initialize"  [attr-defined]
    packages\morag-services\src\morag_services\service_coordinator.py:230:58: error: Argument "config" to "VideoService" has incompatible type "ProcessingConfig"; expected "VideoConfig | None"  [arg-type]
    packages\morag-services\src\morag_services\service_coordinator.py:231:23: error: "VideoService" has no attribute "initialize"  [attr-defined]
    packages\morag-services\src\morag_services\service_coordinator.py:236:38: error: Unexpected keyword argument "config" for "ImageService"  [call-arg]
    packages\morag-services\src\morag_services\service_coordinator.py:247:36: error: Unexpected keyword argument "config" for "WebService"  [call-arg]
    packages\morag-services\src\morag_services\service_coordinator.py:262:23: error: "GraphProcessor" has no attribute "initialize"  [attr-defined]
    packages\morag-services\src\morag_services\service_coordinator.py:288:42: error: Argument 1 to "add" of "set" has incompatible type "DocumentService | Any | AudioService | VideoService | ImageService | WebService"; expected "BaseService"  [arg-type]
    packages\morag-services\src\morag_services\service_coordinator.py:327:23: error: Argument 2 to "__call__" of "TimeStamper" has incompatible type "None"; expected "str"  [arg-type]
    packages\morag-services\src\morag_services\service_coordinator.py:361:27: error: "GraphProcessor" has no attribute "get_health_status"  [attr-defined]
    packages\morag-services\src\morag_services\service_coordinator.py:383:24: error: Incompatible return value type (got "EmbeddingResult", expected "list[float] | list[list[float]]")  [return-value]
    packages\morag-services\src\morag_services\service_coordinator.py:385:17: error: Returning Any from function declared to return "list[float] | list[list[float]]"  [no-any-return]
    packages\morag-services\src\morag_services\service_coordinator.py:385:30: error: "GeminiEmbeddingService" has no attribute "generate_batch"  [attr-defined]
    tests\unit\test_document_processor.py:6:1: error: Module "morag_document" has no attribute "DocumentType"  [attr-defined]
    tests\unit\test_document_processor.py:6:1: error: Module "morag_document" has no attribute "document_processor"; maybe "DocumentProcessor"?  [attr-defined]
    packages\morag-document\tests\test_service.py:29:14: error: Unexpected keyword argument "enable_embedding" for "ServiceConfig"  [call-arg]
    packages\morag-document\tests\test_service.py:29:14: error: Unexpected keyword argument "embedding" for "ServiceConfig"  [call-arg]
    packages\morag-document\tests\test_service.py:31:33: error: Incompatible types in assignment (expression has type "MagicMock", variable has type "None")  [assignment]
    packages\morag-document\tests\test_service.py:32:5: error: "None" has no attribute "initialize"  [attr-defined]
    packages\morag-document\tests\test_service.py:33:5: error: "None" has no attribute "shutdown"  [attr-defined]
    packages\morag-document\tests\test_service.py:34:5: error: "None" has no attribute "health_check"  [attr-defined]
    packages\morag-document\tests\test_service.py:35:5: error: "None" has no attribute "embed_batch"  [attr-defined]
    packages\morag-document\tests\test_service.py:36:5: error: "None" has no attribute "summarize"  [attr-defined]
    packages\morag-document\tests\test_service.py:45:18: error: Argument "metadata" to "Document" has incompatible type "dict[str, object]"; expected "DocumentMetadata"  [arg-type]
    packages\morag-document\tests\test_service.py:88:31: error: "type[ServiceStatus]" has no attribute "STOPPED"  [attr-defined]
    packages\morag-document\tests\test_service.py:100:46: error: "type[ServiceStatus]" has no attribute "STOPPED"  [attr-defined]
    packages\morag-document\tests\test_service.py:183:20: error: Unexpected keyword argument "results" for "BatchEmbeddingResult"  [call-arg]
    packages\morag-document\tests\test_service.py:233:20: error: Unexpected keyword argument "results" for "BatchEmbeddingResult"  [call-arg]
    packages\morag-document\tests\test_service.py:252:22: error: Unexpected keyword argument "text" for "SummaryResult"  [call-arg]
    tests\test_openie_pipeline_integration.py:55:22: error: Unexpected keyword argument "llm_provider" for "GraphProcessingConfig"  [call-arg]
    tests\test_openie_pipeline_integration.py:55:22: error: Unexpected keyword argument "llm_api_key" for "GraphProcessingConfig"  [call-arg]
    tests\test_openie_pipeline_integration.py:87:17: error: "None" has no attribute "process_document"  [attr-defined]
    tests\test_openie_pipeline_integration.py:119:52: error: Right operand of "and" is never evaluated  [unreachable]
    tests\test_openie_pipeline_integration.py:120:21: error: Statement is unreachable  [unreachable]
    tests\test_openie_pipeline_integration.py:175:28: error: Cannot instantiate abstract class "MockStorage" with abstract attributes "clear", "delete_entity", ... and "update_relation" (13 methods suppressed)  [abstract]
    tests\test_openie_pipeline_integration.py:216:17: error: "EnhancedGraphBuilder" has no attribute "_store_entities_and_relations"  [attr-defined]
    tests\test_openie_pipeline_integration.py:227:21: error: Cannot assign to a method  [method-assign]
    tests\test_openie_pipeline_integration.py:231:21: error: Cannot assign to a method  [method-assign]
    packages\morag-services\tests\test_pipeline.py:25:5: error: "MoRAGServices" has no attribute "document_service"  [attr-defined]
    packages\morag-services\tests\test_pipeline.py:26:5: error: "MoRAGServices" has no attribute "audio_service"  [attr-defined]
    packages\morag-services\tests\test_pipeline.py:27:5: error: "MoRAGServices" has no attribute "video_service"  [attr-defined]
    packages\morag-services\tests\test_pipeline.py:28:5: error: "MoRAGServices" has no attribute "image_service"; maybe "get_service"?  [attr-defined]
    packages\morag-services\tests\test_pipeline.py:29:5: error: "MoRAGServices" has no attribute "embedding_service"  [attr-defined]
    packages\morag-services\tests\test_pipeline.py:30:5: error: "MoRAGServices" has no attribute "web_service"; maybe "get_service"?  [attr-defined]
    packages\morag-services\tests\test_pipeline.py:31:5: error: "MoRAGServices" has no attribute "youtube_service"  [attr-defined]
    packages\morag-services\tests\test_pipeline.py:34:5: error: Cannot assign to a method  [method-assign]
    packages\morag-services\tests\test_pipeline.py:35:5: error: Cannot assign to a method  [method-assign]
    packages\morag-services\tests\test_pipeline.py:36:5: error: "MoRAGServices" has no attribute "generate_embeddings"  [attr-defined]
    packages\morag-services\tests\test_pipeline.py:222:24: error: Unexpected keyword argument "content_path" for "ProcessingResult"  [call-arg]
    packages\morag-services\tests\test_pipeline.py:229:24: error: Unexpected keyword argument "content_url" for "ProcessingResult"  [call-arg]
    packages\morag-services\tests\test_pipeline.py:329:23: error: Unexpected keyword argument "content_path" for "ProcessingResult"  [call-arg]
    packages\morag-services\tests\test_pipeline.py:362:24: error: Unexpected keyword argument "content_path" for "ProcessingResult"  [call-arg]
    packages\morag-services\tests\test_pipeline.py:369:24: error: Unexpected keyword argument "content_url" for "ProcessingResult"  [call-arg]

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 1323: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 113
Total warnings: 335

File: packages\morag-core\src\morag_core\agents\cfg_extraction_agent.py
  ERRORS:
    Missing import for 't' used in packages\morag-core\src\morag_core\agents\cfg_extraction_agent.py
    Missing import for 'min_confidence' used in packages\morag-core\src\morag_core\agents\cfg_extraction_agent.py

File: packages\morag\src\morag\services\enhanced_webhook_service.py
  ERRORS:
    Missing import for 'step' used in packages\morag\src\morag\services\enhanced_webhook_service.py
    Missing import for 'data' used in packages\morag\src\morag\services\enhanced_webhook_service.py
    Missing import for 'status' used in packages\morag\src\morag\services\enhanced_webhook_service.py
    Missing import for 'progress_percent' used in packages\morag\src\morag\services\enhanced_webhook_service.py
    Missing import for 'auth_token' used in packages\morag\src\morag\services\enhanced_webhook_service.py
    Missing import for 'webhook_url' used in packages\morag\src\morag\services\enhanced_webhook_service.py
    Missing import for 'task_id' used in packages\morag\src\morag\services\enhanced_webhook_service.py
    Missing import for 'document_id' used in packages\morag\src\morag\services\enhanced_webhook_service.py
    Missing import for 'error_message' used in packages\morag\src\morag\services\enhanced_webhook_service.py

File: cli\webdav-processor.py
  ERRORS:
    Missing import for 'remote_file_path' used in cli\webdav-processor.py

File: packages\morag-document\src\morag_document\converters\chunking_processor.py
  ERRORS:
    Missing import for 'max_size' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
    Missing import for 'document' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
    Missing import for 'start_chunk_index' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
    Missing import for 'max_chunk_size' used in packages\morag-document\src\morag_document\converters\chunking_processor.py
    Missing import for 'options' used in packages\morag-document\src\morag_document\converters\chunking_processor.py

File: agents\config\relation_types.py
  ERRORS:
    Missing import for 'FileNotFoundError' used in agents\config\relation_types.py

File: packages\morag\src\morag\agents\morag_pipeline_agent.py
  ERRORS:
    Missing import for 'source' used in packages\morag\src\morag\agents\morag_pipeline_agent.py
    Missing import for 'data' used in packages\morag\src\morag\agents\morag_pipeline_agent.py
    Missing import for 'options' used in packages\morag\src\morag\agents\morag_pipeline_agent.py
    Missing import for 'identifier' used in packages\morag\src\morag\agents\morag_pipeline_agent.py

File: packages\morag-document\tests\test_processor.py
  ERRORS:
    Missing import for 'tmp_path' used in packages\morag-document\tests\test_processor.py

File: tests\unit\services\test_embedding_service.py
  ERRORS:
    Missing import for 'batch_size' used in tests\unit\services\test_embedding_service.py
    Missing import for 'task_type' used in tests\unit\services\test_embedding_service.py

File: packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py
  ERRORS:
    Missing import for 'OSError' used in packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py
    Missing import for 'RuntimeError' used in packages\morag-stages\src\morag_stages\stages\markdown_conversion_stage.py

File: packages\morag-document\src\morag_document\converters\base.py
  ERRORS:
    Missing import for 'NotImplementedError' used in packages\morag-document\src\morag_document\converters\base.py
    Missing import for 'max_size' used in packages\morag-document\src\morag_document\converters\base.py
    Missing import for 'start_chunk_index' used in packages\morag-document\src\morag_document\converters\base.py
    Missing import for 'max_chunk_size' used in packages\morag-document\src\morag_document\converters\base.py

File: tests\test_debug_session.py
  ERRORS:
    Missing import for 'FileNotFoundError' used in tests\test_debug_session.py
    Missing import for 'SystemExit' used in tests\test_debug_session.py

File: mypy
  ERRORS:
    packages\morag-graph\src\morag_graph\utils\id_generation.py:31:64: error: Incompatible default for argument "checksum" (default has type "None", argument has type "str")  [assignment]
    packages\morag-graph\src\morag_graph\utils\id_generation.py:279:72: error: Incompatible default for argument "existing_ids" (default has type "None", argument has type "list[str]")  [assignment]
    packages\morag-graph\src\morag_graph\utils\id_generation.py:297:9: error: Statement is unreachable  [unreachable]
    agents\config\relation_types.py:23:27: error: Incompatible types in assignment (expression has type "Path", variable has type "str | None")  [assignment]
    agents\config\relation_types.py:25:33: error: Argument 1 to "Path" has incompatible type "str | None"; expected "str | PathLike[str]"  [arg-type]
    agents\config\relation_types.py:42:28: error: Incompatible types in assignment (expression has type "dict[str, Any]", variable has type "None")  [assignment]
    agents\config\relation_types.py:45:28: error: Incompatible types in assignment (expression has type "dict[str, Any]", variable has type "None")  [assignment]
    agents\config\relation_types.py:87:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\relation_types.py:87:16: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:95:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\relation_types.py:95:16: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:108:27: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:123:27: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:124:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\relation_types.py:135:26: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:136:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\relation_types.py:147:22: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:148:9: error: Returning Any from function declared to return "list[str]"  [no-any-return]
    agents\config\relation_types.py:156:22: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:165:9: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
    agents\config\relation_types.py:165:16: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:174:9: error: Returning Any from function declared to return "bool"  [no-any-return]
    agents\config\relation_types.py:182:9: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
    agents\config\relation_types.py:182:16: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:196:22: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:211:24: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:212:9: error: Returning Any from function declared to return "str | None"  [no-any-return]
    agents\config\relation_types.py:223:31: error: "None" has no attribute "get"  [attr-defined]
    agents\config\relation_types.py:228:17: error: Returning Any from function declared to return "str | None"  [no-any-return]
    packages\morag-web\src\morag_web\web_formatter.py:228:35: error: Incompatible types in assignment (expression has type "list[dict[str, str]]", target has type "Sequence[str]")  [assignment]
    packages\morag-web\src\morag_web\web_formatter.py:231:29: error: Incompatible types in assignment (expression has type "list[dict[str, str]]", target has type "Sequence[str]")  [assignment]
    packages\morag-web\src\morag_web\web_formatter.py:338:34: error: Incompatible types in assignment (expression has type "int", target has type "str")  [assignment]
    packages\morag-graph\src\morag_graph\models\fact.py:287:31: error: Argument 1 to "extend" of "list" has incompatible type "list[str | EntityRelationship | dict[str, Any]]"; expected "Iterable[str]"  [arg-type]
    packages\morag-document\src\morag_document\converters\base.py:73:29: error: Argument "source_name" to "DocumentMetadata" has incompatible type "str | int"; expected "str"  [arg-type]
    packages\morag-document\src\morag_document\converters\base.py:75:27: error: Argument "mime_type" to "DocumentMetadata" has incompatible type "str | int"; expected "str | None"  [arg-type]
    packages\morag-document\src\morag_document\converters\base.py:76:27: error: Argument "file_size" to "DocumentMetadata" has incompatible type "str | int"; expected "int | None"  [arg-type]
    packages\morag-document\src\morag_document\converters\base.py:146:5: error: Return type "Coroutine[Any, Any, bool]" of "supports_format" incompatible with return type "bool" in supertype "morag_core.interfaces.converter.BaseConverter"  [override]
    packages\morag-document\src\morag_document\converters\base.py:157:5: error: Return type "Coroutine[Any, Any, bool]" of "validate_input" incompatible with return type "None" in supertype "morag_core.interfaces.converter.BaseConverter"  [override]
    packages\morag-document\src\morag_document\converters\base.py:193:5: error: Signature of "assess_quality" incompatible with supertype "morag_core.interfaces.converter.BaseConverter"  [override]
    packages\morag-document\src\morag_document\converters\base.py:333:13: error: Need type annotation for "current_chunk" (hint: "current_chunk: list[<type>] = ...")  [var-annotated]
    packages\morag-document\src\morag_document\converters\base.py:347:21: error: Need type annotation for "overlap_words" (hint: "overlap_words: list[<type>] = ...")  [var-annotated]
    packages\morag-document\src\morag_document\converters\base.py:373:29: error: Incompatible types in assignment (expression has type "str", variable has type "list[Any]")  [assignment]
    packages\morag-document\src\morag_document\converters\base.py:391:44: error: "list[Any]" has no attribute "strip"  [attr-defined]
    packages\morag-document\src\morag_document\converters\base.py:392:41: error: Incompatible types in assignment (expression has type "str", variable has type "list[Any]")  [assignment]
    packages\morag-document\src\morag_document\converters\base.py:410:40: error: "list[Any]" has no attribute "strip"  [attr-defined]
    packages\morag-document\src\morag_document\converters\base.py:411:37: error: Incompatible types in assignment (expression has type "str", variable has type "list[Any]")  [assignment]
    packages\morag-document\src\morag_document\converters\base.py:418:41: error: Incompatible types in assignment (expression has type "str", variable has type "list[Any]")  [assignment]
    packages\morag-document\src\morag_document\converters\base.py:423:36: error: "list[Any]" has no attribute "strip"  [attr-defined]
    packages\morag-document\src\morag_document\converters\base.py:724:34: error: Item "None" of "str | None" has no attribute "split"  [union-attr]
    packages\morag-document\src\morag_document\converters\base.py:726:9: error: Need type annotation for "current_chunk" (hint: "current_chunk: list[<type>] = ...")  [var-annotated]
    packages\morag-document\src\morag_document\converters\base.py:798:9: error: Need type annotation for "current_chunk" (hint: "current_chunk: list[<type>] = ...")  [var-annotated]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:81:13: error: Need type annotation for "current_chunk" (hint: "current_chunk: list[<type>] = ...")  [var-annotated]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:95:21: error: Need type annotation for "overlap_words" (hint: "overlap_words: list[<type>] = ...")  [var-annotated]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:121:29: error: Incompatible types in assignment (expression has type "str", variable has type "list[Any]")  [assignment]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:139:44: error: "list[Any]" has no attribute "strip"  [attr-defined]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:140:41: error: Incompatible types in assignment (expression has type "str", variable has type "list[Any]")  [assignment]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:158:40: error: "list[Any]" has no attribute "strip"  [attr-defined]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:159:37: error: Incompatible types in assignment (expression has type "str", variable has type "list[Any]")  [assignment]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:166:41: error: Incompatible types in assignment (expression has type "str", variable has type "list[Any]")  [assignment]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:171:36: error: "list[Any]" has no attribute "strip"  [attr-defined]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:404:34: error: Item "None" of "str | None" has no attribute "split"  [union-attr]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:406:9: error: Need type annotation for "current_chunk" (hint: "current_chunk: list[<type>] = ...")  [var-annotated]
    packages\morag-document\src\morag_document\converters\chunking_processor.py:471:9: error: Need type annotation for "current_chunk" (hint: "current_chunk: list[<type>] = ...")  [var-annotated]
    tests\test_debug_session.py:416:50: error: Incompatible types in assignment (expression has type "type[DebugSessionFunctions]", target has type Module)  [assignment]
    tests\unit\test_gemini_service.py:58:26: error: Incompatible types in assignment (expression has type "None", variable has type "bool")  [assignment]
    tests\unit\test_gemini_service.py:170:26: error: Incompatible types in assignment (expression has type "None", variable has type "bool")  [assignment]
    tests\unit\test_gemini_service.py:235:13: error: Statement is unreachable  [unreachable]
    tests\unit\services\test_embedding_service.py:31:19: error: Missing positional argument "service" in call to "ExternalServiceError"  [call-arg]
    tests\unit\services\test_embedding_service.py:38:19: error: Missing positional argument "service" in call to "ExternalServiceError"  [call-arg]
    tests\unit\services\test_embedding_service.py:52:16: error: Unexpected keyword argument "token_count" for "EmbeddingResult"  [call-arg]
    tests\unit\services\test_embedding_service.py:66:20: error: Unexpected keyword argument "total_tokens" for "BatchEmbeddingResult"  [call-arg]
    tests\unit\services\test_embedding_service.py:80:37: error: "EmbeddingResult" has no attribute "token_count"  [attr-defined]
    tests\unit\services\test_embedding_service.py:91:16: error: Unexpected keyword argument "total_tokens" for "BatchEmbeddingResult"  [call-arg]
    tests\unit\services\test_embedding_service.py:91:16: error: Unexpected keyword argument "batch_count" for "BatchEmbeddingResult"  [call-arg]
    tests\unit\services\test_embedding_service.py:146:16: error: "EmbeddingResult" has no attribute "token_count"  [attr-defined]
    tests\unit\services\test_embedding_service.py:182:16: error: "BatchEmbeddingResult" has no attribute "total_tokens"  [attr-defined]
    tests\unit\services\test_embedding_service.py:183:16: error: "BatchEmbeddingResult" has no attribute "batch_count"  [attr-defined]
    tests\unit\services\test_embedding_service.py:191:16: error: "BatchEmbeddingResult" has no attribute "total_tokens"  [attr-defined]
    tests\unit\services\test_embedding_service.py:192:16: error: "BatchEmbeddingResult" has no attribute "batch_count"  [attr-defined]
    tests\unit\services\test_embedding_service.py:298:16: error: "EmbeddingResult" has no attribute "token_count"  [attr-defined]

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 4066: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 161
Total warnings: 338

File: scripts\analyze_graph_relationships.py
  ERRORS:
    Missing import for 'analyze_relationships' used in scripts\analyze_graph_relationships.py
    Missing import for 'main' used in scripts\analyze_graph_relationships.py

File: packages\morag-stages\tests\test_stage_chain.py
  ERRORS:
    Missing import for 'stage_test_framework' used in packages\morag-stages\tests\test_stage_chain.py

File: packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
  ERRORS:
    Missing import for 'doc_id' used in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
    Missing import for 'force_update' used in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
    Missing import for 'documents' used in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py
    Missing import for 'text' used in packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py

File: packages\morag-graph\src\morag_graph\query\intent_analyzer.py
  ERRORS:
    Missing import for 'x' used in packages\morag-graph\src\morag_graph\query\intent_analyzer.py

File: packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py
  ERRORS:
    Missing import for 'max_relations_per_fact' used in packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py

File: packages\morag-reasoning\test_reasoning_simple.py
  ERRORS:
    Missing import for 'test_integration' used in packages\morag-reasoning\test_reasoning_simple.py
    Missing import for 'test_iterative_retrieval' used in packages\morag-reasoning\test_reasoning_simple.py
    Missing import for 'entity_name' used in packages\morag-reasoning\test_reasoning_simple.py
    Missing import for 'main' used in packages\morag-reasoning\test_reasoning_simple.py
    Missing import for 'verbose' used in packages\morag-reasoning\test_reasoning_simple.py
    Missing import for 'relation_type' used in packages\morag-reasoning\test_reasoning_simple.py
    Missing import for 'test_path_selection' used in packages\morag-reasoning\test_reasoning_simple.py
    Missing import for 'KeyboardInterrupt' used in packages\morag-reasoning\test_reasoning_simple.py
    Missing import for 'exit' used in packages\morag-reasoning\test_reasoning_simple.py
    packages\morag-reasoning\test_reasoning_simple.py:194: Dangerous use of eval/exec
    packages\morag-reasoning\test_reasoning_simple.py:438: Dangerous use of eval/exec

File: packages\morag-reasoning\tests\test_integration.py
  ERRORS:
    Missing import for 'mock_generate' used in packages\morag-reasoning\tests\test_integration.py
    Missing import for 'prompt' used in packages\morag-reasoning\tests\test_integration.py

File: packages\morag-graph\src\morag_graph\retrieval\coordinator.py
  ERRORS:
    Missing import for 'query' used in packages\morag-graph\src\morag_graph\retrieval\coordinator.py
    packages\morag-graph\src\morag_graph\retrieval\coordinator.py:72: Dangerous use of eval/exec
    packages\morag-graph\src\morag_graph\retrieval\coordinator.py:73: Dangerous use of eval/exec
    packages\morag-graph\src\morag_graph\retrieval\coordinator.py:106: Dangerous use of eval/exec
    packages\morag-graph\src\morag_graph\retrieval\coordinator.py:112: Dangerous use of eval/exec
    packages\morag-graph\src\morag_graph\retrieval\coordinator.py:144: Dangerous use of eval/exec

File: tests\unit\test_youtube_tasks.py
  ERRORS:
    Missing import for 'tmp_path' used in tests\unit\test_youtube_tasks.py
    Missing import for 'simulate_youtube_video_task' used in tests\unit\test_youtube_tasks.py
    Missing import for 'mock_gemini_service' used in tests\unit\test_youtube_tasks.py
    Missing import for 'mock_youtube_metadata' used in tests\unit\test_youtube_tasks.py
    Missing import for 'mock_qdrant_service' used in tests\unit\test_youtube_tasks.py

File: packages\morag-youtube\src\morag_youtube\transcript.py
  ERRORS:
    Missing import for 'preferred_language' used in packages\morag-youtube\src\morag_youtube\transcript.py
    Missing import for 'format_type' used in packages\morag-youtube\src\morag_youtube\transcript.py

File: packages\morag-services\tests\test_services.py
  ERRORS:
    Missing import for 'mock_convert_to_markdown' used in packages\morag-services\tests\test_services.py
    Missing import for 'kwargs' used in packages\morag-services\tests\test_services.py
    Missing import for 'mock_process_file' used in packages\morag-services\tests\test_services.py

File: packages\morag-graph\src\morag_graph\extraction\entity_extractor.py
  ERRORS:
    Missing import for 'auto_infer_domain' used in packages\morag-graph\src\morag_graph\extraction\entity_extractor.py
    Missing import for 'additional_context' used in packages\morag-graph\src\morag_graph\extraction\entity_extractor.py
    Missing import for 'main_extraction' used in packages\morag-graph\src\morag_graph\extraction\entity_extractor.py
    Missing import for 'kwargs' used in packages\morag-graph\src\morag_graph\extraction\entity_extractor.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py
  ERRORS:
    Missing import for 'chunk_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py
    Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py
    Missing import for 'documents' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py
    Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py

File: packages\morag\src\morag\api_models\endpoints\files.py
  ERRORS:
    Missing import for 'older_than_days' used in packages\morag\src\morag\api_models\endpoints\files.py
    Missing import for 'x' used in packages\morag\src\morag\api_models\endpoints\files.py
    Missing import for 'dry_run' used in packages\morag\src\morag\api_models\endpoints\files.py
    Missing import for 'inline' used in packages\morag\src\morag\api_models\endpoints\files.py
    Missing import for 'output_dir' used in packages\morag\src\morag\api_models\endpoints\files.py
    Missing import for 'UnicodeDecodeError' used in packages\morag\src\morag\api_models\endpoints\files.py
    Missing import for 'recursive' used in packages\morag\src\morag\api_models\endpoints\files.py

File: tests\manual\test_universal_conversion.py
  ERRORS:
    Missing import for 'test_conversion' used in tests\manual\test_universal_conversion.py
    Missing import for 'main' used in tests\manual\test_universal_conversion.py
    Missing import for 'KeyboardInterrupt' used in tests\manual\test_universal_conversion.py

File: tests\manual\test_audio_transcription_fixes.py
  ERRORS:
    Missing import for 'test_mock_audio_processing' used in tests\manual\test_audio_transcription_fixes.py
    Missing import for 'test_audio_transcription_fixes' used in tests\manual\test_audio_transcription_fixes.py
    Missing import for 'audio_path' used in tests\manual\test_audio_transcription_fixes.py
    Missing import for 'test_video_transcription_fixes' used in tests\manual\test_audio_transcription_fixes.py
    Missing import for 'test_real_audio_processing' used in tests\manual\test_audio_transcription_fixes.py

File: packages\morag-graph\src\morag_graph\storage\json_storage.py
  ERRORS:
    Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'x' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'direction' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'max_depth' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'file_path' used in packages\morag-graph\src\morag_graph\storage\json_storage.py
    Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\storage\json_storage.py

File: mypy
  ERRORS:
    tests\manual\test_universal_conversion.py:33:1: error: Module "morag_core.models" has no attribute "get_conversion_config"  [attr-defined]
    packages\morag-youtube\src\morag_youtube\transcript.py:104:13: error: Returning Any from function declared to return "list[dict[str, Any]]"  [no-any-return]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:138:24: error: "Fact" has no attribute "subject"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:139:23: error: "Fact" has no attribute "object"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:140:25: error: "Fact" has no attribute "approach"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:141:25: error: "Fact" has no attribute "solution"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:142:27: error: "Fact" has no attribute "confidence"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:143:24: error: "Fact" has no attribute "context"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:245:17: error: Statement is unreachable  [unreachable]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:342:23: error: "type[FactRelationType]" has no attribute "CAUSAL"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:343:24: error: "type[FactRelationType]" has no attribute "CAUSAL"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:344:25: error: "type[FactRelationType]" has no attribute "DEPENDENCY"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:345:27: error: "type[FactRelationType]" has no attribute "SIMILARITY"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:346:28: error: "type[FactRelationType]" has no attribute "CONTRADICTION"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:347:32: error: "type[FactRelationType]" has no attribute "TEMPORAL"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\fact_graph_operations.py:348:24: error: "type[FactRelationType]" has no attribute "HIERARCHICAL"  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\json_storage.py:8:1: error: Library stubs not installed for "aiofiles"  [import-untyped]
    packages\morag-graph\src\morag_graph\storage\json_storage.py:316:32: error: "str" has no attribute "value"  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\json_storage.py:512:34: error: "str" has no attribute "value"  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\json_storage.py:594:42: error: "str" has no attribute "value"  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\json_storage.py:753:9: error: Need type annotation for "entity_types" (hint: "entity_types: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\storage\json_storage.py:755:27: error: "str" has no attribute "value"  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\json_storage.py:759:9: error: Need type annotation for "relation_types" (hint: "relation_types: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\storage\json_storage.py:761:29: error: "str" has no attribute "value"  [attr-defined]
    packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py:65:9: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-graph\src\morag_graph\storage\neo4j_operations\document_operations.py:103:9: error: Returning Any from function declared to return "str"  [no-any-return]
    tests\unit\test_youtube_tasks.py:29:23: error: Unexpected keyword argument "download_time" for "YouTubeDownloadResult"  [call-arg]
    tests\unit\test_youtube_tasks.py:53:27: error: Item "None" of "YouTubeMetadata | None" has no attribute "id"  [union-attr]
    tests\unit\test_youtube_tasks.py:54:30: error: Item "None" of "YouTubeMetadata | None" has no attribute "title"  [union-attr]
    tests\unit\test_youtube_tasks.py:55:36: error: Item "None" of "YouTubeMetadata | None" has no attribute "description"  [union-attr]
    tests\unit\test_youtube_tasks.py:56:33: error: Item "None" of "YouTubeMetadata | None" has no attribute "uploader"  [union-attr]
    tests\unit\test_youtube_tasks.py:57:36: error: Item "None" of "YouTubeMetadata | None" has no attribute "upload_date"  [union-attr]
    tests\unit\test_youtube_tasks.py:58:33: error: Item "None" of "YouTubeMetadata | None" has no attribute "duration"  [union-attr]
    tests\unit\test_youtube_tasks.py:59:35: error: Item "None" of "YouTubeMetadata | None" has no attribute "view_count"  [union-attr]
    tests\unit\test_youtube_tasks.py:60:35: error: Item "None" of "YouTubeMetadata | None" has no attribute "like_count"  [union-attr]
    tests\unit\test_youtube_tasks.py:61:38: error: Item "None" of "YouTubeMetadata | None" has no attribute "comment_count"  [union-attr]
    tests\unit\test_youtube_tasks.py:62:29: error: Item "None" of "YouTubeMetadata | None" has no attribute "tags"  [union-attr]
    tests\unit\test_youtube_tasks.py:63:35: error: Item "None" of "YouTubeMetadata | None" has no attribute "categories"  [union-attr]
    tests\unit\test_youtube_tasks.py:64:35: error: Item "None" of "YouTubeMetadata | None" has no attribute "channel_id"  [union-attr]
    tests\unit\test_youtube_tasks.py:65:36: error: Item "None" of "YouTubeMetadata | None" has no attribute "playlist_id"  [union-attr]
    tests\unit\test_youtube_tasks.py:66:39: error: Item "None" of "YouTubeMetadata | None" has no attribute "playlist_title"  [union-attr]
    tests\unit\test_youtube_tasks.py:67:39: error: Item "None" of "YouTubeMetadata | None" has no attribute "playlist_index"  [union-attr]
    tests\unit\test_youtube_tasks.py:79:34: error: "YouTubeDownloadResult" has no attribute "download_time"  [attr-defined]
    tests\unit\test_youtube_tasks.py:87:42: error: Item "None" of "YouTubeMetadata | None" has no attribute "title"  [union-attr]
    tests\unit\test_youtube_tasks.py:88:20: error: Item "None" of "YouTubeMetadata | None" has no attribute "description"  [union-attr]
    tests\unit\test_youtube_tasks.py:90:40: error: Item "None" of "YouTubeMetadata | None" has no attribute "description"  [union-attr]
    tests\unit\test_youtube_tasks.py:92:20: error: Item "None" of "YouTubeMetadata | None" has no attribute "tags"  [union-attr]
    tests\unit\test_youtube_tasks.py:93:57: error: Item "None" of "YouTubeMetadata | None" has no attribute "tags"  [union-attr]
    tests\unit\test_youtube_tasks.py:104:37: error: Item "None" of "YouTubeMetadata | None" has no attribute "id"  [union-attr]
    tests\unit\test_youtube_tasks.py:106:34: error: Item "None" of "YouTubeMetadata | None" has no attribute "title"  [union-attr]
    tests\unit\test_youtube_tasks.py:107:37: error: Item "None" of "YouTubeMetadata | None" has no attribute "uploader"  [union-attr]
    tests\unit\test_youtube_tasks.py:134:23: error: Unexpected keyword argument "download_time" for "YouTubeDownloadResult"  [call-arg]
    tests\unit\test_youtube_tasks.py:147:32: error: Item "None" of "YouTubeMetadata | None" has no attribute "id"  [union-attr]
    tests\unit\test_youtube_tasks.py:155:16: error: Value of type "object" is not indexable  [index]
    tests\unit\test_youtube_tasks.py:182:13: error: Unexpected keyword argument "download_time" for "YouTubeDownloadResult"  [call-arg]
    tests\unit\test_youtube_tasks.py:217:20: error: Argument 1 to "len" has incompatible type "object"; expected "Sized"  [arg-type]
    tests\unit\test_youtube_tasks.py:254:16: error: Value of type "object" is not indexable  [index]
    tests\unit\test_youtube_tasks.py:255:16: error: Value of type "object" is not indexable  [index]
    tests\unit\test_youtube_tasks.py:256:16: error: Value of type "object" is not indexable  [index]
    tests\unit\test_youtube_tasks.py:257:16: error: Value of type "object" is not indexable  [index]
    tests\unit\test_youtube_tasks.py:283:16: error: Value of type "object" is not indexable  [index]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:8:1: error: Module "morag_graph.extraction" has no attribute "EntityExtractor"  [attr-defined]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:8:1: error: Module "morag_graph.extraction" has no attribute "RelationExtractor"  [attr-defined]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:17:5: error: Module "morag_graph.extraction" has no attribute "SpacyEntityExtractor"  [attr-defined]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:125:9: error: Unexpected keyword argument "langextract_enabled" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:125:9: error: Unexpected keyword argument "spacy_enabled" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:125:9: error: Unexpected keyword argument "domain" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:125:9: error: Unexpected keyword argument "min_confidence" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:161:28: error: Unexpected keyword argument "success" for "EnhancedGraphBuildResult"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:161:28: error: Unexpected keyword argument "doc_id" for "EnhancedGraphBuildResult"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:171:36: error: "DocumentCleanupManager" has no attribute "cleanup_document"; maybe "cleanup_document_data"?  [attr-defined]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:209:35: error: Incompatible types in assignment (expression has type "list[str]", variable has type "int")  [assignment]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:212:36: error: Incompatible types in assignment (expression has type "list[str]", variable has type "int")  [assignment]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:215:19: error: "DocumentChecksumManager" has no attribute "update_checksum"  [attr-defined]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:220:22: error: Unexpected keyword argument "success" for "EnhancedGraphBuildResult"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:220:22: error: Unexpected keyword argument "doc_id" for "EnhancedGraphBuildResult"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:252:13: error: Unexpected keyword argument "doc_id" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:252:13: error: Unexpected keyword argument "entities_created" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:252:13: error: Unexpected keyword argument "relations_created" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:252:13: error: Unexpected keyword argument "langextract_entities" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:252:13: error: Unexpected keyword argument "langextract_relations" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:252:13: error: Unexpected keyword argument "spacy_entities" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:252:13: error: Unexpected keyword argument "processing_time" for "info" of "Logger"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:267:20: error: Unexpected keyword argument "success" for "EnhancedGraphBuildResult"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:267:20: error: Unexpected keyword argument "doc_id" for "EnhancedGraphBuildResult"  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:267:20: error: Unexpected keyword argument "error" for "EnhancedGraphBuildResult"; did you mean "errors"?  [call-arg]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:299:9: error: Need type annotation for "langextract_metadata" (hint: "langextract_metadata: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:310:20: error: "EnhancedGraphBuildResult" has no attribute "success"  [attr-defined]
    packages\morag-graph\src\morag_graph\builders\enhanced_graph_builder.py:338:16: error: Unexpected keyword argument "success" for "EnhancedGraphBuildResult"  [call-arg]

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 2775: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 62
Total warnings: 422

File: packages\morag-audio\examples\process_audio.py
  ERRORS:
    Missing import for 'output_dir' used in packages\morag-audio\examples\process_audio.py
    Missing import for 'process_audio_file' used in packages\morag-audio\examples\process_audio.py
    Missing import for 'file_path' used in packages\morag-audio\examples\process_audio.py
    Missing import for 'enable_diarization' used in packages\morag-audio\examples\process_audio.py

File: examples\video_audio_integration_demo.py
  ERRORS:
    Missing import for 'demo_configuration_options' used in examples\video_audio_integration_demo.py
    Missing import for 'demo_task_integration' used in examples\video_audio_integration_demo.py
    Missing import for 'demo_video_converter_enhanced_markdown' used in examples\video_audio_integration_demo.py
    Missing import for 'main' used in examples\video_audio_integration_demo.py
    Missing import for 'demo_video_processor_integration' used in examples\video_audio_integration_demo.py

File: examples\enhanced_audio_processing_demo.py
  ERRORS:
    Missing import for 'demo_markdown_conversion' used in examples\enhanced_audio_processing_demo.py
    Missing import for 'demo_speaker_diarization' used in examples\enhanced_audio_processing_demo.py
    Missing import for 'demo_enhanced_processing' used in examples\enhanced_audio_processing_demo.py
    Missing import for 'demo_topic_segmentation' used in examples\enhanced_audio_processing_demo.py
    Missing import for 'main' used in examples\enhanced_audio_processing_demo.py
    Missing import for 'demo_basic_audio_processing' used in examples\enhanced_audio_processing_demo.py
    Missing import for 'text' used in examples\enhanced_audio_processing_demo.py

File: packages\morag-web\src\morag_web\tasks.py
  ERRORS:
    Missing import for 'process_web_url' used in packages\morag-web\src\morag_web\tasks.py
    Missing import for 'task_id' used in packages\morag-web\src\morag_web\tasks.py
    Missing import for 'process_web_urls_batch' used in packages\morag-web\src\morag_web\tasks.py

File: packages\morag-image\examples\simple_image_processing.py
  ERRORS:
    Missing import for 'process_multiple_images' used in packages\morag-image\examples\simple_image_processing.py

File: packages\morag-image\src\morag_image\processor.py
  ERRORS:
    Missing import for 'image_path' used in packages\morag-image\src\morag_image\processor.py
    Missing import for 'process_with_semaphore' used in packages\morag-image\src\morag_image\processor.py
    Missing import for 'config' used in packages\morag-image\src\morag_image\processor.py
    Missing import for 'max_concurrency' used in packages\morag-image\src\morag_image\processor.py
    Missing import for 'file_paths' used in packages\morag-image\src\morag_image\processor.py

File: tools\remote-converter\remote_converter.py
  ERRORS:
    Missing import for 'options' used in tools\remote-converter\remote_converter.py
    Missing import for 'source_file_url' used in tools\remote-converter\remote_converter.py
    Missing import for 'KeyboardInterrupt' used in tools\remote-converter\remote_converter.py

File: tests\test_enhanced_entity_normalization.py
  ERRORS:
    Missing import for 'normalize_side_effect' used in tests\test_enhanced_entity_normalization.py
    Missing import for 'entity_name' used in tests\test_enhanced_entity_normalization.py

File: packages\morag-graph\src\morag_graph\extraction\fact_validator.py
  ERRORS:
    Missing import for 'x' used in packages\morag-graph\src\morag_graph\extraction\fact_validator.py

File: packages\morag-stages\src\morag_stages\webhook.py
  ERRORS:
    Missing import for 'webhook_url' used in packages\morag-stages\src\morag_stages\webhook.py

File: scripts\maintenance_runner.py
  ERRORS:
    Missing import for 'run_isolated_nodes_cleanup_job' used in scripts\maintenance_runner.py
    Missing import for 'v' used in scripts\maintenance_runner.py
    Missing import for 'run_keyword_deduplication_job' used in scripts\maintenance_runner.py
    Missing import for 'run_relationship_cleanup_job' used in scripts\maintenance_runner.py
    Missing import for 'run_keyword_hierarchization_job' used in scripts\maintenance_runner.py
    Missing import for 'run_keyword_linking_job' used in scripts\maintenance_runner.py
    Missing import for 'run_relationship_merger_job' used in scripts\maintenance_runner.py
    Missing import for 'main_async' used in scripts\maintenance_runner.py

File: packages\morag-graph\src\morag_graph\maintenance\base.py
  ERRORS:
    Missing import for 'kwargs' used in packages\morag-graph\src\morag_graph\maintenance\base.py
    Missing import for 'critical_failure_threshold' used in packages\morag-graph\src\morag_graph\maintenance\base.py
    Missing import for 'llm_func' used in packages\morag-graph\src\morag_graph\maintenance\base.py
    Missing import for 'func' used in packages\morag-graph\src\morag_graph\maintenance\base.py
    Missing import for 'operation' used in packages\morag-graph\src\morag_graph\maintenance\base.py
    Missing import for 'batch_items' used in packages\morag-graph\src\morag_graph\maintenance\base.py
    Missing import for 'args' used in packages\morag-graph\src\morag_graph\maintenance\base.py

File: packages\morag-graph\src\morag_graph\utils\id_migration.py
  ERRORS:
    Missing import for 'old_id' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
    Missing import for 'relation_type' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
    Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
    Missing import for 'batch_size' used in packages\morag-graph\src\morag_graph\utils\id_migration.py
    Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\utils\id_migration.py

File: tests\test_speaker_diarization_and_rate_limiting_fixes.py
  ERRORS:
    Missing import for 'main' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
    Missing import for 'test_batch_processing_delays' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
    Missing import for 'test_speaker_diarization_fix' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
    Missing import for 'mock_generate_embedding' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
    Missing import for 'text' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
    Missing import for 'test_rate_limiting_fix' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py
    Missing import for 'mock_diarize_audio' used in tests\test_speaker_diarization_and_rate_limiting_fixes.py

File: packages\morag-graph\tests\test_integration.py
  ERRORS:
    Missing import for 'x' used in packages\morag-graph\tests\test_integration.py
    Missing import for 'run_tests' used in packages\morag-graph\tests\test_integration.py
    Missing import for 'integration_suite' used in packages\morag-graph\tests\test_integration.py

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 203: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 83
Total warnings: 400

File: packages\morag-graph\src\morag_graph\traversal\path_selector.py
  ERRORS:
    Missing import for 'x' used in packages\morag-graph\src\morag_graph\traversal\path_selector.py
    Missing import for 'available_paths' used in packages\morag-graph\src\morag_graph\traversal\path_selector.py
    Missing import for 'strategy' used in packages\morag-graph\src\morag_graph\traversal\path_selector.py

File: tests\cli\validate-standalone-cli.py
  ERRORS:
    Missing import for 'KeyboardInterrupt' used in tests\cli\validate-standalone-cli.py

File: packages\morag-video\src\morag_video\processor.py
  ERRORS:
    Missing import for 'ZeroDivisionError' used in packages\morag-video\src\morag_video\processor.py
    Missing import for 'image_paths' used in packages\morag-video\src\morag_video\processor.py
    Missing import for 'max_frames' used in packages\morag-video\src\morag_video\processor.py
    Missing import for 'size' used in packages\morag-video\src\morag_video\processor.py
    Missing import for 'progress_callback' used in packages\morag-video\src\morag_video\processor.py
    Missing import for 'threshold' used in packages\morag-video\src\morag_video\processor.py
    Missing import for 'count' used in packages\morag-video\src\morag_video\processor.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_operations\connection_operations.py
  ERRORS:
    Missing import for 'database_name' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\connection_operations.py

File: scripts\build_check.py
  ERRORS:
    Missing import for 'FileNotFoundError' used in scripts\build_check.py

File: tests\test_search_retrieval_functionality.py
  ERRORS:
    Missing import for 'x' used in tests\test_search_retrieval_functionality.py

File: tests\test_improvements_integration.py
  ERRORS:
    Missing import for 'test_contextual_retrieval' used in tests\test_improvements_integration.py
    Missing import for 'test_pdf_processing' used in tests\test_improvements_integration.py
    Missing import for 'main' used in tests\test_improvements_integration.py
    Missing import for 'test_chunking_with_word_boundaries' used in tests\test_improvements_integration.py
    tests\test_improvements_integration.py:141: Dangerous use of eval/exec

File: packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
  ERRORS:
    Missing import for 'run_keyword_deduplication' used in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py
    Missing import for 'config_overrides' used in packages\morag-graph\src\morag_graph\maintenance\keyword_deduplication.py

File: packages\morag-audio\src\morag_audio\processor.py
  ERRORS:
    Missing import for 'progress_callback' used in packages\morag-audio\src\morag_audio\processor.py

File: packages\morag-reasoning\src\morag_reasoning\iterative_retrieval.py
  ERRORS:
    Missing import for 'g' used in packages\morag-reasoning\src\morag_reasoning\iterative_retrieval.py
    Missing import for 'initial_context' used in packages\morag-reasoning\src\morag_reasoning\iterative_retrieval.py

File: tests\utils\mocks.py
  ERRORS:
    Missing import for 'texts' used in tests\utils\mocks.py
    Missing import for 'vector' used in tests\utils\mocks.py
    Missing import for 'limit' used in tests\utils\mocks.py
    Missing import for 'status' used in tests\utils\mocks.py
    Missing import for 'ConnectionError' used in tests\utils\mocks.py
    Missing import for 'vector_id' used in tests\utils\mocks.py
    Missing import for 'task_type' used in tests\utils\mocks.py
    Missing import for 'result' used in tests\utils\mocks.py
    Missing import for 'data' used in tests\utils\mocks.py
    Missing import for 'FileNotFoundError' used in tests\utils\mocks.py
    Missing import for 'payload' used in tests\utils\mocks.py

File: packages\morag-audio\src\morag_audio\services\topic_segmentation.py
  ERRORS:
    Missing import for 'OSError' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
    Missing import for 'transcript' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
    Missing import for 'LookupError' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
    Missing import for 'transcript_segments' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py
    Missing import for 'max_keywords' used in packages\morag-audio\src\morag_audio\services\topic_segmentation.py

File: packages\morag-services\src\morag_services\pipeline.py
  ERRORS:
    Missing import for 'data' used in packages\morag-services\src\morag_services\pipeline.py

File: packages\morag\src\morag\endpoints\enhanced_query.py
  ERRORS:
    Missing import for 'background_tasks' used in packages\morag\src\morag\endpoints\enhanced_query.py
    Missing import for 'log_query_analytics' used in packages\morag\src\morag\endpoints\enhanced_query.py
    Missing import for 'generate_stream' used in packages\morag\src\morag\endpoints\enhanced_query.py
    Missing import for '_handle_fact_based_query' used in packages\morag\src\morag\endpoints\enhanced_query.py
    Missing import for 'request' used in packages\morag\src\morag\endpoints\enhanced_query.py

File: examples\transcription_fixes_demo_alt.py
  ERRORS:
    Missing import for 'main' used in examples\transcription_fixes_demo_alt.py
    Missing import for 'demo_audio_transcription_fixes' used in examples\transcription_fixes_demo_alt.py
    Missing import for 'demo_video_transcription_fixes' used in examples\transcription_fixes_demo_alt.py

File: tests\test_dual_format.py
  ERRORS:
    Missing import for 'main' used in tests\test_dual_format.py
    Missing import for 'test_server_normalization' used in tests\test_dual_format.py
    Missing import for 'test_video_dual_format' used in tests\test_dual_format.py
    Missing import for 'test_document_dual_format' used in tests\test_dual_format.py
    Missing import for 'test_services_dual_processing' used in tests\test_dual_format.py
    Missing import for 'test_audio_dual_format' used in tests\test_dual_format.py

File: mypy
  ERRORS:
    scripts\build_check.py:15:45: error: Incompatible default for argument "cwd" (default has type "None", argument has type "Path")  [assignment]
    scripts\build_check.py:41:5: error: "Path" object is not iterable  [misc]
    scripts\build_check.py:43:28: error: Cannot determine type of "root"  [has-type]
    scripts\build_check.py:45:33: error: Cannot determine type of "root"  [has-type]
    tests\utils\mocks.py:144:55: error: Incompatible default for argument "supported_formats" (default has type "None", argument has type "list[str]")  [assignment]
    tests\utils\mocks.py:148:9: error: Need type annotation for "_processed_files" (hint: "_processed_files: list[<type>] = ...")  [var-annotated]
    tests\utils\mocks.py:225:75: error: Incompatible default for argument "error" (default has type "None", argument has type "str")  [assignment]
    tests\utils\mocks.py:236:32: error: Incompatible default for argument "task_type" (default has type "None", argument has type "str")  [assignment]
    tests\utils\mocks.py:236:52: error: Incompatible default for argument "status" (default has type "None", argument has type "str")  [assignment]
    tests\utils\mocks.py:303:13: error: Returning Any from function declared to return "str"  [no-any-return]
    tests\utils\mocks.py:304:9: error: Returning Any from function declared to return "str"  [no-any-return]
    tests\utils\mocks.py:338:9: error: Returning Any from function declared to return "int"  [no-any-return]
    tests\utils\mocks.py:433:37: error: Incompatible default for argument "level" (default has type "None", argument has type "str")  [assignment]
    tests\utils\mocks.py:443:50: error: Incompatible default for argument "level" (default has type "None", argument has type "str")  [assignment]
    packages\morag-graph\src\morag_graph\extraction\fact_filter_config.py:154:35: error: Incompatible default for argument "required_keywords" (default has type "None", argument has type "list[Any]")  [assignment]
    packages\morag-graph\src\morag_graph\extraction\fact_filter_config.py:155:35: error: Incompatible default for argument "excluded_keywords" (default has type "None", argument has type "list[Any]")  [assignment]
    packages\morag-graph\src\morag_graph\extraction\fact_filter_config.py:158:48: error: Incompatible default for argument "domain_multipliers" (default has type "None", argument has type "dict[str, float]")  [assignment]
    packages\morag-graph\src\morag_graph\storage\neo4j_operations\connection_operations.py:23:46: error: Incompatible types in assignment (expression has type "AsyncDriver | None", base class "BaseOperations" defined the type as "AsyncDriver")  [assignment]
    packages\morag-graph\src\morag_graph\storage\neo4j_operations\connection_operations.py:73:24: error: Item "None" of "AsyncDriver | None" has no attribute "session"  [union-attr]
    packages\morag-graph\src\morag_graph\storage\neo4j_operations\connection_operations.py:96:28: error: Item "None" of "AsyncDriver | None" has no attribute "session"  [union-attr]
    packages\morag-graph\src\morag_graph\storage\neo4j_operations\connection_operations.py:124:24: error: Item "None" of "AsyncDriver | None" has no attribute "session"  [union-attr]
    packages\morag-audio\src\morag_audio\services\topic_segmentation.py:156:43: error: Argument 1 to "get_safe_device" has incompatible type "str"; expected "bool"  [arg-type]
    packages\morag-audio\src\morag_audio\services\topic_segmentation.py:242:17: error: Statement is unreachable  [unreachable]
    packages\morag-audio\src\morag_audio\services\topic_segmentation.py:373:17: error: "None" has no attribute "encode"  [attr-defined]
    packages\morag-audio\src\morag_audio\services\topic_segmentation.py:375:13: error: Returning Any from function declared to return "ndarray[tuple[Any, ...], dtype[Any]]"  [no-any-return]
    packages\morag-audio\src\morag_audio\services\topic_segmentation.py:556:45: error: Incompatible types in assignment (expression has type "int", variable has type "str")  [assignment]
    packages\morag-audio\src\morag_audio\services\topic_segmentation.py:558:49: error: Unsupported operand types for + ("str" and "int")  [operator]
    packages\morag-audio\src\morag_audio\services\topic_segmentation.py:561:52: error: No overload variant of "__getitem__" of "list" matches argument type "str"  [call-overload]

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 167
Total warnings: 306

File: tests\manual\test_video_conversion_fixes.py
  ERRORS:
    Missing import for 'main' used in tests\manual\test_video_conversion_fixes.py
    Missing import for 'KeyboardInterrupt' used in tests\manual\test_video_conversion_fixes.py
    Missing import for 'test_video_conversion_fixes' used in tests\manual\test_video_conversion_fixes.py

File: packages\morag-web\src\morag_web\service.py
  ERRORS:
    Missing import for 'concurrency_limit' used in packages\morag-web\src\morag_web\service.py
    Missing import for 'config_options' used in packages\morag-web\src\morag_web\service.py
    Missing import for 'process_with_semaphore' used in packages\morag-web\src\morag_web\service.py
    Missing import for 'urls' used in packages\morag-web\src\morag_web\service.py

File: packages\morag-youtube\tests\test_transcript.py
  ERRORS:
    Missing import for 'mock_list' used in packages\morag-youtube\tests\test_transcript.py

File: tests\integration\test_base_components_integration.py
  ERRORS:
    Missing import for 'integrated_services' used in tests\integration\test_base_components_integration.py
    Missing import for 'ConnectionError' used in tests\integration\test_base_components_integration.py
    Missing import for 'process_and_embed' used in tests\integration\test_base_components_integration.py

File: tests\manual\test_audio_format_fix.py
  ERRORS:
    Missing import for 'test_basic_format' used in tests\manual\test_audio_format_fix.py
    Missing import for 'main' used in tests\manual\test_audio_format_fix.py
    Missing import for 'test_enhanced_format' used in tests\manual\test_audio_format_fix.py

File: tests\conftest.py
  ERRORS:
    Missing import for 'metadata' used in tests\conftest.py
    Missing import for 'status' used in tests\conftest.py
    Missing import for 'max_length' used in tests\conftest.py
    Missing import for 'source_data' used in tests\conftest.py
    Missing import for 'texts' used in tests\conftest.py
    Missing import for 'task_type' used in tests\conftest.py

File: agents\examples\basic_usage.py
  ERRORS:
    Missing import for 'fact_extraction_example' used in agents\examples\basic_usage.py
    Missing import for 'entity_extraction_example' used in agents\examples\basic_usage.py
    Missing import for 'query_analysis_example' used in agents\examples\basic_usage.py
    Missing import for 'main' used in agents\examples\basic_usage.py
    Missing import for 'batch_processing_example' used in agents\examples\basic_usage.py
    Missing import for 'custom_configuration_example' used in agents\examples\basic_usage.py
    Missing import for 'exit' used in agents\examples\basic_usage.py
    Missing import for 'multi_agent_workflow_example' used in agents\examples\basic_usage.py

File: packages\morag-reasoning\src\morag_reasoning\llm.py
  ERRORS:
    Missing import for 'process_this_batch' used in packages\morag-reasoning\src\morag_reasoning\llm.py
    Missing import for 'kwargs' used in packages\morag-reasoning\src\morag_reasoning\llm.py
    Missing import for 'generate_with_retry' used in packages\morag-reasoning\src\morag_reasoning\llm.py
    Missing import for 'message_lists' used in packages\morag-reasoning\src\morag_reasoning\llm.py
    Missing import for 'process_individual' used in packages\morag-reasoning\src\morag_reasoning\llm.py

File: packages\morag-reasoning\tests\test_llm_client.py
  ERRORS:
    Missing import for 'mock_llm_client' used in packages\morag-reasoning\tests\test_llm_client.py

File: mypy
  ERRORS:
    agents\config\defaults.py:19:26: error: Argument "provider" to "ModelConfig" has incompatible type "str"; expected "ModelProvider"  [arg-type]
    agents\config\defaults.py:49:26: error: Argument "provider" to "ModelConfig" has incompatible type "str"; expected "ModelProvider"  [arg-type]
    agents\config\defaults.py:76:26: error: Argument "provider" to "ModelConfig" has incompatible type "str"; expected "ModelProvider"  [arg-type]
    agents\config\defaults.py:103:26: error: Argument "provider" to "ModelConfig" has incompatible type "str"; expected "ModelProvider"  [arg-type]
    agents\config\defaults.py:129:26: error: Argument "provider" to "ModelConfig" has incompatible type "str"; expected "ModelProvider"  [arg-type]
    packages\morag-core\src\morag_core\utils\logging.py:74:5: error: Returning Any from function declared to return "BoundLogger"  [no-any-return]
    packages\morag-core\src\morag_core\utils\logging.py:91:12: error: Incompatible return value type (got "BoundLoggerBase", expected "BoundLogger")  [return-value]
    tests\test_production_ingestion_validation.py:290:17: error: Unsupported operand types for + ("object" and "int")  [operator]
    tests\test_production_ingestion_validation.py:301:17: error: Unsupported operand types for + ("object" and "int")  [operator]
    tests\test_production_ingestion_validation.py:302:17: error: Unsupported operand types for + ("object" and "int")  [operator]
    tests\test_production_ingestion_validation.py:307:13: error: Unsupported target for indexed assignment ("object")  [index]
    tests\test_production_ingestion_validation.py:307:46: error: "object" has no attribute "get"  [attr-defined]
    tests\test_production_ingestion_validation.py:311:17: error: Value of type "object" is not indexable  [index]
    tests\test_production_ingestion_validation.py:311:17: error: Unsupported target for indexed assignment ("object")  [index]
    tests\test_production_ingestion_validation.py:313:17: error: Value of type "object" is not indexable  [index]
    tests\test_production_ingestion_validation.py:313:17: error: Unsupported target for indexed assignment ("object")  [index]
    tests\test_production_ingestion_validation.py:315:17: error: Value of type "object" is not indexable  [index]
    tests\test_production_ingestion_validation.py:315:17: error: Unsupported target for indexed assignment ("object")  [index]
    tests\test_production_ingestion_validation.py:321:9: error: Need type annotation for "issues" (hint: "issues: list[<type>] = ...")  [var-annotated]
    tests\test_production_ingestion_validation.py:337:13: error: Unsupported target for indexed assignment ("object")  [index]
    tests\test_production_ingestion_validation.py:338:17: error: "object" has no attribute "get"  [attr-defined]
    tests\test_production_ingestion_validation.py:350:17: error: Unsupported operand types for + ("object" and "int")  [operator]
    tests\test_production_ingestion_validation.py:352:17: error: Unsupported operand types for + ("object" and "int")  [operator]
    tests\test_production_ingestion_validation.py:356:17: error: Value of type "object" is not indexable  [index]
    tests\test_production_ingestion_validation.py:356:17: error: Unsupported target for indexed assignment ("object")  [index]
    tests\test_production_ingestion_validation.py:358:17: error: Value of type "object" is not indexable  [index]
    tests\test_production_ingestion_validation.py:358:17: error: Unsupported target for indexed assignment ("object")  [index]
    tests\test_production_ingestion_validation.py:360:17: error: Value of type "object" is not indexable  [index]
    tests\test_production_ingestion_validation.py:360:17: error: Unsupported target for indexed assignment ("object")  [index]
    tests\integration\test_base_components_integration.py:32:15: error: "object" has no attribute "connect"  [attr-defined]
    tests\integration\test_base_components_integration.py:37:15: error: "object" has no attribute "disconnect"  [attr-defined]
    packages\morag-core\src\morag_core\optional_deps.py:36:32: error: Incompatible types in assignment (expression has type Module, variable has type "None")  [assignment]
    packages\morag-core\src\morag_core\optional_deps.py:37:35: error: Incompatible types in assignment (expression has type "bool", variable has type "None")  [assignment]
    packages\morag-core\src\morag_core\optional_deps.py:40:35: error: Incompatible types in assignment (expression has type "bool", variable has type "None")  [assignment]
    packages\morag-core\src\morag_core\optional_deps.py:46:16: error: Incompatible return value type (got "None", expected "bool")  [return-value]
    packages\morag-core\src\morag_core\optional_deps.py:293:55: error: Incompatible default for argument "feature_name" (default has type "None", argument has type "str")  [assignment]
    packages\morag-reasoning\src\morag_reasoning\llm.py:133:13: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-reasoning\src\morag_reasoning\llm.py:207:17: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-reasoning\src\morag_reasoning\llm.py:248:9: error: Exception must be derived from BaseException  [misc]
    packages\morag-reasoning\src\morag_reasoning\llm.py:299:17: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-reasoning\src\morag_reasoning\llm.py:340:9: error: Exception must be derived from BaseException  [misc]
    packages\morag-reasoning\src\morag_reasoning\llm.py:400:34: error: "LLMClient" has no attribute "generate_text"; maybe "generate"?  [attr-defined]
    packages\morag-reasoning\tests\test_llm_client.py:182:63: error: Argument "request" to "HTTPStatusError" has incompatible type "None"; expected "Request"  [arg-type]
    packages\morag-reasoning\tests\test_llm_client.py:182:78: error: Argument "response" to "HTTPStatusError" has incompatible type "None"; expected "Response"  [arg-type]
    packages\morag-graph\tests\test_dynamic_types_async.py:12:1: error: Module "morag_graph.extraction" has no attribute "EntityExtractor"  [attr-defined]
    packages\morag-graph\tests\test_dynamic_types_async.py:12:1: error: Module "morag_graph.extraction" has no attribute "RelationExtractor"  [attr-defined]
    packages\morag-graph\tests\test_dynamic_types_async.py:21:5: error: Name "LLMConfig" already defined (possibly by an import)  [no-redef]
    packages\morag-graph\tests\test_dynamic_types_async.py:24:24: error: Incompatible types in assignment (expression has type "None", variable has type "str")  [assignment]
    packages\morag-graph\tests\test_dynamic_types_async.py:146:9: error: Need type annotation for "mock_response" (hint: "mock_response: list[<type>] = ...")  [var-annotated]
    packages\morag-graph\tests\test_dynamic_types_async.py:358:25: error: Need type annotation for "mock_response"  [var-annotated]
    packages\morag-web\src\morag_web\service.py:110:9: error: "BaseException" object is not iterable  [misc]
    packages\morag-web\src\morag_web\service.py:116: error: Unused "type: ignore" comment  [unused-ignore]
    agents\examples\basic_usage.py:15:1: error: Module "agents" has no attribute "list_agents"  [attr-defined]
    tests\manual\test_audio_format_fix.py:82:15: error: Unexpected keyword argument "include_metadata" for "ConversionOptions"  [call-arg]
    tests\manual\test_audio_format_fix.py:92:22: error: "AudioConverter" has no attribute "_create_enhanced_structured_markdown"  [attr-defined]
    tests\manual\test_audio_format_fix.py:179:15: error: Unexpected keyword argument "include_metadata" for "ConversionOptions"  [call-arg]
    tests\manual\test_audio_format_fix.py:184:22: error: "AudioConverter" has no attribute "_create_structured_markdown"  [attr-defined]
    tests\integration\test_enhanced_audio_pipeline.py:13:1: error: Module "morag_audio.services" has no attribute "speaker_diarization_service"; maybe "SpeakerDiarizationService"?  [attr-defined]
    tests\integration\test_enhanced_audio_pipeline.py:13:1: error: Module "morag_audio.services" has no attribute "topic_segmentation_service"; maybe "TopicSegmentationService"?  [attr-defined]
    tests\integration\test_enhanced_audio_pipeline.py:183:19: error: Unexpected keyword argument "include_metadata" for "ConversionOptions"  [call-arg]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:125:38: error: Item "None" of "Neo4jStorage | None" has no attribute "store_documents"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:132:35: error: Item "None" of "Neo4jStorage | None" has no attribute "store_document_chunks"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:139:27: error: Item "None" of "Neo4jStorage | None" has no attribute "create_document_contains_chunk_relation"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:146:36: error: Item "None" of "Neo4jStorage | None" has no attribute "store_entities"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:153:34: error: Item "None" of "Neo4jStorage | None" has no attribute "store_facts"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:158:38: error: Item "None" of "Neo4jStorage | None" has no attribute "store_relations"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:168:21: error: Item "None" of "Neo4jStorage | None" has no attribute "driver"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:168:21: error: Argument 1 to "FactOperations" has incompatible type "AsyncDriver | Any | None"; expected "AsyncDriver"  [arg-type]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:168:48: error: Item "None" of "Neo4jStorage | None" has no attribute "config"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:176:27: error: Item "None" of "Neo4jStorage | None" has no attribute "create_chunk_contains_fact_relation"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:218:27: error: Item "QdrantStorage" of "QdrantStorage | None" has no attribute "store_vectors"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:218:27: error: Item "None" of "QdrantStorage | None" has no attribute "store_vectors"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:242:27: error: Item "QdrantStorage" of "QdrantStorage | None" has no attribute "store_vectors"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:242:27: error: Item "None" of "QdrantStorage | None" has no attribute "store_vectors"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:268:27: error: Item "QdrantStorage" of "QdrantStorage | None" has no attribute "store_vectors"  [union-attr]
    packages\morag-graph\src\morag_graph\services\atomic_storage_service.py:268:27: error: Item "None" of "QdrantStorage | None" has no attribute "store_vectors"  [union-attr]
    packages\morag-video\src\morag_video\converters\video.py:113:24: error: Unexpected keyword argument "title" for "Document"  [call-arg]
    packages\morag-video\src\morag_video\converters\video.py:113:24: error: Unexpected keyword argument "document_type" for "Document"  [call-arg]
    packages\morag-video\src\morag_video\converters\video.py:113:24: error: Unexpected keyword argument "file_path" for "Document"  [call-arg]
    packages\morag-video\src\morag_video\converters\video.py:114:20: error: "ConversionOptions" has no attribute "document_id"  [attr-defined]
    packages\morag-video\src\morag_video\converters\video.py:115:23: error: "ConversionOptions" has no attribute "title"  [attr-defined]
    packages\morag-video\src\morag_video\converters\video.py:116:26: error: "str" has no attribute "text_content"  [attr-defined]
    packages\morag-video\src\morag_video\converters\video.py:119:26: error: Argument "metadata" to "Document" has incompatible type "dict[Any, Any]"; expected "DocumentMetadata"  [arg-type]
    packages\morag-video\src\morag_video\converters\video.py:123:23: error: "str" has no attribute "metadata"  [attr-defined]
    packages\morag-video\src\morag_video\converters\video.py:128:29: error: Unexpected keyword argument "text_extraction_score" for "QualityScore"  [call-arg]
    packages\morag-video\src\morag_video\converters\video.py:128:29: error: Unexpected keyword argument "structure_preservation_score" for "QualityScore"; did you mean "structure_preservation"?  [call-arg]
    packages\morag-video\src\morag_video\converters\video.py:128:29: error: Unexpected keyword argument "metadata_extraction_score" for "QualityScore"  [call-arg]
    packages\morag-video\src\morag_video\converters\video.py:136:20: error: Missing positional arguments "success", "content", "metadata" in call to "ConversionResult"  [call-arg]
    packages\morag-video\src\morag_video\converters\video.py:499:9: error: Need type annotation for "speaker_groups" (hint: "speaker_groups: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-video\src\morag_video\converters\video.py:569:9: error: Need type annotation for "topic_groups" (hint: "topic_groups: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:61:32: error: Incompatible types in assignment (expression has type "None", variable has type "dict[str, Any]")  [assignment]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:124:23: error: Need type annotation for "_cache"  [var-annotated]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:124:29: error: "ResponseGenerator" has no attribute "enable_caching"  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:141:13: error: Statement is unreachable  [unreachable]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:266:15: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:292:25: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:319:9: error: Need type annotation for "fact_types" (hint: "fact_types: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:357:28: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:403:46: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:404:46: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:416:20: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:417:20: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:459:45: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:464:44: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:469:42: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    packages\morag-reasoning\src\morag_reasoning\response_generator.py:474:23: error: "ExtractedFact" has no attribute "fact_text"; maybe "fact_type"?  [attr-defined]
    tests\integration\test_video_audio_integration.py:19:1: error: Module "morag_video" has no attribute "VideoMetadata"  [attr-defined]
    tests\integration\test_video_audio_integration.py:19:1: error: Module "morag_video" has no attribute "VideoProcessingResult"  [attr-defined]
    tests\integration\test_video_audio_integration.py:42:13: error: Unexpected keyword argument "start_time" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:42:13: error: Unexpected keyword argument "end_time" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:42:13: error: Unexpected keyword argument "speaker_id" for "AudioSegment"; did you mean "speaker"?  [call-arg]
    tests\integration\test_video_audio_integration.py:42:13: error: Unexpected keyword argument "language" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:50:13: error: Unexpected keyword argument "start_time" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:50:13: error: Unexpected keyword argument "end_time" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:50:13: error: Unexpected keyword argument "speaker_id" for "AudioSegment"; did you mean "speaker"?  [call-arg]
    tests\integration\test_video_audio_integration.py:50:13: error: Unexpected keyword argument "language" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:58:13: error: Unexpected keyword argument "start_time" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:58:13: error: Unexpected keyword argument "end_time" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:58:13: error: Unexpected keyword argument "speaker_id" for "AudioSegment"; did you mean "speaker"?  [call-arg]
    tests\integration\test_video_audio_integration.py:58:13: error: Unexpected keyword argument "language" for "AudioSegment"  [call-arg]
    tests\integration\test_video_audio_integration.py:122:24: error: Unexpected keyword argument "topics" for "TopicSegmentationResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:122:24: error: Unexpected keyword argument "segmentation_method" for "TopicSegmentationResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:131:16: error: Unexpected keyword argument "text" for "AudioProcessingResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:131:16: error: Unexpected keyword argument "language" for "AudioProcessingResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:131:16: error: Unexpected keyword argument "confidence" for "AudioProcessingResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:131:16: error: Unexpected keyword argument "duration" for "AudioProcessingResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:131:16: error: Unexpected keyword argument "model_used" for "AudioProcessingResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:131:16: error: Unexpected keyword argument "speaker_diarization" for "AudioProcessingResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:131:16: error: Unexpected keyword argument "topic_segmentation" for "AudioProcessingResult"  [call-arg]
    tests\integration\test_video_audio_integration.py:209:42: error: Incompatible types in assignment (expression has type "Mock", variable has type "None")  [assignment]
    tests\integration\test_video_audio_integration.py:313:23: error: Unexpected keyword argument "include_metadata" for "ConversionOptions"  [call-arg]
    tests\manual\test_video_conversion_fixes.py:24:1: error: Module "morag_services" has no attribute "ConversionOptions"  [attr-defined]
    tests\manual\test_video_conversion_fixes.py:24:1: error: Module "morag_services" has no attribute "DocumentConverter"  [attr-defined]

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x90 in position 6423: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 41
Total warnings: 382

File: tests\test_batch_embedding.py
  ERRORS:
    Missing import for 'test_different_batch_sizes' used in tests\test_batch_embedding.py
    Missing import for 'main' used in tests\test_batch_embedding.py
    Missing import for 'test_batch_embedding' used in tests\test_batch_embedding.py

File: packages\morag-reasoning\src\morag_reasoning\intelligent_retrieval.py
  ERRORS:
    Missing import for 'entities' used in packages\morag-reasoning\src\morag_reasoning\intelligent_retrieval.py

File: packages\morag-image\examples\service_usage.py
  ERRORS:
    Missing import for 'main' used in packages\morag-image\examples\service_usage.py

File: packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py
  ERRORS:
    Missing import for 'source_id' used in packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py
    Missing import for 'text' used in packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py
    Missing import for 'documents' used in packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py
    Missing import for 'enable_cross_document_deduplication' used in packages\morag-graph\src\morag_graph\extraction\unified_extraction_pipeline.py

File: scripts\ensure_data_directories.py
  ERRORS:
    Missing import for 'PermissionError' used in scripts\ensure_data_directories.py

File: packages\morag-document\src\morag_document\service.py
  ERRORS:
    Missing import for 'save_output' used in packages\morag-document\src\morag_document\service.py
    Missing import for 'kwargs' used in packages\morag-document\src\morag_document\service.py
    Missing import for 'output_format' used in packages\morag-document\src\morag_document\service.py

File: tests\manual\test_video_format_fix.py
  ERRORS:
    Missing import for 'main' used in tests\manual\test_video_format_fix.py
    Missing import for 'test_video_format_without_transcript' used in tests\manual\test_video_format_fix.py
    Missing import for 'test_video_format' used in tests\manual\test_video_format_fix.py

File: tests\cli\test-ingest-workflow.py
  ERRORS:
    Missing import for 'test_ingest_workflow' used in tests\cli\test-ingest-workflow.py
    Missing import for 'main' used in tests\cli\test-ingest-workflow.py
    Missing import for 'test_services_availability' used in tests\cli\test-ingest-workflow.py

File: packages\morag-services\src\morag_services\storage.py
  ERRORS:
    Missing import for 'vector_ids' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'filters' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'data' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'query_vector' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'prefix' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'upsert' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'vectors' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'new_vectors' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'limit' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'ids' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'new_metadata' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'document_id' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'compute_func' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'vector_size' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'filter_expr' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'score_threshold' used in packages\morag-services\src\morag_services\storage.py
    Missing import for 'force_recreate' used in packages\morag-services\src\morag_services\storage.py

File: packages\morag-web\src\morag_web\converter.py
  ERRORS:
    Missing import for 'options' used in packages\morag-web\src\morag_web\converter.py

File: scripts\build_test.py
  ERRORS:
    Missing import for 'SyntaxError' used in scripts\build_test.py
    Missing import for 'importlib' used in scripts\build_test.py

File: packages\morag-graph\src\morag_graph\discovery\entity_discovery.py
  ERRORS:
    Missing import for 'available_entities' used in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py
    Missing import for 'x' used in packages\morag-graph\src\morag_graph\discovery\entity_discovery.py

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 1249: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 62
Total warnings: 214

File: packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
  ERRORS:
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
    Missing import for 'batch_size' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
    Missing import for 'fact_ids' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
    Missing import for 'x' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
    Missing import for 'similarity_threshold' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py
    Missing import for 'query_embedding' used in packages\morag-graph\src\morag_graph\services\fact_embedding_service.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
  ERRORS:
    Missing import for 'chunk_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'domain' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'fact_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'fact_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'max_depth' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'relation' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'relations' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'context' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'query_text' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py
    Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\fact_operations.py

File: packages\morag-stages\src\morag_stages\processors\youtube_processor.py
  ERRORS:
    Missing import for 'config' used in packages\morag-stages\src\morag_stages\processors\youtube_processor.py
    Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\youtube_processor.py
    Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\youtube_processor.py

File: agents\tests\run_all_tests.py
  ERRORS:
    Missing import for 'test_agent_factory' used in agents\tests\run_all_tests.py
    Missing import for 'exit' used in agents\tests\run_all_tests.py

File: packages\morag-reasoning\src\morag_reasoning\graph_tool_controller.py
  ERRORS:
    Missing import for 'call' used in packages\morag-reasoning\src\morag_reasoning\graph_tool_controller.py

File: packages\morag-graph\src\morag_graph\operations\crud.py
  ERRORS:
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\operations\crud.py
    Missing import for 'updates' used in packages\morag-graph\src\morag_graph\operations\crud.py
    Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\operations\crud.py
    Missing import for 'direction' used in packages\morag-graph\src\morag_graph\operations\crud.py
    Missing import for 'name' used in packages\morag-graph\src\morag_graph\operations\crud.py
    Missing import for 'relation_id' used in packages\morag-graph\src\morag_graph\operations\crud.py
    Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\operations\crud.py
    Missing import for 'cascade' used in packages\morag-graph\src\morag_graph\operations\crud.py

File: tests\unit\test_audio_tasks.py
  ERRORS:
    Missing import for 'mock_audio_processor' used in tests\unit\test_audio_tasks.py
    Missing import for 'mock_whisper_service' used in tests\unit\test_audio_tasks.py
    Missing import for 'mock_gemini' used in tests\unit\test_audio_tasks.py
    Missing import for 'mock_qdrant' used in tests\unit\test_audio_tasks.py
    Missing import for 'mock_chunking' used in tests\unit\test_audio_tasks.py
    Missing import for 'mock_summarization' used in tests\unit\test_audio_tasks.py

File: packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
  ERRORS:
    Missing import for 'fact_type' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
    Missing import for 'domain' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
    Missing import for 'query_context' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
    Missing import for 'context' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
    Missing import for 'query_text' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py
    Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\services\fact_extraction_service.py

File: refactor\archived_code\services_original.py
  ERRORS:
    Missing import for 'image_path' used in refactor\archived_code\services_original.py
    Missing import for 'video_path' used in refactor\archived_code\services_original.py
    Missing import for 'document_path' used in refactor\archived_code\services_original.py
    Missing import for 'limit' used in refactor\archived_code\services_original.py
    Missing import for 'filters' used in refactor\archived_code\services_original.py
    Missing import for 'process_with_semaphore' used in refactor\archived_code\services_original.py
    Missing import for 'audio_path' used in refactor\archived_code\services_original.py
    Missing import for 'query' used in refactor\archived_code\services_original.py
    Missing import for 'x' used in refactor\archived_code\services_original.py
    Missing import for 'items' used in refactor\archived_code\services_original.py

File: packages\morag-stages\tests\test_fact_generator.py
  ERRORS:
    Missing import for 'stage_test_framework' used in packages\morag-stages\tests\test_fact_generator.py

File: tests\manual\test_audio_extraction_optimization.py
  ERRORS:
    Missing import for 'test_performance_expectations' used in tests\manual\test_audio_extraction_optimization.py
    Missing import for 'test_audio_format_defaults' used in tests\manual\test_audio_extraction_optimization.py
    Missing import for 'main' used in tests\manual\test_audio_extraction_optimization.py
    Missing import for 'test_codec_selection_logic' used in tests\manual\test_audio_extraction_optimization.py
    Missing import for 'test_file_size_comparison' used in tests\manual\test_audio_extraction_optimization.py

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8d in position 3508: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 82
Total warnings: 377

File: packages\morag-stages\src\morag_stages\processors\document_processor.py
  ERRORS:
    Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\document_processor.py
    Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\document_processor.py

File: tests\manual\test_webhook_demo.py
  ERRORS:
    Missing import for 'test_webhook_integration' used in tests\manual\test_webhook_demo.py

File: packages\morag-services\src\morag_services\services.py
  ERRORS:
    Missing import for 'content_type' used in packages\morag-services\src\morag_services\services.py
    Missing import for 'audio_path' used in packages\morag-services\src\morag_services\services.py
    Missing import for 'DeprecationWarning' used in packages\morag-services\src\morag_services\services.py
    Missing import for 'video_path' used in packages\morag-services\src\morag_services\services.py
    Missing import for 'options' used in packages\morag-services\src\morag_services\services.py
    Missing import for 'document_path' used in packages\morag-services\src\morag_services\services.py
    Missing import for 'url' used in packages\morag-services\src\morag_services\services.py
    Missing import for 'image_path' used in packages\morag-services\src\morag_services\services.py
    Missing import for 'items' used in packages\morag-services\src\morag_services\services.py

File: packages\morag-services\src\morag_services\content_processors.py
  ERRORS:
    Missing import for 'audio_path' used in packages\morag-services\src\morag_services\content_processors.py
    Missing import for 'video_path' used in packages\morag-services\src\morag_services\content_processors.py
    Missing import for 'process_with_semaphore' used in packages\morag-services\src\morag_services\content_processors.py
    Missing import for 'options' used in packages\morag-services\src\morag_services\content_processors.py
    Missing import for 'document_path' used in packages\morag-services\src\morag_services\content_processors.py
    Missing import for 'path_or_url' used in packages\morag-services\src\morag_services\content_processors.py
    Missing import for 'url' used in packages\morag-services\src\morag_services\content_processors.py
    Missing import for 'image_path' used in packages\morag-services\src\morag_services\content_processors.py
    Missing import for 'items' used in packages\morag-services\src\morag_services\content_processors.py

File: packages\morag\src\morag\database_factory.py
  ERRORS:
    Missing import for 'server_config' used in packages\morag\src\morag\database_factory.py

File: tests\unit\test_youtube_processor.py
  ERRORS:
    Missing import for 'mock_yt_dlp' used in tests\unit\test_youtube_processor.py

File: packages\morag-web\examples\web_scraping_example.py
  ERRORS:
    Missing import for 'basic_scraping_example' used in packages\morag-web\examples\web_scraping_example.py
    Missing import for 'main' used in packages\morag-web\examples\web_scraping_example.py
    Missing import for 'urls' used in packages\morag-web\examples\web_scraping_example.py
    Missing import for 'service_example' used in packages\morag-web\examples\web_scraping_example.py

File: cli\morag-stages.py
  ERRORS:
    Missing import for 'execute_stage_chain' used in cli\morag-stages.py
    Missing import for 'execute_stage' used in cli\morag-stages.py
    Missing import for 'main' used in cli\morag-stages.py
    Missing import for 'execute_full_pipeline' used in cli\morag-stages.py

File: examples\web_scraping_demo.py
  ERRORS:
    Missing import for 'demo_configuration_options' used in examples\web_scraping_demo.py
    Missing import for 'demo_basic_scraping' used in examples\web_scraping_demo.py
    Missing import for 'demo_batch_processing' used in examples\web_scraping_demo.py
    Missing import for 'main' used in examples\web_scraping_demo.py
    Missing import for 'KeyboardInterrupt' used in examples\web_scraping_demo.py

File: packages\morag-graph\src\morag_graph\builders\graph_builder.py
  ERRORS:
    Missing import for 'chunks' used in packages\morag-graph\src\morag_graph\builders\graph_builder.py
    Missing import for 'documents' used in packages\morag-graph\src\morag_graph\builders\graph_builder.py

File: cli\graph_extraction.py
  ERRORS:
    Missing import for 'GraphEntity' used in cli\graph_extraction.py
    Missing import for 'GraphBuilder' used in cli\graph_extraction.py
    Missing import for 'metadata' used in cli\graph_extraction.py
    Missing import for 'GraphRelation' used in cli\graph_extraction.py
    Missing import for 'text_content' used in cli\graph_extraction.py
    Missing import for 'use_neo4j' used in cli\graph_extraction.py
    Missing import for 'context' used in cli\graph_extraction.py
    Missing import for 'Neo4j_storage' used in cli\graph_extraction.py
    Missing import for 'chunk_overlap' used in cli\graph_extraction.py
    Missing import for 'text' used in cli\graph_extraction.py
    Missing import for 'doc_id' used in cli\graph_extraction.py
    Missing import for 'use_qdrant' used in cli\graph_extraction.py
    Missing import for 'chunk_size' used in cli\graph_extraction.py
    Missing import for 'GraphExtractionService' used in cli\graph_extraction.py
    Missing import for 'doc_metadata' used in cli\graph_extraction.py

File: packages\morag\src\morag\services\temporary_file_service.py
  ERRORS:
    Missing import for 'encoding' used in packages\morag\src\morag\services\temporary_file_service.py
    Missing import for 'FileNotFoundError' used in packages\morag\src\morag\services\temporary_file_service.py
    Missing import for 'x' used in packages\morag\src\morag\services\temporary_file_service.py
    Missing import for 'filename' used in packages\morag\src\morag\services\temporary_file_service.py
    Missing import for 'RuntimeError' used in packages\morag\src\morag\services\temporary_file_service.py

File: packages\morag-reasoning\test_reasoning_api.py
  ERRORS:
    Missing import for 'api_url' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'query' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'test_multi_hop_reasoning_api' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'test_reasoning_query_endpoint' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'strategy' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'exit' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'check_api_health' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'main' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'max_iterations' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'max_paths' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'KeyboardInterrupt' used in packages\morag-reasoning\test_reasoning_api.py
    Missing import for 'check_reasoning_status' used in packages\morag-reasoning\test_reasoning_api.py

File: packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
  ERRORS:
    Missing import for 'dfs_recursive' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
    Missing import for 'strategy' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
    Missing import for 'entity2' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
    Missing import for 'entity1' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
    Missing import for 'visited' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py
    Missing import for 'starting_entities' used in packages\morag-graph\src\morag_graph\traversal\recursive_engine.py

File: tests\unit\test_audio_processor.py
  ERRORS:
    Missing import for 'mock_audio_segment' used in tests\unit\test_audio_processor.py
    Missing import for 'mock_convert' used in tests\unit\test_audio_processor.py
    Missing import for 'mock_validate' used in tests\unit\test_audio_processor.py
    Missing import for 'mock_extract_metadata' used in tests\unit\test_audio_processor.py
    Missing import for 'mock_transcribe' used in tests\unit\test_audio_processor.py
    Missing import for 'mock_whisper_model' used in tests\unit\test_audio_processor.py

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 62
Total warnings: 230

File: packages\morag-stages\tests\test_chunker.py
  ERRORS:
    Missing import for 'stage_test_framework' used in packages\morag-stages\tests\test_chunker.py

File: packages\morag-stages\src\morag_stages\registry.py
  ERRORS:
    Missing import for 'x' used in packages\morag-stages\src\morag_stages\registry.py

File: cli\batch-process-stages.py
  ERRORS:
    Missing import for 'process_file_through_stages' used in cli\batch-process-stages.py
    Missing import for 'batch_process_with_resume' used in cli\batch-process-stages.py
    Missing import for 'batch_process' used in cli\batch-process-stages.py

File: packages\morag-graph\src\morag_graph\retrieval\fusion.py
  ERRORS:
    Missing import for 'query_analysis' used in packages\morag-graph\src\morag_graph\retrieval\fusion.py

File: packages\morag-youtube\examples\youtube_example.py
  ERRORS:
    Missing import for 'transcript_example' used in packages\morag-youtube\examples\youtube_example.py
    Missing import for 'service_example' used in packages\morag-youtube\examples\youtube_example.py
    Missing import for 'main' used in packages\morag-youtube\examples\youtube_example.py
    Missing import for 'basic_example' used in packages\morag-youtube\examples\youtube_example.py

File: packages\morag-youtube\tests\test_youtube_processor.py
  ERRORS:
    Missing import for 'mock_download' used in packages\morag-youtube\tests\test_youtube_processor.py
    Missing import for 'mock_metadata' used in packages\morag-youtube\tests\test_youtube_processor.py
    Missing import for 'mock_transcribe' used in packages\morag-youtube\tests\test_youtube_processor.py
    Missing import for 'mock_process_url' used in packages\morag-youtube\tests\test_youtube_processor.py
    Missing import for 'mock_to_thread' used in packages\morag-youtube\tests\test_youtube_processor.py

File: tests\test_03_performance.py
  ERRORS:
    Missing import for 'mock_search' used in tests\test_03_performance.py
    Missing import for 'mock_performance_service' used in tests\test_03_performance.py
    Missing import for 'args' used in tests\test_03_performance.py
    Missing import for 'mock_store_operation' used in tests\test_03_performance.py
    Missing import for 'mock_batch_upsert' used in tests\test_03_performance.py
    Missing import for 'index' used in tests\test_03_performance.py
    Missing import for 'mock_memory_operation' used in tests\test_03_performance.py
    Missing import for 'mock_upsert' used in tests\test_03_performance.py
    Missing import for 'store_chunk' used in tests\test_03_performance.py
    Missing import for 'kwargs' used in tests\test_03_performance.py
    Missing import for 'mock_unreliable_operation' used in tests\test_03_performance.py

File: packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py
  ERRORS:
    Missing import for 'v' used in packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py
    Missing import for 'relations' used in packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py
    Missing import for 'force_reingest' used in packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py

File: cli\validate-standalone-cli.py
  ERRORS:
    Missing import for 'KeyboardInterrupt' used in cli\validate-standalone-cli.py

File: packages\morag-video\src\morag_video\cli.py
  ERRORS:
    Missing import for 'output_format' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'extract_keyframes' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'generate_thumbnails' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'enable_ocr' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'enable_topic_segmentation' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'process_video' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'extract_audio' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'device' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'enable_enhanced_audio' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'language' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'enable_speaker_diarization' used in packages\morag-video\src\morag_video\cli.py
    Missing import for 'whisper_model' used in packages\morag-video\src\morag_video\cli.py

File: packages\morag-document\tests\test_markitdown_converters.py
  ERRORS:
    Missing import for 'mock_service_class' used in packages\morag-document\tests\test_markitdown_converters.py
    Missing import for 'ImageConverter' used in packages\morag-document\tests\test_markitdown_converters.py

File: packages\morag-reasoning\src\morag_reasoning\batch_processor.py
  ERRORS:
    Missing import for 'items' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
    Missing import for 'results' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
    Missing import for 'prompt_creator' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
    Missing import for 'response_parser' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
    Missing import for 'temperature' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
    Missing import for 'chunks' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
    Missing import for 'max_tokens' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py
    Missing import for 'texts' used in packages\morag-reasoning\src\morag_reasoning\batch_processor.py

File: mypy
  ERRORS:
    packages\morag-reasoning\src\morag_reasoning\recursive_fact_models.py:44:25: error: Argument "default_factory" to "Field" has incompatible type "type[SourceMetadata]"; expected "Callable[[], Never] | Callable[[dict[str, Any]], Never]"  [arg-type]
    packages\morag-reasoning\src\morag_reasoning\recursive_fact_models.py:69:25: error: Argument "default_factory" to "Field" has incompatible type "type[SourceMetadata]"; expected "Callable[[], Never] | Callable[[dict[str, Any]], Never]"  [arg-type]
    packages\morag-reasoning\src\morag_reasoning\recursive_fact_models.py:100:25: error: Argument "default_factory" to "Field" has incompatible type "type[SourceMetadata]"; expected "Callable[[], Never] | Callable[[dict[str, Any]], Never]"  [arg-type]
    packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py:179:9: error: Need type annotation for "chunks_map" (hint: "chunks_map: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py:280:33: error: "BaseStorage" has no attribute "store_document"  [attr-defined]
    packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py:303:34: error: "BaseStorage" has no attribute "store_document_chunk"  [attr-defined]
    packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py:307:23: error: "BaseStorage" has no attribute "create_document_contains_chunk_relation"  [attr-defined]
    packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py:316:27: error: "BaseStorage" has no attribute "create_chunk_mentions_entity_relation"  [attr-defined]
    packages\morag-graph\src\morag_graph\ingestion\file_ingestion.py:417:9: error: Need type annotation for "type_counts" (hint: "type_counts: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-youtube\tests\test_youtube_processor.py:114:5: error: Name "mock_instance" is not defined  [name-defined]

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 179
Total warnings: 98

File: packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
  ERRORS:
    Missing import for 'x' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
    Missing import for 'chunks' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
    Missing import for 'agent' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
    Missing import for 'entity_normalizer' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py
    Missing import for 'fact_extractor' used in packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py

File: packages\morag-services\src\morag_services\graph_processor.py
  ERRORS:
    Missing import for 'document_path' used in packages\morag-services\src\morag_services\graph_processor.py
    Missing import for 'document_metadata' used in packages\morag-services\src\morag_services\graph_processor.py
    Missing import for 'content' used in packages\morag-services\src\morag_services\graph_processor.py
    Missing import for 'database_configs' used in packages\morag-services\src\morag_services\graph_processor.py
    Missing import for 'max_length' used in packages\morag-services\src\morag_services\graph_processor.py
    Missing import for 'source_doc_id' used in packages\morag-services\src\morag_services\graph_processor.py

File: tests\test_deployment.py
  ERRORS:
    Missing import for 'FileNotFoundError' used in tests\test_deployment.py

File: packages\morag-video\src\morag_video\service.py
  ERRORS:
    Missing import for 'save_output' used in packages\morag-video\src\morag_video\service.py
    Missing import for 'json_result' used in packages\morag-video\src\morag_video\service.py
    Missing import for 'output_format' used in packages\morag-video\src\morag_video\service.py
    Missing import for 'progress_callback' used in packages\morag-video\src\morag_video\service.py

File: packages\morag-youtube\src\morag_youtube\service.py
  ERRORS:
    Missing import for 'quality' used in packages\morag-youtube\src\morag_youtube\service.py
    Missing import for 'download_subtitles' used in packages\morag-youtube\src\morag_youtube\service.py
    Missing import for 'transcript_segments' used in packages\morag-youtube\src\morag_youtube\service.py
    Missing import for 'playlist_url' used in packages\morag-youtube\src\morag_youtube\service.py
    Missing import for 'urls' used in packages\morag-youtube\src\morag_youtube\service.py
    Missing import for 'extract_audio' used in packages\morag-youtube\src\morag_youtube\service.py
    Missing import for 'metadata' used in packages\morag-youtube\src\morag_youtube\service.py
    Missing import for 'transcript' used in packages\morag-youtube\src\morag_youtube\service.py

File: packages\morag-graph\tests\test_hybrid_retrieval.py
  ERRORS:
    packages\morag-graph\tests\test_hybrid_retrieval.py:103: Dangerous use of eval/exec

File: packages\morag-document\src\morag_document\processor.py
  ERRORS:
    Missing import for 'kwargs' used in packages\morag-document\src\morag_document\processor.py

File: packages\morag-audio\src\morag_audio\rest_transcription.py
  ERRORS:
    Missing import for 'audio_path' used in packages\morag-audio\src\morag_audio\rest_transcription.py

File: tests\integration\test_audio_pipeline.py
  ERRORS:
    Missing import for 'mock_whisper_model' used in tests\integration\test_audio_pipeline.py
    Missing import for 'mock_chunking' used in tests\integration\test_audio_pipeline.py
    Missing import for 'mock_summarization' used in tests\integration\test_audio_pipeline.py
    Missing import for 'mock_gemini' used in tests\integration\test_audio_pipeline.py
    Missing import for 'mock_qdrant' used in tests\integration\test_audio_pipeline.py

File: packages\morag-reasoning\src\morag_reasoning\response_assessor.py
  ERRORS:
    Missing import for 'original_query' used in packages\morag-reasoning\src\morag_reasoning\response_assessor.py
    Missing import for 'response' used in packages\morag-reasoning\src\morag_reasoning\response_assessor.py
    Missing import for 'query' used in packages\morag-reasoning\src\morag_reasoning\response_assessor.py

File: tests\unit\core\test_base_storage.py
  ERRORS:
    Missing import for 'ConnectionError' used in tests\unit\core\test_base_storage.py
    Missing import for 'query' used in tests\unit\core\test_base_storage.py
    Missing import for 'source_entity_id' used in tests\unit\core\test_base_storage.py
    Missing import for 'direction' used in tests\unit\core\test_base_storage.py
    Missing import for 'entity_type' used in tests\unit\core\test_base_storage.py
    Missing import for 'relation_type' used in tests\unit\core\test_base_storage.py
    Missing import for 'mock_storage' used in tests\unit\core\test_base_storage.py
    Missing import for 'limit' used in tests\unit\core\test_base_storage.py
    Missing import for 'target_entity_id' used in tests\unit\core\test_base_storage.py

File: tests\test_temporary_file_management.py
  ERRORS:
    Missing import for 'FileNotFoundError' used in tests\test_temporary_file_management.py

File: packages\morag\src\morag\pipeline\state_manager.py
  ERRORS:
    Missing import for 'state' used in packages\morag\src\morag\pipeline\state_manager.py
    Missing import for 'file_path' used in packages\morag\src\morag\pipeline\state_manager.py
    Missing import for 'retry' used in packages\morag\src\morag\pipeline\state_manager.py
    Missing import for 'checkpoint_loop' used in packages\morag\src\morag\pipeline\state_manager.py

File: packages\morag\src\morag\api_models\endpoints\stages.py
  ERRORS:
    Missing import for 'stop_on_failure' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'fact_extraction_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'content_analysis_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'summarization_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'default_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'stage_configs' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'chunking_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'stages' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'keyword_extraction_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'relation_extraction_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'send_webhook_notification_for_chain' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'total_time' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'send_webhook_notification' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'force' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'background_tasks' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'skip_existing' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'webhook_url' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'return_content' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'stage_result' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'global_config' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for '_list_stages_impl' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'execute_stage_chain' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'UnicodeDecodeError' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'markdown_optimizer_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'success' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'file' used in packages\morag\src\morag\api_models\endpoints\stages.py
    Missing import for 'entity_extraction_agent_model' used in packages\morag\src\morag\api_models\endpoints\stages.py

File: mypy
  ERRORS:
    packages\morag-graph\src\morag_graph\maintenance\config_validator.py:222:9: error: Need type annotation for "warnings" (hint: "warnings: list[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\maintenance\config_validator.py:243:38: error: Argument 2 to "isinstance" has incompatible type "object"; expected "_ClassInfo"  [arg-type]
    packages\morag-graph\src\morag_graph\maintenance\config_validator.py:245:46: error: "object" has no attribute "__name__"; maybe "__ne__" or "__new__"?  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:38:36: error: "Fact" has no attribute "subject"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:39:35: error: "Fact" has no attribute "object"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:40:37: error: "Fact" has no attribute "approach"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:41:37: error: "Fact" has no attribute "solution"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:42:39: error: "Fact" has no attribute "confidence"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:43:36: error: "Fact" has no attribute "context"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:53:52: error: "FactRelation" has no attribute "source_fact"; maybe "source_fact_id"?  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:54:52: error: "FactRelation" has no attribute "target_fact"; maybe "target_fact_id"?  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:57:21: error: Statement is unreachable  [unreachable]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:72:40: error: "FactRelation" has no attribute "explanation"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:79:21: error: Unexpected keyword argument "nodes" for "Graph"  [call-arg]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:79:21: error: Unexpected keyword argument "edges" for "Graph"  [call-arg]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:96:20: error: Unexpected keyword argument "nodes" for "Graph"  [call-arg]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:96:20: error: Unexpected keyword argument "edges" for "Graph"  [call-arg]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:111:16: error: Incompatible return value type (got "None", expected "int")  [return-value]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:123:9: error: Returning Any from function declared to return "bool"  [no-any-return]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:124:13: error: "Fact" has no attribute "subject"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:125:17: error: "Fact" has no attribute "object"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:126:17: error: "Fact" has no attribute "approach"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:127:17: error: "Fact" has no attribute "solution"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:142:35: error: "Graph" has no attribute "nodes"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:143:35: error: "Graph" has no attribute "edges"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:148:52: error: "Graph" has no attribute "nodes"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:150:17: error: "object" has no attribute "append"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:154:52: error: "Graph" has no attribute "edges"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:156:17: error: "object" has no attribute "append"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:161:25: error: "Graph" has no attribute "edges"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:166:21: error: "object" has no attribute "append"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:172:21: error: "object" has no attribute "append"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:198:31: error: "Graph" has no attribute "nodes"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:199:31: error: "Graph" has no attribute "edges"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:206:21: error: "Graph" has no attribute "nodes"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:208:13: error: Unsupported target for indexed assignment ("object")  [index]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:208:46: error: "object" has no attribute "get"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:212:21: error: "Graph" has no attribute "edges"  [attr-defined]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:214:13: error: Unsupported target for indexed assignment ("object")  [index]
    packages\morag-graph\src\morag_graph\extraction\graph_utilities.py:214:46: error: "object" has no attribute "get"  [attr-defined]
    packages\morag\src\morag\pipeline\state_manager.py:572:1: error: Library stubs not installed for "aiofiles"  [import-untyped]
    packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py:50:9: error: Need type annotation for "_document_ids" (hint: "_document_ids: set[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py:51:9: error: Need type annotation for "_chunk_ids" (hint: "_chunk_ids: set[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py:52:9: error: Need type annotation for "_entity_ids" (hint: "_entity_ids: set[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py:53:9: error: Need type annotation for "_fact_ids" (hint: "_fact_ids: set[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py:54:9: error: Need type annotation for "_relation_ids" (hint: "_relation_ids: set[<type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\services\atomic_batch_builder.py:55:9: error: Need type annotation for "_fact_relation_ids" (hint: "_fact_relation_ids: set[<type>] = ...")  [var-annotated]
    packages\morag-audio\src\morag_audio\rest_transcription.py:8:1: error: Library stubs not installed for "aiofiles"  [import-untyped]
    packages\morag-audio\src\morag_audio\rest_transcription.py:121:28: error: Argument "confidence" to "AudioSegment" has incompatible type "None"; expected "float"  [arg-type]
    packages\morag-youtube\src\morag_youtube\service.py:47:37: error: "YouTubeService" has no attribute "external_service"  [attr-defined]
    packages\morag-youtube\src\morag_youtube\service.py:118:18: error: Unexpected keyword argument "extract_metadata_only" for "YouTubeConfig"; did you mean "extract_metadata"?  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:166:18: error: Unexpected keyword argument "quality" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:166:18: error: Unexpected keyword argument "extract_audio" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:166:18: error: Unexpected keyword argument "download_subtitles" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:221:18: error: Unexpected keyword argument "extract_audio" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:221:18: error: Unexpected keyword argument "download_subtitles" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:221:18: error: Unexpected keyword argument "download_thumbnails" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:259:18: error: Unexpected keyword argument "extract_audio" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:259:18: error: Unexpected keyword argument "download_subtitles" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:259:18: error: Unexpected keyword argument "subtitle_languages" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:259:18: error: Unexpected keyword argument "download_thumbnails" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:259:18: error: Unexpected keyword argument "extract_metadata_only" for "YouTubeConfig"; did you mean "extract_metadata"?  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:307:18: error: Unexpected keyword argument "extract_audio" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:307:18: error: Unexpected keyword argument "download_subtitles" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:307:18: error: Unexpected keyword argument "download_thumbnails" for "YouTubeConfig"  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:307:18: error: Unexpected keyword argument "extract_metadata_only" for "YouTubeConfig"; did you mean "extract_metadata"?  [call-arg]
    packages\morag-youtube\src\morag_youtube\service.py:422:33: error: Unexpected keyword argument "transcript_segments" for "YouTubeDownloadResult"; did you mean "transcript_text"?  [call-arg]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:54:12: error: "FactGeneratorConfig" has no attribute "enable_batch_processing"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:71:12: error: "FactGeneratorConfig" has no attribute "enable_fact_deduplication"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:74:12: error: "FactGeneratorConfig" has no attribute "enable_relation_deduplication"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:77:12: error: "FactGeneratorConfig" has no attribute "enable_entity_normalization"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:99:22: error: "FactGeneratorConfig" has no attribute "max_chunks_per_batch"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:100:9: error: Need type annotation for "results" (hint: "results: list[<type>] = ...")  [var-annotated]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:122:13: error: Incompatible types in assignment (expression has type "float", variable has type "int")  [assignment]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:147:42: error: "FactGeneratorConfig" has no attribute "chunk_size_threshold"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:174:32: error: "FactGeneratorConfig" has no attribute "enable_keyword_extraction"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:196:16: error: "FactGeneratorConfig" has no attribute "use_llm_fallback"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:280:24: error: "FactGeneratorConfig" has no attribute "enable_keyword_extraction"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:310:17: error: Returning Any from function declared to return "dict[str, Any] | None"  [no-any-return]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:317:17: error: Returning Any from function declared to return "dict[str, Any] | None"  [no-any-return]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:321:17: error: Returning Any from function declared to return "dict[str, Any] | None"  [no-any-return]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:334:18: error: Need type annotation for "result"  [var-annotated]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:366:41: error: "FactGeneratorConfig" has no attribute "min_fact_confidence"; maybe "min_confidence"?  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:367:45: error: "FactGeneratorConfig" has no attribute "min_relation_confidence"; maybe "min_confidence"?  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:480:9: error: Need type annotation for "word_freq" (hint: "word_freq: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-stages\src\morag_stages\stages\fact_extraction_engine.py:498:13: error: Returning Any from function declared to return "list[dict[str, Any]]"  [no-any-return]
    tests\unit\core\test_base_storage.py:95:12: error: "Relation" has no attribute "source_id"; maybe "source_doc_id"?  [attr-defined]
    tests\unit\core\test_base_storage.py:96:36: error: "Relation" has no attribute "source_id"; maybe "source_doc_id"?  [attr-defined]
    tests\unit\core\test_base_storage.py:97:12: error: "Relation" has no attribute "target_id"  [attr-defined]
    tests\unit\core\test_base_storage.py:98:36: error: "Relation" has no attribute "target_id"  [attr-defined]
    tests\unit\core\test_base_storage.py:176:17: error: "Relation" has no attribute "target_id"  [attr-defined]
    tests\unit\core\test_base_storage.py:177:20: error: "Relation" has no attribute "source_id"; maybe "source_doc_id"?  [attr-defined]
    tests\unit\core\test_base_storage.py:178:22: error: "Relation" has no attribute "source_id"; maybe "source_doc_id"?  [attr-defined]
    tests\unit\core\test_base_storage.py:199:35: error: Argument 1 to "store_entities" of "MockStorage" has incompatible type "dict[str, Entity]"; expected "list[Entity]"  [arg-type]
    tests\unit\core\test_base_storage.py:200:36: error: Argument 1 to "store_relations" of "MockStorage" has incompatible type "dict[str, Relation]"; expected "list[Relation]"  [arg-type]
    tests\unit\core\test_base_storage.py:218:31: error: Argument "entities" to "Graph" has incompatible type "list[Any]"; expected "dict[str, Entity]"  [arg-type]
    tests\unit\core\test_base_storage.py:218:51: error: Argument "relations" to "Graph" has incompatible type "list[Any]"; expected "dict[str, Relation]"  [arg-type]
    tests\unit\core\test_base_storage.py:278:9: error: Statement is unreachable  [unreachable]
    tests\unit\core\test_base_storage.py:525:32: error: Argument "entities" to "Graph" has incompatible type "list[Entity]"; expected "dict[str, Entity]"  [arg-type]
    tests\unit\core\test_base_storage.py:525:52: error: Argument "relations" to "Graph" has incompatible type "list[Relation]"; expected "dict[str, Relation]"  [arg-type]
    tests\test_deployment.py:250:22: error: Module has no attribute "from_env"  [attr-defined]
    tests\utils\fixtures.py:363:11: error: "object" has no attribute "connect"  [attr-defined]
    tests\utils\fixtures.py:368:11: error: "object" has no attribute "disconnect"  [attr-defined]

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 97
Total warnings: 317

File: packages\morag-document\tests\test_markitdown_base.py
  ERRORS:
    Missing import for 'tmp_path' used in packages\morag-document\tests\test_markitdown_base.py

File: packages\morag-stages\src\morag_stages\processors\web_processor.py
  ERRORS:
    Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\web_processor.py
    Missing import for 'config' used in packages\morag-stages\src\morag_stages\processors\web_processor.py
    Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\web_processor.py

File: cli\create-databases.py
  ERRORS:
    Missing import for 'create_qdrant_collection' used in cli\create-databases.py
    Missing import for 'database_name' used in cli\create-databases.py
    Missing import for 'main' used in cli\create-databases.py
    Missing import for 'create_neo4j_database' used in cli\create-databases.py
    Missing import for 'vector_size' used in cli\create-databases.py
    Missing import for 'list_existing_databases' used in cli\create-databases.py
    Missing import for 'collection_name' used in cli\create-databases.py

File: packages\morag-graph\tests\test_qdrant_checksum.py
  ERRORS:
    Missing import for 'scroll_filter' used in packages\morag-graph\tests\test_qdrant_checksum.py
    Missing import for 'points_selector' used in packages\morag-graph\tests\test_qdrant_checksum.py
    Missing import for 'ids' used in packages\morag-graph\tests\test_qdrant_checksum.py
    Missing import for 'RuntimeError' used in packages\morag-graph\tests\test_qdrant_checksum.py
    Missing import for 'limit' used in packages\morag-graph\tests\test_qdrant_checksum.py
    Missing import for 'collection_name' used in packages\morag-graph\tests\test_qdrant_checksum.py
    Missing import for 'points' used in packages\morag-graph\tests\test_qdrant_checksum.py

File: tests\unit\test_ai_error_handling.py
  ERRORS:
    Missing import for 'failing_operation' used in tests\unit\test_ai_error_handling.py
    Missing import for 'fallback_operation' used in tests\unit\test_ai_error_handling.py
    Missing import for 'mock_operation' used in tests\unit\test_ai_error_handling.py

File: cli\test-intelligent-retrieval.py
  ERRORS:
    Missing import for 'language' used in cli\test-intelligent-retrieval.py
    Missing import for 'main' used in cli\test-intelligent-retrieval.py
    Missing import for 'max_entities_per_iteration' used in cli\test-intelligent-retrieval.py
    Missing import for 'query' used in cli\test-intelligent-retrieval.py
    Missing import for 'include_debug_info' used in cli\test-intelligent-retrieval.py
    Missing import for 'max_paths_per_entity' used in cli\test-intelligent-retrieval.py
    Missing import for 'min_relevance_threshold' used in cli\test-intelligent-retrieval.py
    Missing import for 'max_iterations' used in cli\test-intelligent-retrieval.py
    Missing import for 'max_depth' used in cli\test-intelligent-retrieval.py
    cli\test-intelligent-retrieval.py:244: Dangerous use of eval/exec
    cli\test-intelligent-retrieval.py:517: Dangerous use of eval/exec

File: examples\universal_converter_demo.py
  ERRORS:
    Missing import for 'demo_pdf_conversion' used in examples\universal_converter_demo.py
    Missing import for 'demo_conversion_options' used in examples\universal_converter_demo.py
    Missing import for 'main' used in examples\universal_converter_demo.py
    Missing import for 'demo_configuration' used in examples\universal_converter_demo.py
    Missing import for 'demo_basic_conversion' used in examples\universal_converter_demo.py
    Missing import for 'demo_quality_assessment' used in examples\universal_converter_demo.py

File: cli\resume_utils.py
  ERRORS:
    Missing import for 'resume_from_ingestion_data' used in cli\resume_utils.py
    Missing import for 'use_neo4j' used in cli\resume_utils.py
    Missing import for 'use_qdrant' used in cli\resume_utils.py
    Missing import for '_recreate_chunk_entity_mapping' used in cli\resume_utils.py
    Missing import for 'resume_from_process_result' used in cli\resume_utils.py

File: packages\morag\src\morag\embedding_processor.py
  ERRORS:
    Missing import for 'chunks' used in packages\morag\src\morag\embedding_processor.py
    Missing import for 'content' used in packages\morag\src\morag\embedding_processor.py

File: packages\morag-document\src\morag_document\cli.py
  ERRORS:
    Missing import for 'process_document' used in packages\morag-document\src\morag_document\cli.py

File: scripts\static_analysis.py
  ERRORS:
    Missing import for 'SyntaxError' used in scripts\static_analysis.py
    Missing import for 'FileNotFoundError' used in scripts\static_analysis.py
    scripts\static_analysis.py:141: Dangerous use of eval/exec

File: scripts\syntax_check.py
  ERRORS:
    Missing import for 'SyntaxError' used in scripts\syntax_check.py

File: tests\manual\test_summarization_fix.py
  ERRORS:
    Missing import for 'test_summarization_fix' used in tests\manual\test_summarization_fix.py

File: tests\integration\test_video_pipeline.py
  ERRORS:
    Missing import for 'prop' used in tests\integration\test_video_pipeline.py
    Missing import for 'mock_exists' used in tests\integration\test_video_pipeline.py
    Missing import for 'mock_audio_task' used in tests\integration\test_video_pipeline.py
    Missing import for 'mock_processor' used in tests\integration\test_video_pipeline.py
    Missing import for 'mock_cv2_cap' used in tests\integration\test_video_pipeline.py
    Missing import for 'mock_probe' used in tests\integration\test_video_pipeline.py
    Missing import for 'mock_to_thread' used in tests\integration\test_video_pipeline.py

File: mypy
  ERRORS:
    scripts\syntax_check.py:112:5: error: Need type annotation for "warnings" (hint: "warnings: list[<type>] = ...")  [var-annotated]
    packages\morag-core\src\morag_core\interfaces\processor.py:45:42: error: Function "builtins.callable" is not valid as a type  [valid-type]
    scripts\static_analysis.py:27:9: error: Need type annotation for "errors" (hint: "errors: list[<type>] = ...")  [var-annotated]
    scripts\static_analysis.py:28:9: error: Need type annotation for "warnings" (hint: "warnings: list[<type>] = ...")  [var-annotated]
    scripts\static_analysis.py:113:9: error: Returning Any from function declared to return "tuple[list[str], list[str]]"  [no-any-return]
    scripts\static_analysis.py:160:9: error: "Sequence[str]" has no attribute "extend"  [attr-defined]
    scripts\static_analysis.py:166:13: error: "Sequence[str]" has no attribute "extend"  [attr-defined]
    scripts\static_analysis.py:167:13: error: "Sequence[str]" has no attribute "extend"  [attr-defined]
    scripts\static_analysis.py:171:13: error: "Sequence[str]" has no attribute "extend"  [attr-defined]
    scripts\static_analysis.py:172:13: error: "Sequence[str]" has no attribute "extend"  [attr-defined]
    scripts\static_analysis.py:202:13: error: "object" has no attribute "append"  [attr-defined]
    scripts\static_analysis.py:205:17: error: Value of type "object" is not indexable  [index]
    scripts\static_analysis.py:205:17: error: Unsupported target for indexed assignment ("object")  [index]
    scripts\static_analysis.py:206:17: error: Value of type "object" is not indexable  [index]
    scripts\static_analysis.py:206:17: error: Unsupported target for indexed assignment ("object")  [index]
    scripts\static_analysis.py:209:17: error: Value of type "object" is not indexable  [index]
    scripts\static_analysis.py:209:17: error: Unsupported target for indexed assignment ("object")  [index]
    scripts\static_analysis.py:210:17: error: Value of type "object" is not indexable  [index]
    scripts\static_analysis.py:210:17: error: Unsupported target for indexed assignment ("object")  [index]
    scripts\static_analysis.py:217:17: error: "object" has no attribute "append"  [attr-defined]
    scripts\static_analysis.py:224:17: error: Value of type "object" is not indexable  [index]
    scripts\static_analysis.py:224:17: error: Unsupported target for indexed assignment ("object")  [index]
    scripts\static_analysis.py:225:17: error: Value of type "object" is not indexable  [index]
    scripts\static_analysis.py:225:17: error: Unsupported target for indexed assignment ("object")  [index]
    scripts\static_analysis.py:230:17: error: "object" has no attribute "append"  [attr-defined]
    scripts\static_analysis.py:233:17: error: Value of type "object" is not indexable  [index]
    scripts\static_analysis.py:233:17: error: Unsupported target for indexed assignment ("object")  [index]
    scripts\static_analysis.py:234:17: error: Value of type "object" is not indexable  [index]
    scripts\static_analysis.py:234:17: error: Unsupported target for indexed assignment ("object")  [index]
    packages\morag\src\morag\result_processor.py:27:41: error: Incompatible default for argument "base_metadata" (default has type "None", argument has type "dict[str, Any]")  [assignment]
    packages\morag\src\morag\result_processor.py:45:13: error: Statement is unreachable  [unreachable]
    packages\morag\src\morag\result_processor.py:99:13: error: "Collection[str]" has no attribute "append"  [attr-defined]
    packages\morag\src\morag\result_processor.py:127:25: error: Item "str" of "Any | str" has no attribute "append"  [union-attr]
    packages\morag\src\morag\result_processor.py:129:25: error: Item "str" of "Any | str" has no attribute "append"  [union-attr]
    packages\morag\src\morag\result_processor.py:172:28: error: Incompatible default for argument "document_id" (default has type "None", argument has type "str")  [assignment]
    packages\morag\src\morag\result_processor.py:173:32: error: Incompatible default for argument "collection_name" (default has type "None", argument has type "str")  [assignment]
    packages\morag\src\morag\result_processor.py:189:13: error: Statement is unreachable  [unreachable]
    packages\morag\src\morag\result_processor.py:192:13: error: Statement is unreachable  [unreachable]
    packages\morag\tests\test_integration.py:42:16: error: Unsupported right operand type for in ("str | None")  [operator]

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 74
Total warnings: 327

File: packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
  ERRORS:
    Missing import for 'filters' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
    Missing import for 'query_embedding' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
    Missing import for 'facts' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
    Missing import for 'score_threshold' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\qdrant_operations\fact_vector_operations.py

File: tests\test_document_features.py
  ERRORS:
    Missing import for 'test_chunking_strategies' used in tests\test_document_features.py
    Missing import for 'test_chapter_detection' used in tests\test_document_features.py
    Missing import for 'main' used in tests\test_document_features.py
    Missing import for 'test_pdf_chapter_support' used in tests\test_document_features.py
    Missing import for 'test_json_output' used in tests\test_document_features.py
    Missing import for 'test_document_processor_integration' used in tests\test_document_features.py

File: packages\morag-reasoning\test_multi_hop_cli.py
  ERRORS:
    Missing import for 'max_depth' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'end' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'strategy' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'max_iterations' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'exit' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'RelationType' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'main' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'KeyboardInterrupt' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'start' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'model' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'max_paths' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'test_multi_hop_reasoning' used in packages\morag-reasoning\test_multi_hop_cli.py
    Missing import for 'limit' used in packages\morag-reasoning\test_multi_hop_cli.py

File: packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
  ERRORS:
    Missing import for 'get_recursive_fact_retrieval_service' used in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
    Missing import for 'request' used in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
    Missing import for 'perform_retrieval' used in packages\morag\src\morag\endpoints\recursive_fact_retrieval.py
    packages\morag\src\morag\endpoints\recursive_fact_retrieval.py:109: Dangerous use of eval/exec
    packages\morag\src\morag\endpoints\recursive_fact_retrieval.py:149: Dangerous use of eval/exec
    packages\morag\src\morag\endpoints\recursive_fact_retrieval.py:157: Dangerous use of eval/exec

File: examples\ai_error_handling_demo.py
  ERRORS:
    Missing import for 'demo_circuit_breaker' used in examples\ai_error_handling_demo.py
    Missing import for 'demo_performance_impact' used in examples\ai_error_handling_demo.py
    Missing import for 'get_ai_service_health' used in examples\ai_error_handling_demo.py
    Missing import for 'demo_error_classification' used in examples\ai_error_handling_demo.py
    Missing import for 'demo_health_monitoring' used in examples\ai_error_handling_demo.py
    Missing import for 'fast_operation' used in examples\ai_error_handling_demo.py
    Missing import for 'flaky_operation' used in examples\ai_error_handling_demo.py
    Missing import for 'main' used in examples\ai_error_handling_demo.py
    Missing import for 'universal_ai_handler' used in examples\ai_error_handling_demo.py
    Missing import for 'gemini_service' used in examples\ai_error_handling_demo.py
    Missing import for 'demo_comprehensive_health_report' used in examples\ai_error_handling_demo.py
    Missing import for 'fallback_operation' used in examples\ai_error_handling_demo.py
    Missing import for 'demo_retry_mechanism' used in examples\ai_error_handling_demo.py
    Missing import for 'execute_with_ai_resilience' used in examples\ai_error_handling_demo.py
    Missing import for 'demo_successful_operations' used in examples\ai_error_handling_demo.py
    Missing import for 'always_failing_operation' used in examples\ai_error_handling_demo.py
    Missing import for 'demo_fallback_mechanism' used in examples\ai_error_handling_demo.py
    Missing import for 'primary_operation' used in examples\ai_error_handling_demo.py

File: packages\morag-stages\tests\test_markdown_conversion.py
  ERRORS:
    Missing import for 'stage_test_framework' used in packages\morag-stages\tests\test_markdown_conversion.py

File: examples\gpu_cpu_fallback_demo.py
  ERRORS:
    Missing import for 'WhisperService' used in examples\gpu_cpu_fallback_demo.py
    Missing import for 'test_async_operations' used in examples\gpu_cpu_fallback_demo.py
    Missing import for 'EnhancedSpeakerDiarization' used in examples\gpu_cpu_fallback_demo.py

File: packages\morag-graph\src\morag_graph\updates\checksum_manager.py
  ERRORS:
    Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\updates\checksum_manager.py
    Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\updates\checksum_manager.py

File: packages\morag-reasoning\src\morag_reasoning\fact_critic_agent.py
  ERRORS:
    Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\fact_critic_agent.py
    Missing import for 'batch_size' used in packages\morag-reasoning\src\morag_reasoning\fact_critic_agent.py
    Missing import for 'raw_facts' used in packages\morag-reasoning\src\morag_reasoning\fact_critic_agent.py

File: tests\test_03_database_init.py
  ERRORS:
    Missing import for 'mock_service' used in tests\test_03_database_init.py
    tests\test_03_database_init.py:32: Dangerous use of eval/exec

File: refactor\archived_code\ingestion_coordinator_original.py
  ERRORS:
    Missing import for 'text' used in refactor\archived_code\ingestion_coordinator_original.py
    Missing import for 'batch_size' used in refactor\archived_code\ingestion_coordinator_original.py
    Missing import for 'doc_id' used in refactor\archived_code\ingestion_coordinator_original.py
    Missing import for 'replace_existing' used in refactor\archived_code\ingestion_coordinator_original.py

File: packages\morag-graph\run_ingestion.py
  ERRORS:
    Missing import for 'neo4j_password' used in packages\morag-graph\run_ingestion.py
    Missing import for 'clear_existing' used in packages\morag-graph\run_ingestion.py
    Missing import for 'exit' used in packages\morag-graph\run_ingestion.py
    Missing import for 'main' used in packages\morag-graph\run_ingestion.py
    Missing import for 'neo4j_uri' used in packages\morag-graph\run_ingestion.py
    Missing import for 'neo4j_user' used in packages\morag-graph\run_ingestion.py
    Missing import for 'ingest_to_neo4j' used in packages\morag-graph\run_ingestion.py

File: packages\morag\src\morag\database_handler.py
  ERRORS:
    Missing import for 'embeddings_data' used in packages\morag\src\morag\database_handler.py
    Missing import for 'ingest_data' used in packages\morag\src\morag\database_handler.py
    Missing import for 'database_configs' used in packages\morag\src\morag\database_handler.py

File: packages\morag-graph\src\morag_graph\extraction\entity_normalizer.py
  ERRORS:
    Missing import for 'entities' used in packages\morag-graph\src\morag_graph\extraction\entity_normalizer.py

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 5861: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 162
Total warnings: 276

File: packages\morag-document\examples\process_text.py
  ERRORS:
    Missing import for 'main' used in packages\morag-document\examples\process_text.py

File: packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
  ERRORS:
    Missing import for 'overrides' used in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
    Missing import for 'relationship_id' used in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py
    Missing import for 'r' used in packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py

File: packages\morag-stages\tests\test_error_handling.py
  ERRORS:
    Missing import for 'failing_method' used in packages\morag-stages\tests\test_error_handling.py
    Missing import for 'test_function' used in packages\morag-stages\tests\test_error_handling.py

File: packages\morag\src\morag\orchestrator.py
  ERRORS:
    Missing import for 'limit' used in packages\morag\src\morag\orchestrator.py
    Missing import for 'filters' used in packages\morag\src\morag\orchestrator.py
    Missing import for 'items' used in packages\morag\src\morag\orchestrator.py
    Missing import for 'options' used in packages\morag\src\morag\orchestrator.py
    Missing import for 'query' used in packages\morag\src\morag\orchestrator.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_operations\base_operations.py
  ERRORS:
    Missing import for 'parameters' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\base_operations.py
    Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\base_operations.py
    Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\base_operations.py

File: packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
  ERRORS:
    Missing import for 'source_doc_id' used in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
    Missing import for 'context' used in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
    Missing import for 'NotImplementedError' used in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py
    Missing import for 'extractor' used in packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py

File: cli\ingest-markdown-folder.py
  ERRORS:
    Missing import for 'language' used in cli\ingest-markdown-folder.py
    Missing import for 'KeyboardInterrupt' used in cli\ingest-markdown-folder.py
    Missing import for 'process_with_semaphore' used in cli\ingest-markdown-folder.py
    Missing import for 'process_markdown_folder' used in cli\ingest-markdown-folder.py
    Missing import for 'dry_run' used in cli\ingest-markdown-folder.py
    Missing import for 'max_concurrent' used in cli\ingest-markdown-folder.py
    Missing import for 'process_single_markdown_file' used in cli\ingest-markdown-folder.py

File: packages\morag-reasoning\src\morag_reasoning\citation_integrator.py
  ERRORS:
    Missing import for 'm' used in packages\morag-reasoning\src\morag_reasoning\citation_integrator.py
    Missing import for 'facts' used in packages\morag-reasoning\src\morag_reasoning\citation_integrator.py

File: packages\morag-graph\src\morag_graph\updates\cleanup_manager.py
  ERRORS:
    Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\updates\cleanup_manager.py

File: packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
  ERRORS:
    Missing import for 'f' used in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
    Missing import for 'min_confidence' used in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
    Missing import for 'max_facts' used in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py
    Missing import for 'texts' used in packages\morag-core\src\morag_core\agents\fact_extraction_agent.py

File: packages\morag-stages\src\morag_stages\manager.py
  ERRORS:
    Missing import for 'stage_types' used in packages\morag-stages\src\morag_stages\manager.py
    Missing import for 'initial_input_files' used in packages\morag-stages\src\morag_stages\manager.py

File: tests\unit\test_video_tasks.py
  ERRORS:
    Missing import for 'mock_audio_task' used in tests\unit\test_video_tasks.py
    Missing import for 'mock_service' used in tests\unit\test_video_tasks.py
    Missing import for 'mock_processor' used in tests\unit\test_video_tasks.py

File: packages\morag-stages\tests\test_framework.py
  ERRORS:
    Missing import for 'AssertionError' used in packages\morag-stages\tests\test_framework.py
    Missing import for 'input_files' used in packages\morag-stages\tests\test_framework.py
    Missing import for 'stage_type' used in packages\morag-stages\tests\test_framework.py

File: packages\morag-audio\src\morag_audio\service.py
  ERRORS:
    Missing import for 'progress_callback' used in packages\morag-audio\src\morag_audio\service.py
    Missing import for 'markdown_content' used in packages\morag-audio\src\morag_audio\service.py
    Missing import for 'save_output' used in packages\morag-audio\src\morag_audio\service.py
    Missing import for 'output_format' used in packages\morag-audio\src\morag_audio\service.py

File: mypy
  ERRORS:
    packages\morag-core\src\morag_core\interfaces\converter.py:64:33: error: Function "builtins.callable" is not valid as a type  [valid-type]
    tests\cli\test-remote-debug.py:30:9: error: "Session" has no attribute "timeout"  [attr-defined]
    tests\cli\test-remote-debug.py:59:81: error: Incompatible default for argument "config" (default has type "None", argument has type "dict[str, Any]")  [assignment]
    tests\cli\test-remote-debug.py:84:17: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
    tests\cli\test-remote-debug.py:168:33: error: "object" has no attribute "append"  [attr-defined]
    tests\cli\test-remote-debug.py:176:33: error: "object" has no attribute "append"  [attr-defined]
    tests\cli\test-remote-debug.py:181:21: error: "object" has no attribute "append"  [attr-defined]
    tests\cli\test-remote-debug.py:185:17: error: "object" has no attribute "append"  [attr-defined]
    tests\cli\test-remote-debug.py:189:13: error: "object" has no attribute "append"  [attr-defined]
    tests\cli\test-remote-debug.py:193:42: error: Argument 1 to "len" has incompatible type "object"; expected "Sized"  [arg-type]
    tests\cli\test-remote-debug.py:194:26: error: "object" has no attribute "__iter__"; maybe "__dir__" or "__str__"? (not iterable)  [attr-defined]
    tests\cli\test-remote-debug.py:202:81: error: Incompatible default for argument "config" (default has type "None", argument has type "dict[str, Any]")  [assignment]
    tests\cli\test-remote-debug.py:221:9: error: Unsupported target for indexed assignment ("object")  [index]
    tests\cli\test-remote-debug.py:233:13: error: Value of type "object" is not indexable  [index]
    tests\cli\test-remote-debug.py:236:13: error: Value of type "object" is not indexable  [index]
    tests\cli\test-remote-debug.py:291:29: error: Argument 2 to "test_input_type" of "MoRAGTester" has incompatible type "Collection[str]"; expected "list[str]"  [arg-type]
    tests\cli\test-remote-debug.py:291:50: error: Argument 3 to "test_input_type" of "MoRAGTester" has incompatible type "Collection[str]"; expected "dict[str, Any]"  [arg-type]
    agents\config\manager.py:177:50: error: Incompatible default for argument "env_prefix" (default has type "None", argument has type "str")  [assignment]
    packages\morag\src\morag\utils\query_validator.py:19:27: error: Incompatible types in assignment (expression has type "None", variable has type "list[str]")  [assignment]
    packages\morag\src\morag\utils\query_validator.py:23:13: error: Statement is unreachable  [unreachable]
    packages\morag\src\morag\utils\query_validator.py:89:57: error: Argument 1 to "join" of "str" has incompatible type "list[str | None]"; expected "Iterable[str]"  [arg-type]
    packages\morag\src\morag\utils\query_validator.py:134:9: error: Need type annotation for "errors" (hint: "errors: list[<type>] = ...")  [var-annotated]
    packages\morag\src\morag\utils\query_validator.py:247:9: error: Incompatible types in assignment (expression has type "float", variable has type "int")  [assignment]
    packages\morag\src\morag\utils\query_validator.py:249:9: error: Incompatible types in assignment (expression has type "float", variable has type "int")  [assignment]
    packages\morag\src\morag\utils\query_validator.py:250:9: error: Incompatible types in assignment (expression has type "float", variable has type "int")  [assignment]
    packages\morag-graph\src\morag_graph\updates\cleanup_manager.py:25:13: error: Statement is unreachable  [unreachable]
    packages\morag-graph\src\morag_graph\updates\cleanup_manager.py:27:13: error: Statement is unreachable  [unreachable]
    packages\morag-graph\src\morag_graph\updates\cleanup_manager.py:29:13: error: Statement is unreachable  [unreachable]
    packages\morag-stages\tests\test_error_handling.py:127:12: error: Unsupported right operand type for in ("str | None")  [operator]
    packages\morag-stages\tests\test_error_handling.py:135:12: error: Unsupported right operand type for in ("str | None")  [operator]
    packages\morag-stages\tests\test_error_handling.py:143:12: error: Unsupported right operand type for in ("str | None")  [operator]
    packages\morag-document\src\morag_document\converters\document_converters.py:79:29: error: Argument "source_name" to "DocumentMetadata" has incompatible type "str | int"; expected "str"  [arg-type]
    packages\morag-document\src\morag_document\converters\document_converters.py:81:27: error: Argument "mime_type" to "DocumentMetadata" has incompatible type "str | int"; expected "str | None"  [arg-type]
    packages\morag-document\src\morag_document\converters\document_converters.py:82:27: error: Argument "file_size" to "DocumentMetadata" has incompatible type "str | int"; expected "int | None"  [arg-type]
    packages\morag-document\src\morag_document\converters\document_converters.py:239:5: error: Signature of "assess_quality" incompatible with supertype "morag_core.interfaces.converter.BaseConverter"  [override]
    packages\morag-stages\src\morag_stages\manager.py:90:13: error: Statement is unreachable  [unreachable]
    packages\morag-stages\src\morag_stages\manager.py:121:13: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-stages\src\morag_stages\manager.py:190:13: error: Statement is unreachable  [unreachable]
    packages\morag\src\morag\orchestrator.py:60:56: error: Argument 1 to "_process_web_content" of "MoRAGOrchestrator" has incompatible type "str | Path | dict[str, Any]"; expected "str | dict[str, Any]"  [arg-type]
    packages\morag\src\morag\orchestrator.py:62:60: error: Argument 1 to "_process_youtube_content" of "MoRAGOrchestrator" has incompatible type "str | Path | dict[str, Any]"; expected "str | dict[str, Any]"  [arg-type]
    packages\morag\src\morag\orchestrator.py:86:9: error: Returning Any from function declared to return "ProcessingResult"  [no-any-return]
    packages\morag\src\morag\orchestrator.py:92:9: error: Returning Any from function declared to return "ProcessingResult"  [no-any-return]
    packages\morag\src\morag\orchestrator.py:100:9: error: Returning Any from function declared to return "ProcessingResult"  [no-any-return]
    packages\morag\src\morag\orchestrator.py:110:9: error: Returning Any from function declared to return "ProcessingResult"  [no-any-return]
    packages\morag\src\morag\orchestrator.py:118:9: error: Returning Any from function declared to return "ProcessingResult"  [no-any-return]
    packages\morag\src\morag\orchestrator.py:126:9: error: Returning Any from function declared to return "ProcessingResult"  [no-any-return]
    packages\morag\src\morag\orchestrator.py:192:9: error: Returning Any from function declared to return "list[dict[str, Any]]"  [no-any-return]
    packages\morag\src\morag\orchestrator.py:200:9: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
    packages\morag-audio\src\morag_audio\service.py:59:31: error: Incompatible types in assignment (expression has type "None", variable has type "Path")  [assignment]
    packages\morag-audio\src\morag_audio\service.py:110:28: error: Function "builtins.callable" is not valid as a type  [valid-type]
    packages\morag-audio\src\morag_audio\service.py:146:50: error: "GeminiEmbeddingService" has no attribute "embed_text"  [attr-defined]
    packages\morag-audio\src\morag_audio\service.py:155:48: error: "GeminiEmbeddingService" has no attribute "embed_batch"  [attr-defined]
    packages\morag-audio\src\morag_audio\service.py:161:25: error: "AudioSegment" has no attribute "embedding"  [attr-defined]
    packages\morag-audio\src\morag_audio\service.py:188:41: error: Incompatible types in assignment (expression has type "dict[str, Any]", variable has type "str | None")  [assignment]
    packages\morag-graph\src\morag_graph\extraction\enhanced_entity_extractor.py:15:10: error: Incompatible types in assignment (expression has type "None", variable has type Module)  [assignment]
    packages\morag-audio\tests\test_processor.py:77:9: error: Statement is unreachable  [unreachable]
    packages\morag-audio\tests\test_processor.py:157:36: error: Argument 1 to "AudioSegment" has incompatible type "str"; expected "float"  [arg-type]
    packages\morag-audio\tests\test_processor.py:157:56: error: Argument 3 to "AudioSegment" has incompatible type "float"; expected "str"  [arg-type]
    packages\morag-audio\tests\test_processor.py:157:61: error: Argument 4 to "AudioSegment" has incompatible type "float"; expected "str | None"  [arg-type]
    packages\morag-audio\tests\test_processor.py:157:67: error: Argument 5 to "AudioSegment" has incompatible type "str"; expected "float"  [arg-type]
    packages\morag-audio\tests\test_processor.py:158:36: error: Argument 1 to "AudioSegment" has incompatible type "str"; expected "float"  [arg-type]
    packages\morag-audio\tests\test_processor.py:158:58: error: Argument 3 to "AudioSegment" has incompatible type "float"; expected "str"  [arg-type]
    packages\morag-audio\tests\test_processor.py:158:63: error: Argument 4 to "AudioSegment" has incompatible type "float"; expected "str | None"  [arg-type]
    packages\morag-audio\tests\test_processor.py:158:69: error: Argument 5 to "AudioSegment" has incompatible type "str"; expected "float"  [arg-type]
    packages\morag-audio\tests\test_processor.py:173:24: error: Too many arguments for "_transcribe_audio" of "AudioProcessor"  [call-arg]
    packages\morag-audio\tests\test_processor.py:176:9: error: Statement is unreachable  [unreachable]
    packages\morag-audio\tests\test_processor.py:200:19: error: Too many arguments for "_transcribe_audio" of "AudioProcessor"  [call-arg]
    packages\morag-audio\tests\test_processor.py:257:23: error: Unexpected keyword argument "text" for "AudioProcessingResult"  [call-arg]
    packages\morag-audio\tests\test_processor.py:257:23: error: Unexpected keyword argument "language" for "AudioProcessingResult"  [call-arg]
    packages\morag-audio\tests\test_processor.py:257:23: error: Unexpected keyword argument "confidence" for "AudioProcessingResult"  [call-arg]
    packages\morag-audio\tests\test_processor.py:257:23: error: Unexpected keyword argument "duration" for "AudioProcessingResult"  [call-arg]
    packages\morag-audio\tests\test_processor.py:257:23: error: Unexpected keyword argument "model_used" for "AudioProcessingResult"  [call-arg]
    packages\morag-audio\tests\test_processor.py:263:40: error: Argument 1 to "AudioSegment" has incompatible type "str"; expected "float"  [arg-type]
    packages\morag-audio\tests\test_processor.py:263:60: error: Argument 3 to "AudioSegment" has incompatible type "float"; expected "str"  [arg-type]
    packages\morag-audio\tests\test_processor.py:263:65: error: Argument 4 to "AudioSegment" has incompatible type "float"; expected "str | None"  [arg-type]
    packages\morag-audio\tests\test_processor.py:263:71: error: Argument 5 to "AudioSegment" has incompatible type "str"; expected "float"  [arg-type]
    packages\morag-audio\tests\test_processor.py:264:40: error: Argument 1 to "AudioSegment" has incompatible type "str"; expected "float"  [arg-type]
    packages\morag-audio\tests\test_processor.py:264:62: error: Argument 3 to "AudioSegment" has incompatible type "float"; expected "str"  [arg-type]
    packages\morag-audio\tests\test_processor.py:264:67: error: Argument 4 to "AudioSegment" has incompatible type "float"; expected "str | None"  [arg-type]
    packages\morag-audio\tests\test_processor.py:264:73: error: Argument 5 to "AudioSegment" has incompatible type "str"; expected "float"  [arg-type]
    packages\morag-audio\tests\test_processor.py:285:20: error: "AudioProcessingResult" has no attribute "language"  [attr-defined]
    packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py:303:24: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py:595:15: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py:611:15: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\maintenance\relationship_merger.py:647:16: error: Incompatible return value type (got "dict[str, Any]", expected "RelationshipMergerResult")  [return-value]
    packages\morag-reasoning\src\morag_reasoning\citation_integrator.py:40:32: error: Incompatible types in assignment (expression has type "None", variable has type "dict[str, Any]")  [assignment]
    packages\morag-reasoning\src\morag_reasoning\citation_integrator.py:95:23: error: Need type annotation for "_cache"  [var-annotated]
    packages\morag-reasoning\src\morag_reasoning\citation_integrator.py:249:42: error: Argument "source_reference" to "CitationMatch" has incompatible type "SourceReference | None"; expected "SourceReference"  [arg-type]
    packages\morag-reasoning\src\morag_reasoning\citation_integrator.py:349:9: error: Need type annotation for "sentence_matches" (hint: "sentence_matches: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-stages\tests\test_framework.py:56:21: error: Unsupported left operand type for / ("None")  [operator]
    packages\morag-stages\tests\test_framework.py:58:9: error: Returning Any from function declared to return "Path"  [no-any-return]
    packages\morag-stages\tests\test_framework.py:132:21: error: Unsupported left operand type for / ("None")  [operator]
    packages\morag-stages\tests\test_framework.py:134:9: error: Returning Any from function declared to return "Path"  [no-any-return]
    packages\morag-stages\tests\test_framework.py:208:21: error: Unsupported left operand type for / ("None")  [operator]
    packages\morag-stages\tests\test_framework.py:210:9: error: Returning Any from function declared to return "Path"  [no-any-return]
    packages\morag-stages\tests\test_framework.py:217:49: error: Argument "output_dir" to "StageContext" has incompatible type "Any | None"; expected "Path"  [arg-type]
    packages\morag-stages\tests\test_framework.py:230:22: error: Item "None" of "Any | None" has no attribute "execute_stage"  [union-attr]
    cli\ingest-markdown-folder.py:127:16: error: Function "builtins.any" is not valid as a type  [valid-type]
    cli\ingest-markdown-folder.py:183:39: error: Argument "processing_result" to "ingest_content" of "IngestionCoordinator" has incompatible type "ServiceResultWrapper"; expected "ProcessingResult"  [arg-type]
    cli\ingest-markdown-folder.py:204:18: error: Incompatible types in assignment (expression has type "ProcessingResult", variable has type "ServiceResultWrapper")  [assignment]
    cli\ingest-markdown-folder.py:235:35: error: Argument "processing_result" to "ingest_content" of "IngestionCoordinator" has incompatible type "ServiceResultWrapper"; expected "ProcessingResult"  [arg-type]
    cli\ingest-markdown-folder.py:269:16: error: Function "builtins.any" is not valid as a type  [valid-type]
    cli\ingest-markdown-folder.py:334:38: error: Argument 1 to "append" of "list" has incompatible type "Any | BaseException"; expected "dict[str, str]"  [arg-type]
    cli\ingest-markdown-folder.py:364:9: error: Missing named argument "port" for "DatabaseServerConfig"  [call-arg]
    cli\ingest-markdown-folder.py:478:30: error: any? has no attribute "__iter__" (not iterable)  [attr-defined]
    tests\unit\test_video_tasks.py:7:1: error: Module "morag_video" has no attribute "VideoMetadata"  [attr-defined]
    tests\unit\test_video_tasks.py:7:1: error: Module "morag_video" has no attribute "VideoProcessingResult"  [attr-defined]
    packages\morag-document\examples\process_text.py:70:9: error: Unsupported target for indexed assignment ("ServiceConfig")  [index]
    packages\morag-document\examples\process_text.py:71:9: error: Unsupported target for indexed assignment ("ServiceConfig")  [index]
    packages\morag-document\examples\process_text.py:97:25: error: Item "None" of "Any | None" has no attribute "metadata"  [union-attr]
    packages\morag-document\examples\process_text.py:98:24: error: Item "None" of "Any | None" has no attribute "metadata"  [union-attr]
    packages\morag-document\examples\process_text.py:99:30: error: Item "None" of "Any | None" has no attribute "metadata"  [union-attr]
    packages\morag-document\examples\process_text.py:100:30: error: Item "None" of "Any | None" has no attribute "chunks"  [union-attr]
    packages\morag-document\examples\process_text.py:105:35: error: Item "None" of "Any | None" has no attribute "chunks"  [union-attr]
    packages\morag-document\examples\process_text.py:114:56: error: Argument 1 to "summarize_document" of "DocumentService" has incompatible type "Any | None"; expected "Document"  [arg-type]
    packages\morag-document\examples\process_text.py:123:31: error: "type[ChunkingStrategy]" has no attribute "SECTION"  [attr-defined]
    packages\morag-document\examples\process_text.py:128:54: error: Item "None" of "Any | None" has no attribute "chunks"  [union-attr]
    packages\morag-document\examples\process_text.py:129:35: error: Item "None" of "Any | None" has no attribute "chunks"  [union-attr]

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 460: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 29
Total warnings: 218

File: packages\morag-graph\test_dynamic_extraction.py
  ERRORS:
    Missing import for 'test_dynamic_extraction' used in packages\morag-graph\test_dynamic_extraction.py

File: packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
  ERRORS:
    Missing import for 'fid_batch' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'child_id' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'process_candidate' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'detach' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'parent_id' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'config_overrides' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'limit_keywords' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'llm_inference' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'proposal_ids' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py
    Missing import for 'run_keyword_hierarchization' used in packages\morag-graph\src\morag_graph\maintenance\keyword_hierarchization.py

File: scripts\check_imports.py
  ERRORS:
    Missing import for 'SyntaxError' used in scripts\check_imports.py

File: tools\remote-converter\remote_converter_minimal.py
  ERRORS:
    Missing import for 'test_audio_processing' used in tools\remote-converter\remote_converter_minimal.py

File: tests\unit\processors\test_audio_processor.py
  ERRORS:
    Missing import for 'file_paths' used in tests\unit\processors\test_audio_processor.py

File: agents\generation\explanation.py
  ERRORS:
    Missing import for 'kwargs' used in agents\generation\explanation.py
    Missing import for 'explanation_type' used in agents\generation\explanation.py
    Missing import for 'audience' used in agents\generation\explanation.py
    Missing import for 'topic' used in agents\generation\explanation.py
    Missing import for 'context' used in agents\generation\explanation.py

File: packages\morag\src\morag\utils\file_upload.py
  ERRORS:
    Missing import for 'RuntimeError' used in packages\morag\src\morag\utils\file_upload.py
    Missing import for 'x' used in packages\morag\src\morag\utils\file_upload.py
    Missing import for 'allow_intermediate' used in packages\morag\src\morag\utils\file_upload.py
    Missing import for 'file' used in packages\morag\src\morag\utils\file_upload.py

File: tests\integration\test_youtube_pipeline.py
  ERRORS:
    Missing import for 'mock_celery_task' used in tests\integration\test_youtube_pipeline.py
    Missing import for 'mock_qdrant_service' used in tests\integration\test_youtube_pipeline.py
    Missing import for 'mock_youtube_metadata' used in tests\integration\test_youtube_pipeline.py
    Missing import for 'tmp_path' used in tests\integration\test_youtube_pipeline.py
    Missing import for 'mock_gemini_service' used in tests\integration\test_youtube_pipeline.py

File: agents\test_simple_import.py
  ERRORS:
    Missing import for 'exit' used in agents\test_simple_import.py

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8d in position 3699: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 39
Total warnings: 320

File: refactor\archived_code\fact_generator_original.py
  ERRORS:
    Missing import for 'x' used in refactor\archived_code\fact_generator_original.py

File: tests\unit\test_whisper_service.py
  ERRORS:
    Missing import for 'mock_get_model' used in tests\unit\test_whisper_service.py
    Missing import for 'mock_transcribe_audio' used in tests\unit\test_whisper_service.py

File: packages\morag-graph\run_tests.py
  ERRORS:
    Missing import for 'KeyboardInterrupt' used in packages\morag-graph\run_tests.py
    Missing import for 'exit' used in packages\morag-graph\run_tests.py
    Missing import for 'FileNotFoundError' used in packages\morag-graph\run_tests.py

File: packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
  ERRORS:
    Missing import for 'config_overrides' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
    Missing import for 'k_id' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
    Missing import for 'process_parent' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
    Missing import for 'row' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
    Missing import for 'llm_inference' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
    Missing import for 'run_keyword_linking' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\maintenance\keyword_linking.py

File: packages\morag-graph\src\morag_graph\extraction\fact_extractor.py
  ERRORS:
    Missing import for 'chunk_text' used in packages\morag-graph\src\morag_graph\extraction\fact_extractor.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
  ERRORS:
    Missing import for 'relation_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
    Missing import for 'entity_name' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
    Missing import for 'relation_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
    Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
    Missing import for 'direction' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py
    Missing import for 'relation_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\relation_operations.py

File: packages\morag\src\morag\graph_extractor_wrapper.py
  ERRORS:
    Missing import for 'content' used in packages\morag\src\morag\graph_extractor_wrapper.py
    Missing import for 'language' used in packages\morag\src\morag\graph_extractor_wrapper.py

File: packages\morag-graph\src\morag_graph\maintenance\isolated_nodes_cleanup.py
  ERRORS:
    Missing import for 'config_overrides' used in packages\morag-graph\src\morag_graph\maintenance\isolated_nodes_cleanup.py

File: tests\test_15_integration.py
  ERRORS:
    Missing import for 'mock_generate_embedding' used in tests\test_15_integration.py

File: packages\morag-graph\test_neo4j_ingestion.py
  ERRORS:
    Missing import for 'test_neo4j_connection' used in packages\morag-graph\test_neo4j_ingestion.py
    Missing import for 'load_extracted_data' used in packages\morag-graph\test_neo4j_ingestion.py
    Missing import for 'file_path' used in packages\morag-graph\test_neo4j_ingestion.py
    Missing import for 'entities_data' used in packages\morag-graph\test_neo4j_ingestion.py
    Missing import for 'ingest_relations' used in packages\morag-graph\test_neo4j_ingestion.py
    Missing import for 'relations_data' used in packages\morag-graph\test_neo4j_ingestion.py
    Missing import for 'query_graph_stats' used in packages\morag-graph\test_neo4j_ingestion.py
    Missing import for 'main' used in packages\morag-graph\test_neo4j_ingestion.py
    Missing import for 'ingest_entities' used in packages\morag-graph\test_neo4j_ingestion.py

File: packages\morag-services\src\morag_services\contextual_retrieval.py
  ERRORS:
    Missing import for 'collection_name' used in packages\morag-services\src\morag_services\contextual_retrieval.py
    Missing import for 'max_length' used in packages\morag-services\src\morag_services\contextual_retrieval.py
    Missing import for 'vector_storage' used in packages\morag-services\src\morag_services\contextual_retrieval.py
    Missing import for 'max_context_length' used in packages\morag-services\src\morag_services\contextual_retrieval.py
    Missing import for 'document' used in packages\morag-services\src\morag_services\contextual_retrieval.py
    Missing import for 'text' used in packages\morag-services\src\morag_services\contextual_retrieval.py

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 1268: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 50
Total warnings: 391

File: scripts\run_keyword_hierarchization.py
  ERRORS:
    Missing import for 'main_async' used in scripts\run_keyword_hierarchization.py
    Missing import for 'v' used in scripts\run_keyword_hierarchization.py

File: scripts\test_docling_docker.py
  ERRORS:
    Missing import for 'run_conversion' used in scripts\test_docling_docker.py

File: packages\morag-document\src\morag_document\converters\text.py
  ERRORS:
    Missing import for 'format_type' used in packages\morag-document\src\morag_document\converters\text.py

File: tests\manual\test_qdrant_connection.py
  ERRORS:
    Missing import for 'test_qdrant_connection' used in tests\manual\test_qdrant_connection.py

File: packages\morag-graph\tests\test_graph_builder.py
  ERRORS:
    Missing import for 'entity_id' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'relation_id' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'relation_type' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'limit' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'relation_ids' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'relations' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'direction' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'graph' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'query' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'target_entity_id' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'entity_type' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'mock_relation_extract' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'entity_ids' used in packages\morag-graph\tests\test_graph_builder.py
    Missing import for 'source_entity_id' used in packages\morag-graph\tests\test_graph_builder.py

File: packages\morag-core\src\morag_core\services\language_detection.py
  ERRORS:
    Missing import for 'OSError' used in packages\morag-core\src\morag_core\services\language_detection.py

File: packages\morag-document\src\morag_document\services\markitdown_service.py
  ERRORS:
    Missing import for 'UnicodeDecodeError' used in packages\morag-document\src\morag_document\services\markitdown_service.py

File: tests\test_chunk_size_config.py
  ERRORS:
    Missing import for 'AssertionError' used in tests\test_chunk_size_config.py

File: tests\manual\test_qdrant_network.py
  ERRORS:
    Missing import for 'test_httpx_request' used in tests\manual\test_qdrant_network.py
    Missing import for 'main' used in tests\manual\test_qdrant_network.py

File: scripts\install_morag.py
  ERRORS:
    Missing import for 'RuntimeError' used in scripts\install_morag.py

File: packages\morag-graph\src\morag_graph\extraction\base.py
  ERRORS:
    Missing import for 'text' used in packages\morag-graph\src\morag_graph\extraction\base.py

File: mypy
  ERRORS:
    tests\cli\test-document.py:48:64: error: Incompatible default for argument "config" (default has type "None", argument has type "dict[str, Any]")  [assignment]
    tests\cli\test-document.py:249:63: error: Argument 3 to "test_document_processing" has incompatible type "Any | None"; expected "dict[str, Any]"  [arg-type]
    scripts\demo_graph_extractor.py:128:13: error: Unsupported operand types for + ("object" and "int")  [operator]
    scripts\demo_graph_extractor.py:129:13: error: "object" has no attribute "append"  [attr-defined]
    scripts\demo_graph_extractor.py:130:13: error: "object" has no attribute "append"  [attr-defined]
    scripts\demo_graph_extractor.py:145:13: error: Unsupported operand types for + ("object" and "int")  [operator]
    scripts\demo_graph_extractor.py:146:13: error: "object" has no attribute "append"  [attr-defined]
    scripts\demo_graph_extractor.py:157:13: error: "object" has no attribute "append"  [attr-defined]
    packages\morag-core\src\morag_core\services\language_detection.py:107:17: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-youtube\src\morag_youtube\processor.py:69:43: error: Incompatible types in assignment (expression has type "YouTubeMetadata | None", base class "ProcessingResult" defined the type as "dict[str, Any]")  [assignment]
    packages\morag-youtube\src\morag_youtube\processor.py:271:35: error: List item 0 has incompatible type "str"; expected "dict[str, Any]"  [list-item]
    packages\morag-youtube\src\morag_youtube\processor.py:374:28: error: Incompatible types in assignment (expression has type "float", variable has type "int")  [assignment]
    packages\morag-youtube\src\morag_youtube\processor.py:376:28: error: Incompatible types in assignment (expression has type "float", variable has type "int")  [assignment]
    packages\morag-youtube\src\morag_youtube\processor.py:434:34: error: Argument "transcript_languages" to "YouTubeDownloadResult" has incompatible type "list[str]"; expected "list[dict[str, Any]]"  [arg-type]
    packages\morag-youtube\src\morag_youtube\processor.py:532:15: error: Argument 1 of "process" is incompatible with supertype "morag_core.interfaces.processor.BaseProcessor"; supertype defines the argument type as "str | Path"  [override]
    packages\morag-graph\tests\test_fact_models.py:32:16: error: "Fact" has no attribute "subject"  [attr-defined]
    packages\morag-graph\tests\test_fact_models.py:33:16: error: "Fact" has no attribute "object"  [attr-defined]
    packages\morag-graph\tests\test_fact_models.py:34:16: error: "Fact" has no attribute "approach"  [attr-defined]
    packages\morag-graph\tests\test_fact_models.py:35:16: error: "Fact" has no attribute "solution"  [attr-defined]
    packages\morag-graph\tests\test_fact_models.py:380:16: error: "type[FactRelationType]" has no attribute "TEMPORAL_ORDER"  [attr-defined]
    tests\test_chunk_size_config.py:13:1: error: Module "morag_core.config" has no attribute "reset_settings"; maybe "get_settings"?  [attr-defined]
    packages\morag-document\src\morag_document\services\markitdown_service.py:129:13: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-document\src\morag_document\services\markitdown_service.py:161:29: error: Name "SimpleResult" already defined on line 149  [no-redef]
    packages\morag-document\src\morag_document\services\markitdown_service.py:170:20: error: Item "None" of "Any | None" has no attribute "convert"  [union-attr]

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 71
Total warnings: 195

File: packages\morag-audio\src\morag_audio\services\speaker_diarization.py
  ERRORS:
    Missing import for 'x' used in packages\morag-audio\src\morag_audio\services\speaker_diarization.py
    Missing import for 'OSError' used in packages\morag-audio\src\morag_audio\services\speaker_diarization.py

File: packages\morag-reasoning\tests\conftest.py
  ERRORS:
    Missing import for 'mock_generate' used in packages\morag-reasoning\tests\conftest.py
    Missing import for 'prompt' used in packages\morag-reasoning\tests\conftest.py

File: packages\morag\src\morag\dependencies.py
  ERRORS:
    Missing import for 'start_id' used in packages\morag\src\morag\dependencies.py
    Missing import for 'relation_filters' used in packages\morag\src\morag\dependencies.py
    Missing import for 'limit' used in packages\morag\src\morag\dependencies.py
    Missing import for 'get_connected_default_neo4j_storage' used in packages\morag\src\morag\dependencies.py
    Missing import for 'entity_type' used in packages\morag\src\morag\dependencies.py
    Missing import for 'name' used in packages\morag\src\morag\dependencies.py
    Missing import for 'get_connected_default_qdrant_storage' used in packages\morag\src\morag\dependencies.py
    Missing import for 'max_depth' used in packages\morag\src\morag\dependencies.py
    Missing import for 'entity_id' used in packages\morag\src\morag\dependencies.py
    Missing import for 'end_id' used in packages\morag\src\morag\dependencies.py
    Missing import for 'depth' used in packages\morag\src\morag\dependencies.py
    Missing import for 'max_results' used in packages\morag\src\morag\dependencies.py
    Missing import for 'query' used in packages\morag\src\morag\dependencies.py

File: tests\test_race_condition_integration.py
  ERRORS:
    Missing import for 'file_path' used in tests\test_race_condition_integration.py
    Missing import for 'FileNotFoundError' used in tests\test_race_condition_integration.py
    Missing import for 'simulate_worker_processing' used in tests\test_race_condition_integration.py

File: examples\page_based_chunking_demo.py
  ERRORS:
    Missing import for 'main' used in examples\page_based_chunking_demo.py
    Missing import for 'create_sample_document_chunks' used in examples\page_based_chunking_demo.py
    Missing import for 'demonstrate_chunking_strategies' used in examples\page_based_chunking_demo.py
    Missing import for 'demonstrate_page_based_chunking' used in examples\page_based_chunking_demo.py
    Missing import for 'DocumentParseResult' used in examples\page_based_chunking_demo.py

File: tests\manual\test_qdrant_auth.py
  ERRORS:
    Missing import for 'main' used in tests\manual\test_qdrant_auth.py
    Missing import for 'test_httpx_with_auth' used in tests\manual\test_qdrant_auth.py
    Missing import for 'test_qdrant_client_async' used in tests\manual\test_qdrant_auth.py

File: packages\morag-stages\src\morag_stages\error_handling.py
  ERRORS:
    Missing import for 'async_wrapper' used in packages\morag-stages\src\morag_stages\error_handling.py

File: packages\morag-reasoning\src\morag_reasoning\path_selection.py
  ERRORS:
    Missing import for 'strategy' used in packages\morag-reasoning\src\morag_reasoning\path_selection.py
    Missing import for 'start_entities' used in packages\morag-reasoning\src\morag_reasoning\path_selection.py
    Missing import for 'target_entities' used in packages\morag-reasoning\src\morag_reasoning\path_selection.py
    Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\path_selection.py

File: packages\morag-stages\src\morag_stages\stages\conversion_processors.py
  ERRORS:
    Missing import for 'config' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
    Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
    Missing import for 'UnicodeDecodeError' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
    Missing import for 'content_type' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py
    Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\stages\conversion_processors.py

File: packages\morag-stages\src\morag_stages\processors\audio_processor.py
  ERRORS:
    Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\audio_processor.py
    Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\audio_processor.py

File: packages\morag-stages\src\morag_stages\file_manager.py
  ERRORS:
    Missing import for 'x' used in packages\morag-stages\src\morag_stages\file_manager.py

File: tests\test_file_upload_api.py
  ERRORS:
    Missing import for 'mock_read' used in tests\test_file_upload_api.py
    Missing import for 'size' used in tests\test_file_upload_api.py

File: packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
  ERRORS:
    Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'relation' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'chunk_id' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'metadata' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'vector' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'relations' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py
    Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\qdrant_storage.py

File: packages\morag-reasoning\src\morag_reasoning\graph_traversal_agent.py
  ERRORS:
    Missing import for 't' used in packages\morag-reasoning\src\morag_reasoning\graph_traversal_agent.py

File: mypy
  ERRORS:
    packages\morag-graph\src\morag_graph\query\entity_extractor.py:7:1: error: Module "morag_graph.extraction" has no attribute "EntityExtractor"  [attr-defined]
    packages\morag-audio\tests\test_rest_transcription.py:128:20: error: "AudioSegment" has no attribute "start_time"  [attr-defined]
    packages\morag-audio\tests\test_rest_transcription.py:129:20: error: "AudioSegment" has no attribute "end_time"  [attr-defined]
    agents\tests\test_extraction_agents.py:96:20: error: "ExtractedFact" has no attribute "subject"  [attr-defined]
    agents\tests\test_extraction_agents.py:173:13: error: Missing named argument "context" for "ExtractedEntity"  [call-arg]
    agents\tests\test_extraction_agents.py:181:13: error: Missing named argument "context" for "ExtractedEntity"  [call-arg]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:25:5: error: Name "Annotation" already defined (possibly by an import)  [no-redef]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:28:5: error: Name "Segment" already defined (possibly by an import)  [no-redef]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:119:43: error: Argument 1 to "get_safe_device" has incompatible type "str"; expected "bool"  [arg-type]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:139:25: error: "None" has no attribute "to"  [attr-defined]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:150:29: error: "None" has no attribute "to"  [attr-defined]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:173:25: error: "None" has no attribute "to"  [attr-defined]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:210:9: error: Statement is unreachable  [unreachable]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:258:13: error: "None" has no attribute "instantiate"  [attr-defined]
    packages\morag-audio\src\morag_audio\services\speaker_diarization.py:268:16: error: "None" not callable  [misc]

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 132
Total warnings: 206

File: packages\morag\src\morag\ingestion_coordinator.py
  ERRORS:
    Missing import for 'content_type' used in packages\morag\src\morag\ingestion_coordinator.py
    Missing import for 'kwargs' used in packages\morag\src\morag\ingestion_coordinator.py
    Missing import for 'chunk_overlap' used in packages\morag\src\morag\ingestion_coordinator.py
    Missing import for 'chunk_size' used in packages\morag\src\morag\ingestion_coordinator.py

File: tests\unit\test_vision_service.py
  ERRORS:
    Missing import for 'mock_settings' used in tests\unit\test_vision_service.py
    Missing import for 'mock_model_class' used in tests\unit\test_vision_service.py

File: packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py
  ERRORS:
    Missing import for 'RuntimeError' used in packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py
    Missing import for 'OSError' used in packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py

File: tests\test_17_integration.py
  ERRORS:
    tests\test_17_integration.py:189: Dangerous use of eval/exec

File: packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
  ERRORS:
    Missing import for 'entities' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
    Missing import for 'create_keyword_entities' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
    Missing import for 'create_mandatory_relations' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
    Missing import for 'entities_dict' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
    Missing import for 'component_type' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py
    Missing import for 'facts' used in packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py

File: tests\cli\test-embedding-fix.py
  ERRORS:
    Missing import for 'test_embedding_service_instantiation' used in tests\cli\test-embedding-fix.py
    Missing import for 'main' used in tests\cli\test-embedding-fix.py

File: packages\morag\src\morag\endpoints\remote_jobs.py
  ERRORS:
    Missing import for 'request' used in packages\morag\src\morag\endpoints\remote_jobs.py
    Missing import for 'worker_id' used in packages\morag\src\morag\endpoints\remote_jobs.py
    Missing import for 'job_id' used in packages\morag\src\morag\endpoints\remote_jobs.py
    Missing import for 'service' used in packages\morag\src\morag\endpoints\remote_jobs.py
    Missing import for 'content_types' used in packages\morag\src\morag\endpoints\remote_jobs.py
    Missing import for 'result' used in packages\morag\src\morag\endpoints\remote_jobs.py
    Missing import for 'max_jobs' used in packages\morag\src\morag\endpoints\remote_jobs.py

File: packages\morag-embedding\src\morag_embedding\service.py
  ERRORS:
    Missing import for 'texts' used in packages\morag-embedding\src\morag_embedding\service.py
    Missing import for 'language' used in packages\morag-embedding\src\morag_embedding\service.py
    Missing import for '_generate_with_retry' used in packages\morag-embedding\src\morag_embedding\service.py
    Missing import for '_generate_summary_with_retry' used in packages\morag-embedding\src\morag_embedding\service.py
    Missing import for 'max_length' used in packages\morag-embedding\src\morag_embedding\service.py
    Missing import for '_generate_batch_with_retry' used in packages\morag-embedding\src\morag_embedding\service.py

File: packages\morag-audio\src\morag_audio\cli.py
  ERRORS:
    Missing import for 'process_audio' used in packages\morag-audio\src\morag_audio\cli.py

File: packages\morag-stages\src\morag_stages\processors\video_processor.py
  ERRORS:
    Missing import for 'output_file' used in packages\morag-stages\src\morag_stages\processors\video_processor.py
    Missing import for 'input_file' used in packages\morag-stages\src\morag_stages\processors\video_processor.py

File: packages\morag-reasoning\src\morag_reasoning\recursive_fact_retrieval_service.py
  ERRORS:
    Missing import for 'node_id' used in packages\morag-reasoning\src\morag_reasoning\recursive_fact_retrieval_service.py
    Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\recursive_fact_retrieval_service.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
  ERRORS:
    Missing import for 'graph' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'max_depth' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'search_term' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'direction' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'chunk' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'RuntimeError' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'database_name' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'entity_names' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'context' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'fact_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'relation_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'relations' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'min_cluster_size' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'query' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'relation' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'entities' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'relation_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'chunk_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'chunk_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'fact' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'relation_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'document' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'chunks' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'documents' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'max_clusters' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'entity' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'facts' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py
    Missing import for 'checksum' used in packages\morag-graph\src\morag_graph\storage\neo4j_storage.py

File: packages\morag\src\morag\endpoints\intelligent_retrieval.py
  ERRORS:
    Missing import for 'request' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'base_delay' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'retry_on_overload' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'func' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'exponential_base' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'jitter' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'max_delay' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'get_intelligent_retrieval_service' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'perform_retrieval' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    Missing import for 'max_retries' used in packages\morag\src\morag\endpoints\intelligent_retrieval.py
    packages\morag\src\morag\endpoints\intelligent_retrieval.py:200: Dangerous use of eval/exec
    packages\morag\src\morag\endpoints\intelligent_retrieval.py:224: Dangerous use of eval/exec
    packages\morag\src\morag\endpoints\intelligent_retrieval.py:257: Dangerous use of eval/exec
    packages\morag\src\morag\endpoints\intelligent_retrieval.py:281: Dangerous use of eval/exec

File: packages\morag-image\src\morag_image\cli.py
  ERRORS:
    Missing import for 'main' used in packages\morag-image\src\morag_image\cli.py
    Missing import for 'process_single_image' used in packages\morag-image\src\morag_image\cli.py
    Missing import for 'max_concurrency' used in packages\morag-image\src\morag_image\cli.py
    Missing import for 'dir_path' used in packages\morag-image\src\morag_image\cli.py
    Missing import for 'process_directory' used in packages\morag-image\src\morag_image\cli.py
    Missing import for 'file_path' used in packages\morag-image\src\morag_image\cli.py

File: mypy
  ERRORS:
    packages\morag-image\src\morag_image\cli.py:85:5: error: Need type annotation for "image_files" (hint: "image_files: list[<type>] = ...")  [var-annotated]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:28:5: error: Name "ValidationError" already defined (possibly by an import)  [no-redef]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:33:5: error: All conditional function variants must have identical signatures  [misc]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:219:18: error: "type[FactGeneratorConfig]" has no attribute "from_context"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:222:26: error: Unexpected keyword argument "stage_type" for "StageMetadata"  [call-arg]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:222:26: error: Unexpected keyword argument "input_count" for "StageMetadata"  [call-arg]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:222:26: error: Unexpected keyword argument "config" for "StageMetadata"  [call-arg]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:235:24: error: Unexpected keyword argument "error" for "StageResult"  [call-arg]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:318:36: error: Value of type "object" is not indexable  [index]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:319:39: error: Value of type "object" is not indexable  [index]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:320:40: error: Value of type "object" is not indexable  [index]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:334:31: error: Value of type "object" is not indexable  [index]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:353:26: error: "type[StageStatus]" has no attribute "PARTIAL"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:359:13: error: "StageMetadata" has no attribute "output_count"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:360:13: error: "StageMetadata" has no attribute "success_rate"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:363:13: error: "StageMetadata" has no attribute "statistics"  [attr-defined]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:369:20: error: Unexpected keyword argument "outputs" for "StageResult"  [call-arg]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:369:20: error: Unexpected keyword argument "errors" for "StageResult"  [call-arg]
    packages\morag-stages\src\morag_stages\stages\fact_generation_stage.py:377:20: error: Unexpected keyword argument "error" for "StageResult"  [call-arg]
    packages\morag-graph\src\morag_graph\storage\neo4j_storage.py:78:49: error: Argument 1 to "DocumentOperations" has incompatible type "AsyncDriver | None"; expected "AsyncDriver"  [arg-type]
    packages\morag-graph\src\morag_graph\storage\neo4j_storage.py:80:49: error: Argument 1 to "RelationOperations" has incompatible type "AsyncDriver | None"; expected "AsyncDriver"  [arg-type]
    packages\morag-graph\src\morag_graph\storage\neo4j_storage.py:81:41: error: Argument 1 to "FactOperations" has incompatible type "AsyncDriver | None"; expected "AsyncDriver"  [arg-type]
    packages\morag-graph\src\morag_graph\storage\neo4j_storage.py:82:43: error: Argument 1 to "GraphOperations" has incompatible type "AsyncDriver | None"; expected "AsyncDriver"  [arg-type]
    packages\morag-graph\src\morag_graph\storage\neo4j_storage.py:83:43: error: Argument 1 to "QueryOperations" has incompatible type "AsyncDriver | None"; expected "AsyncDriver"  [arg-type]
    packages\morag-graph\src\morag_graph\storage\neo4j_storage.py:333:16: error: Incompatible return value type (got "str | None", expected "str")  [return-value]
    packages\morag-graph\tests\test_langextract_integration.py:7:1: error: Module "morag_graph.extraction" has no attribute "EntityExtractor"  [attr-defined]
    packages\morag-graph\tests\test_langextract_integration.py:7:1: error: Module "morag_graph.extraction" has no attribute "RelationExtractor"  [attr-defined]
    packages\morag-embedding\src\morag_embedding\service.py:191:34: error: Incompatible types in assignment (expression has type "float", variable has type "int")  [assignment]
    packages\morag-embedding\src\morag_embedding\service.py:277:9: error: Returning Any from function declared to return "EmbeddingResult"  [no-any-return]
    packages\morag-embedding\src\morag_embedding\service.py:395:9: error: Returning Any from function declared to return "BatchEmbeddingResult"  [no-any-return]
    packages\morag-embedding\src\morag_embedding\service.py:657:9: error: Returning Any from function declared to return "SummaryResult"  [no-any-return]
    tests\test_03_integration.py:264:17: error: Statement is unreachable  [unreachable]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:144:9: error: Need type annotation for "entities_to_create" (hint: "entities_to_create: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:471:16: error: Incompatible return value type (got "list[str]", expected "list[Relation]")  [return-value]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:545:21: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:625:21: error: Returning Any from function declared to return "str"  [no-any-return]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:710:32: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:892:28: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:940:9: error: Need type annotation for "chunk_facts" (hint: "chunk_facts: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:987:36: error: Item "None" of "ConnectionOperations | None" has no attribute "_execute_query"  [union-attr]
    packages\morag-graph\src\morag_graph\services\enhanced_fact_processing_service.py:1006:5: error: Name "_store_facts" already defined on line 667  [no-redef]

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 2090: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 101
Total warnings: 435

File: packages\morag-core\src\morag_core\performance.py
  ERRORS:
    Missing import for 'async_wrapper' used in packages\morag-core\src\morag_core\performance.py
    Missing import for 'max_concurrent' used in packages\morag-core\src\morag_core\performance.py
    Missing import for 'process_func' used in packages\morag-core\src\morag_core\performance.py
    Missing import for 'delay_between_batches' used in packages\morag-core\src\morag_core\performance.py
    Missing import for 'items' used in packages\morag-core\src\morag_core\performance.py
    Missing import for 'process_batch' used in packages\morag-core\src\morag_core\performance.py
    Missing import for 'process_batch_with_semaphore' used in packages\morag-core\src\morag_core\performance.py

File: cli\test-query.py
  ERRORS:
    Missing import for 'start_entity' used in cli\test-query.py
    Missing import for 'test_neo4j_connection' used in cli\test-query.py
    Missing import for 'test_graph_analytics' used in cli\test-query.py
    Missing import for 'end_entity' used in cli\test-query.py
    Missing import for 'test_simple_query' used in cli\test-query.py
    Missing import for 'test_multi_hop_reasoning' used in cli\test-query.py
    Missing import for 'KeyboardInterrupt' used in cli\test-query.py
    Missing import for 'test_qdrant_connection' used in cli\test-query.py
    Missing import for 'entity_name' used in cli\test-query.py
    Missing import for 'main' used in cli\test-query.py
    Missing import for 'query' used in cli\test-query.py
    Missing import for 'test_entity_query' used in cli\test-query.py
    Missing import for 'test_graph_traversal' used in cli\test-query.py
    Missing import for 'test_hybrid_retrieval' used in cli\test-query.py
    cli\test-query.py:492: Dangerous use of eval/exec
    cli\test-query.py:792: Dangerous use of eval/exec

File: tests\unit\test_image_processor.py
  ERRORS:
    Missing import for 'mock_tesseract' used in tests\unit\test_image_processor.py
    Missing import for 'mock_model_class' used in tests\unit\test_image_processor.py
    Missing import for 'mock_reader_class' used in tests\unit\test_image_processor.py

File: packages\morag-graph\src\morag_graph\extraction\enhanced_relation_extractor.py
  ERRORS:
    Missing import for 'source_doc_id' used in packages\morag-graph\src\morag_graph\extraction\enhanced_relation_extractor.py
    Missing import for 'entities' used in packages\morag-graph\src\morag_graph\extraction\enhanced_relation_extractor.py
    Missing import for 'existing_relations' used in packages\morag-graph\src\morag_graph\extraction\enhanced_relation_extractor.py

File: packages\morag-document\tests\test_markitdown_service.py
  ERRORS:
    Missing import for 'tmp_path' used in packages\morag-document\tests\test_markitdown_service.py

File: packages\morag-reasoning\src\morag_reasoning\entity_identification.py
  ERRORS:
    Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\entity_identification.py
    Missing import for 'query' used in packages\morag-reasoning\src\morag_reasoning\entity_identification.py

File: packages\morag-graph\src\morag_graph\extraction\graph_builder_interface.py
  ERRORS:
    Missing import for 'facts' used in packages\morag-graph\src\morag_graph\extraction\graph_builder_interface.py

File: tests\integration\test_ai_error_handling_integration.py
  ERRORS:
    Missing import for 'mock_client' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'operation_id' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'always_failing_operation' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'get_ai_service_health' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'gemini_service' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'fast_operation' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'mock_whisper_model' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'initially_failing_operation' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'concurrent_operation' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'execute_with_ai_resilience' used in tests\integration\test_ai_error_handling_integration.py
    Missing import for 'whisper_service' used in tests\integration\test_ai_error_handling_integration.py

File: tests\remote_conversion\test_ingestion_integration.py
  ERRORS:
    Missing import for 'mock_service_class' used in tests\remote_conversion\test_ingestion_integration.py
    Missing import for 'mock_store' used in tests\remote_conversion\test_ingestion_integration.py

File: packages\morag-reasoning\src\morag_reasoning\fact_scorer.py
  ERRORS:
    Missing import for 'facts' used in packages\morag-reasoning\src\morag_reasoning\fact_scorer.py
    Missing import for 'x' used in packages\morag-reasoning\src\morag_reasoning\fact_scorer.py

File: packages\morag-graph\run_extraction.py
  ERRORS:
    Missing import for 'domain' used in packages\morag-graph\run_extraction.py
    Missing import for 'model' used in packages\morag-graph\run_extraction.py
    Missing import for 'KeyboardInterrupt' used in packages\morag-graph\run_extraction.py
    Missing import for 'max_facts' used in packages\morag-graph\run_extraction.py
    Missing import for 'main' used in packages\morag-graph\run_extraction.py
    Missing import for 'min_confidence' used in packages\morag-graph\run_extraction.py
    Missing import for 'exit' used in packages\morag-graph\run_extraction.py
    Missing import for 'extract_facts_from_file' used in packages\morag-graph\run_extraction.py

File: cli\fact-extraction.py
  ERRORS:
    Missing import for 'qdrant_api_key' used in cli\fact-extraction.py
    Missing import for 'collection_name' used in cli\fact-extraction.py
    Missing import for 'neo4j_uri' used in cli\fact-extraction.py
    Missing import for 'neo4j_user' used in cli\fact-extraction.py
    Missing import for 'domain' used in cli\fact-extraction.py
    Missing import for 'store_in_neo4j' used in cli\fact-extraction.py
    Missing import for 'model' used in cli\fact-extraction.py
    Missing import for 'store_in_qdrant' used in cli\fact-extraction.py
    Missing import for 'FactVectorOperations' used in cli\fact-extraction.py
    Missing import for 'max_facts' used in cli\fact-extraction.py
    Missing import for 'main' used in cli\fact-extraction.py
    Missing import for 'extract_facts_from_file' used in cli\fact-extraction.py
    Missing import for 'min_confidence' used in cli\fact-extraction.py
    Missing import for 'qdrant_url' used in cli\fact-extraction.py
    Missing import for 'FactExtractionService' used in cli\fact-extraction.py

File: mypy
  ERRORS:
    scripts\toggle_mock_mode.py:39:5: error: Need type annotation for "env_vars" (hint: "env_vars: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-graph\src\morag_graph\models\document.py:60:67: error: Argument "checksum" to "generate_document_id" of "UnifiedIDGenerator" has incompatible type "Any | None"; expected "str"  [arg-type]
    packages\morag-core\src\morag_core\performance.py:82:9: error: Need type annotation for "operations_by_name" (hint: "operations_by_name: dict[<type>, <type>] = ...")  [var-annotated]
    packages\morag-core\src\morag_core\performance.py:90:32: error: Incompatible types in assignment (expression has type "dict[str, Any]", target has type "int")  [assignment]
    agents\tests\test_consistency.py:26:9: error: "type[TestAgentConsistency]" has no attribute "agents_dir"  [attr-defined]
    agents\tests\test_consistency.py:27:9: error: "type[TestAgentConsistency]" has no attribute "agent_modules"  [attr-defined]
    agents\tests\test_consistency.py:28:9: error: "type[TestAgentConsistency]" has no attribute "agent_classes"  [attr-defined]
    agents\tests\test_consistency.py:29:9: error: "type[TestAgentConsistency]" has no attribute "prompts_config"  [attr-defined]
    agents\tests\test_consistency.py:44:29: error: "type[TestAgentConsistency]" has no attribute "agents_dir"  [attr-defined]
    agents\tests\test_consistency.py:57:28: error: "type[TestAgentConsistency]" has no attribute "agent_modules"  [attr-defined]
    agents\tests\test_consistency.py:60:57: error: "type[TestAgentConsistency]" has no attribute "agents_dir"  [attr-defined]
    agents\tests\test_consistency.py:83:24: error: "type[TestAgentConsistency]" has no attribute "agents_dir"  [attr-defined]
    agents\tests\test_consistency.py:86:17: error: Returning Any from function declared to return "dict[str, Any]"  [no-any-return]
    agents\tests\test_consistency.py:93:28: error: "TestAgentConsistency" has no attribute "agent_modules"  [attr-defined]
    agents\tests\test_consistency.py:144:34: error: "TestAgentConsistency" has no attribute "prompts_config"; maybe "_load_prompts_config"?  [attr-defined]
    agents\tests\test_consistency.py:155:36: error: "TestAgentConsistency" has no attribute "prompts_config"; maybe "_load_prompts_config"?  [attr-defined]
    agents\tests\test_consistency.py:209:40: error: "TestAgentConsistency" has no attribute "agent_classes"  [attr-defined]
    agents\tests\test_consistency.py:238:36: error: "TestAgentConsistency" has no attribute "prompts_config"; maybe "_load_prompts_config"?  [attr-defined]
    agents\tests\test_consistency.py:277:33: error: "TestAgentConsistency" has no attribute "agent_classes"  [attr-defined]
    agents\tests\test_consistency.py:305:28: error: "TestAgentConsistency" has no attribute "agent_modules"  [attr-defined]
    agents\tests\test_consistency.py:328:9: error: "type[TestPromptQuality]" has no attribute "prompts_file"  [attr-defined]
    agents\tests\test_consistency.py:329:19: error: "type[TestPromptQuality]" has no attribute "prompts_file"  [attr-defined]
    agents\tests\test_consistency.py:330:13: error: "type[TestPromptQuality]" has no attribute "prompts_config"  [attr-defined]
    agents\tests\test_consistency.py:336:36: error: "TestPromptQuality" has no attribute "prompts_config"  [attr-defined]
    agents\tests\test_consistency.py:356:36: error: "TestPromptQuality" has no attribute "prompts_config"  [attr-defined]
    agents\tests\test_consistency.py:368:41: error: "TestPromptQuality" has no attribute "prompts_config"  [attr-defined]
    agents\tests\test_generation_agents.py:396:73: error: Argument 2 to "explain" of "ExplanationAgent" has incompatible type "list[str]"; expected "str | None"  [arg-type]
    tests\integration\test_architecture_compliance.py:185:9: error: Need type annotation for "violations" (hint: "violations: list[<type>] = ...")  [var-annotated]
    tests\integration\test_architecture_compliance.py:270:9: error: Need type annotation for "import_graph" (hint: "import_graph: dict[<type>, <type>] = ...")  [var-annotated]
    tests\unit\test_image_processor.py:112:21: error: Need type annotation for "exif_dict"  [var-annotated]

Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 50
Total warnings: 272

File: packages\morag-graph\src\morag_graph\operations\traversal.py
  ERRORS:
    Missing import for 'max_length' used in packages\morag-graph\src\morag_graph\operations\traversal.py
    Missing import for 'max_distance' used in packages\morag-graph\src\morag_graph\operations\traversal.py
    Missing import for 'p' used in packages\morag-graph\src\morag_graph\operations\traversal.py
    Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\operations\traversal.py

File: packages\morag-graph\tests\test_graph_builder_checksum.py
  ERRORS:
    Missing import for 'entity_id' used in packages\morag-graph\tests\test_graph_builder_checksum.py
    Missing import for 'relation_id' used in packages\morag-graph\tests\test_graph_builder_checksum.py
    Missing import for 'relation' used in packages\morag-graph\tests\test_graph_builder_checksum.py

File: packages\morag-core\src\morag_core\agents\advanced_extraction_agent.py
  ERRORS:
    Missing import for 'min_confidence' used in packages\morag-core\src\morag_core\agents\advanced_extraction_agent.py

File: packages\morag-document\examples\process_document.py
  ERRORS:
    Missing import for 'main' used in packages\morag-document\examples\process_document.py

File: tests\unit\test_video_processor.py
  ERRORS:
    Missing import for 'mock_probe' used in tests\unit\test_video_processor.py
    Missing import for 'mock_cv2_cap' used in tests\unit\test_video_processor.py
    Missing import for 'prop' used in tests\unit\test_video_processor.py
    Missing import for 'mock_to_thread' used in tests\unit\test_video_processor.py

File: packages\morag-stages\examples\cli_example.py
  ERRORS:
    Missing import for 'main' used in packages\morag-stages\examples\cli_example.py
    Missing import for 'webhook_url' used in packages\morag-stages\examples\cli_example.py
    Missing import for 'IOError' used in packages\morag-stages\examples\cli_example.py
    Missing import for 'execute_stage_chain' used in packages\morag-stages\examples\cli_example.py
    Missing import for 'execute_single_stage' used in packages\morag-stages\examples\cli_example.py
    Missing import for 'stage_name' used in packages\morag-stages\examples\cli_example.py
    Missing import for 'input_file' used in packages\morag-stages\examples\cli_example.py

File: packages\morag\src\morag\api_models\utils.py
  ERRORS:
    Missing import for 'temp_dir' used in packages\morag\src\morag\api_models\utils.py
    Missing import for 'file_path' used in packages\morag\src\morag\api_models\utils.py

File: packages\morag-graph\src\morag_graph\extraction\systematic_deduplicator.py
  ERRORS:
    Missing import for 'entities_by_chunk' used in packages\morag-graph\src\morag_graph\extraction\systematic_deduplicator.py
    Missing import for 'entity_merge_mapping' used in packages\morag-graph\src\morag_graph\extraction\systematic_deduplicator.py
    Missing import for 'relations_by_chunk' used in packages\morag-graph\src\morag_graph\extraction\systematic_deduplicator.py

File: packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
  ERRORS:
    Missing import for 'EntityDeduplicator' used in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py
    Missing import for 'neo4j_storage' used in packages\morag-graph\tests\integration\test_entity_deduplication_integration.py

File: packages\morag-graph\src\morag_graph\retrieval\context_expansion.py
  ERRORS:
    Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\retrieval\context_expansion.py

File: cli\test-prompt.py
  ERRORS:
    Missing import for 'messages' used in cli\test-prompt.py
    Missing import for 'temperature' used in cli\test-prompt.py
    Missing import for 'main' used in cli\test-prompt.py
    Missing import for 'execute_prompt_with_reasoning' used in cli\test-prompt.py
    Missing import for 'execute_prompt_with_fact_retrieval' used in cli\test-prompt.py
    Missing import for 'KeyboardInterrupt' used in cli\test-prompt.py
    Missing import for 'max_tokens' used in cli\test-prompt.py
    Missing import for 'test_database_connections' used in cli\test-prompt.py
    cli\test-prompt.py:216: Dangerous use of eval/exec
    cli\test-prompt.py:717: Dangerous use of eval/exec

File: packages\morag-services\examples\services_example.py
  ERRORS:
    Missing import for 'main' used in packages\morag-services\examples\services_example.py
    Missing import for 'detect_content_types' used in packages\morag-services\examples\services_example.py
    Missing import for 'count_words' used in packages\morag-services\examples\services_example.py
    Missing import for 'process_batch' used in packages\morag-services\examples\services_example.py
    Missing import for 'use_pipeline' used in packages\morag-services\examples\services_example.py
    Missing import for 'texts' used in packages\morag-services\examples\services_example.py
    Missing import for 'process_single_item' used in packages\morag-services\examples\services_example.py

File: packages\morag\src\morag\utils\response_builder.py
  ERRORS:
    Missing import for 'query_id' used in packages\morag\src\morag\utils\response_builder.py
    Missing import for 'processing_time' used in packages\morag\src\morag\utils\response_builder.py
    Missing import for 'raw_result' used in packages\morag\src\morag\utils\response_builder.py
    Missing import for 'index' used in packages\morag\src\morag\utils\response_builder.py

File: scripts\analyze_dependencies.py
  ERRORS:
    Missing import for 'x' used in scripts\analyze_dependencies.py

Exception in thread Thread-1 (_readerthread):
Traceback (most recent call last):
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\subprocess.py", line 1615, in _readerthread
    buffer.append(fh.read())
                  ~~~~~~~^^
  File "C:\Users\MatthiasHelling\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8d in position 1206: character maps to <undefined>
Static Analysis Results
==================================================
Files analyzed: 25
Total errors: 84
Total warnings: 297

File: cli\deduplicate-entities.py
  ERRORS:
    Missing import for 'language' used in cli\deduplicate-entities.py
    Missing import for 'collection_name' used in cli\deduplicate-entities.py
    Missing import for 'neo4j_username' used in cli\deduplicate-entities.py
    Missing import for 'neo4j_database' used in cli\deduplicate-entities.py
    Missing import for 'neo4j_password' used in cli\deduplicate-entities.py
    Missing import for 'KeyboardInterrupt' used in cli\deduplicate-entities.py
    Missing import for 'neo4j_uri' used in cli\deduplicate-entities.py
    Missing import for 'RuntimeError' used in cli\deduplicate-entities.py
    Missing import for 'main' used in cli\deduplicate-entities.py

File: packages\morag-reasoning\src\morag_reasoning\fact_extraction.py
  ERRORS:
    Missing import for 'request' used in packages\morag-reasoning\src\morag_reasoning\fact_extraction.py
    Missing import for 'f' used in packages\morag-reasoning\src\morag_reasoning\fact_extraction.py
    Missing import for 'chunks' used in packages\morag-reasoning\src\morag_reasoning\fact_extraction.py

File: agents\analysis\query_analysis.py
  ERRORS:
    Missing import for 'context' used in agents\analysis\query_analysis.py
    Missing import for 'user_history' used in agents\analysis\query_analysis.py
    Missing import for 'expand_terms' used in agents\analysis\query_analysis.py
    Missing import for 'query' used in agents\analysis\query_analysis.py

File: packages\morag-youtube\src\morag_youtube\tasks.py
  ERRORS:
    Missing import for 'extract_youtube_metadata' used in packages\morag-youtube\src\morag_youtube\tasks.py
    Missing import for 'process_youtube_video' used in packages\morag-youtube\src\morag_youtube\tasks.py
    Missing import for 'process_youtube_playlist' used in packages\morag-youtube\src\morag_youtube\tasks.py
    Missing import for 'store_embeddings' used in packages\morag-youtube\src\morag_youtube\tasks.py
    Missing import for 'task_id' used in packages\morag-youtube\src\morag_youtube\tasks.py

File: packages\morag\src\morag\server.py
  ERRORS:
    Missing import for 'request' used in packages\morag\src\morag\server.py
    Missing import for 'lifespan' used in packages\morag\src\morag\server.py
    Missing import for 'exc' used in packages\morag\src\morag\server.py

File: packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
  ERRORS:
    Missing import for 'texts' used in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
    Missing import for 'entity_types' used in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py
    Missing import for 'min_confidence' used in packages\morag-core\src\morag_core\agents\entity_extraction_agent.py

File: packages\morag-graph\tests\test_cleanup_manager.py
  ERRORS:
    Missing import for 'relation_id' used in packages\morag-graph\tests\test_cleanup_manager.py
    Missing import for 'failing_delete_entity' used in packages\morag-graph\tests\test_cleanup_manager.py
    Missing import for 'entity_id' used in packages\morag-graph\tests\test_cleanup_manager.py
    Missing import for 'RelationType' used in packages\morag-graph\tests\test_cleanup_manager.py

File: tests\test_api_endpoints.py
  ERRORS:
    Missing import for 'test_api_methods' used in tests\test_api_endpoints.py
    Missing import for 'test_services_routing' used in tests\test_api_endpoints.py
    Missing import for 'test_video_json_support' used in tests\test_api_endpoints.py
    Missing import for 'test_content_type_routing' used in tests\test_api_endpoints.py
    Missing import for 'main' used in tests\test_api_endpoints.py
    Missing import for 'test_audio_configuration' used in tests\test_api_endpoints.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
  ERRORS:
    Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
    Missing import for 'chunk_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
    Missing import for 'entity_names' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
    Missing import for 'context' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py
    Missing import for 'document_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\entity_operations.py

File: packages\morag-graph\src\morag_graph\utils\quota_retry.py
  ERRORS:
    Missing import for 'args' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
    Missing import for 'max_quota_wait' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
    Missing import for 'max_delay' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
    Missing import for 'retry_with_quota_handling' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
    Missing import for 'kwargs' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
    Missing import for 'wrapper' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
    Missing import for 'extraction_func' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py
    Missing import for 'fallback_strategies' used in packages\morag-graph\src\morag_graph\utils\quota_retry.py

File: agents\tests\test_basic_functionality.py
  ERRORS:
    Missing import for 'mock_call_model' used in agents\tests\test_basic_functionality.py

File: packages\morag-reasoning\src\morag_reasoning\recursive_path_follower.py
  ERRORS:
    Missing import for 'initial_entities' used in packages\morag-reasoning\src\morag_reasoning\recursive_path_follower.py
    Missing import for 'entities' used in packages\morag-reasoning\src\morag_reasoning\recursive_path_follower.py
    Missing import for 'max_entities_per_iteration' used in packages\morag-reasoning\src\morag_reasoning\recursive_path_follower.py

File: examples\universal_conversion_demo_alt.py
  ERRORS:
    Missing import for 'demo_text_conversion' used in examples\universal_conversion_demo_alt.py
    Missing import for 'demo_format_detection' used in examples\universal_conversion_demo_alt.py
    Missing import for 'demo_converter_info' used in examples\universal_conversion_demo_alt.py
    Missing import for 'main' used in examples\universal_conversion_demo_alt.py
    Missing import for 'demo_pdf_conversion' used in examples\universal_conversion_demo_alt.py
    Missing import for 'demo_quality_assessment' used in examples\universal_conversion_demo_alt.py

File: packages\morag-youtube\src\morag_youtube\apify_service.py
  ERRORS:
    Missing import for 'video_urls' used in packages\morag-youtube\src\morag_youtube\apify_service.py
    Missing import for 'video_url' used in packages\morag-youtube\src\morag_youtube\apify_service.py
    Missing import for 'use_proxy' used in packages\morag-youtube\src\morag_youtube\apify_service.py
    Missing import for 'extract_transcript' used in packages\morag-youtube\src\morag_youtube\apify_service.py
    Missing import for 'extract_metadata' used in packages\morag-youtube\src\morag_youtube\apify_service.py

File: cli\test-recursive-fact-retrieval.py
  ERRORS:
    Missing import for 'max_facts_per_node' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'language' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'facts_only' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'decay_rate' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'user_query' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'max_depth' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'max_total_facts' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'skip_fact_evaluation' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'main' used in cli\test-recursive-fact-retrieval.py
    Missing import for 'min_fact_score' used in cli\test-recursive-fact-retrieval.py
    cli\test-recursive-fact-retrieval.py:248: Dangerous use of eval/exec
    cli\test-recursive-fact-retrieval.py:590: Dangerous use of eval/exec

File: packages\morag-youtube\src\morag_youtube\cli.py
  ERRORS:
    Missing import for 'transcribe_video' used in packages\morag-youtube\src\morag_youtube\cli.py
    Missing import for 'KeyboardInterrupt' used in packages\morag-youtube\src\morag_youtube\cli.py
    Missing import for 'main' used in packages\morag-youtube\src\morag_youtube\cli.py
    Missing import for 'check_health' used in packages\morag-youtube\src\morag_youtube\cli.py
    Missing import for 'process_batch' used in packages\morag-youtube\src\morag_youtube\cli.py

File: mypy
  ERRORS:
    packages\morag\src\morag\__init__.py: error: Source file found twice under different module names: "morag" and "packages.morag.src.morag"

Static Analysis Results
==================================================
Files analyzed: 23
Total errors: 38
Total warnings: 206

File: packages\morag\src\morag\tasks\enhanced_processing_task.py
  ERRORS:
    Missing import for 'FileNotFoundError' used in packages\morag\src\morag\tasks\enhanced_processing_task.py
    Missing import for '_process' used in packages\morag\src\morag\tasks\enhanced_processing_task.py

File: packages\morag-stages\src\morag_stages\stages\ingestor.py
  ERRORS:
    Missing import for 'output_dir' used in packages\morag-stages\src\morag_stages\stages\ingestor.py
    Missing import for 'IOError' used in packages\morag-stages\src\morag_stages\stages\ingestor.py

File: packages\morag-core\src\morag_core\config\manager.py
  ERRORS:
    Missing import for 's' used in packages\morag-core\src\morag_core\config\manager.py

File: packages\morag\src\morag\api.py
  ERRORS:
    Missing import for 'options' used in packages\morag\src\morag\api.py
    Missing import for 'query' used in packages\morag\src\morag\api.py
    Missing import for 'limit' used in packages\morag\src\morag\api.py
    Missing import for 'filters' used in packages\morag\src\morag\api.py
    Missing import for 'items' used in packages\morag\src\morag\api.py

File: packages\morag-audio\tests\test_service.py
  ERRORS:
    Missing import for 'tmp_path' used in packages\morag-audio\tests\test_service.py

File: packages\morag\tests\test_database_servers.py
  ERRORS:
    Missing import for 'mock_neo4j_storage' used in packages\morag\tests\test_database_servers.py

File: packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
  ERRORS:
    Missing import for 'user_query' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
    Missing import for 'entity_names' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
    Missing import for 'language' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
    Missing import for 'max_facts' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py
    Missing import for 'fact_id' used in packages\morag-reasoning\src\morag_reasoning\enhanced_fact_extraction.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_operations\graph_operations.py
  ERRORS:
    Missing import for 'entity_ids' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\graph_operations.py

File: tests\cli\test-bug-fixes.py
  ERRORS:
    Missing import for 'test_search_endpoint_implementation' used in tests\cli\test-bug-fixes.py
    Missing import for 'main' used in tests\cli\test-bug-fixes.py
    Missing import for 'test_image_processing_api_fix' used in tests\cli\test-bug-fixes.py
    Missing import for 'test_youtube_bot_detection_fix' used in tests\cli\test-bug-fixes.py
    Missing import for 'test_api_content_type_handling' used in tests\cli\test-bug-fixes.py
    Missing import for 'test_web_service_method_signature_fix' used in tests\cli\test-bug-fixes.py

File: packages\morag-graph\tests\test_graph_processor_intention.py
  ERRORS:
    Missing import for 'max_length' used in packages\morag-graph\tests\test_graph_processor_intention.py

File: packages\morag-stages\src\morag_stages\stages\markdown_optimizer.py
  ERRORS:
    Missing import for 'output_dir' used in packages\morag-stages\src\morag_stages\stages\markdown_optimizer.py

File: packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
  ERRORS:
    Missing import for 'relation_types' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'target_entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'min_cluster_size' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'limit' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'source_entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'relation_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'entity_id' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'search_term' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'max_depth' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'max_clusters' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py
    Missing import for 'entity_type' used in packages\morag-graph\src\morag_graph\storage\neo4j_operations\query_operations.py

File: tools\remote-converter\cli.py
  ERRORS:
    Missing import for 'KeyboardInterrupt' used in tools\remote-converter\cli.py

Build checks.............................................................Failed
- hook id: build-check
- exit code: 2

usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: tests/cli/validate-ingestion-fixes.py packages/morag-stages/src/morag_stages/models/context.py packages/morag-graph/src/morag_graph/retrieval/models.py agents/factory/factory.py packages/morag-core/src/morag_core/ai/factory.py packages/morag-stages/src/morag_stages/models/result.py packages/morag-graph/src/morag_graph/maintenance/query_optimizer.py packages/morag-youtube/tests/test_youtube_service.py tests/unit/core/test_base_converter.py packages/morag-services/src/morag_services/cli.py packages/morag-graph/src/morag_graph/storage/__init__.py scripts/check_syntax.py packages/morag-core/src/morag_core/utils/validation.py tests/test_monitoring.py tests/test_device_fallback.py tests/manual/test_transcription_fixes.py tests/cli/test-qdrant-fix.py tests/manual/test_pdf_parsing.py tests/unit/test_audio_converter_fix.py tests/validate_tests.py packages/morag/src/morag/ingest_tasks.py packages/morag-graph/src/morag_graph/models/document_chunk.py packages/morag-graph/tests/test_query_entity_extractor.py packages/morag-web/src/morag_web/processor.py tests/test_universal_converter.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: agents/config/entity_types.py packages/morag-reasoning/src/morag_reasoning/citation_manager.py packages/morag-document/tests/test_service.py tests/test_gpu_error_simulation.py tests/test_openie_pipeline_integration.py agents/tests/test_processing_agents.py tests/unit/test_document_processor.py packages/morag-core/src/morag_core/optimization.py packages/morag-core/src/morag_core/interfaces/embedding.py tests/test_collection_validation.py packages/morag-graph/src/morag_graph/operations/analytics.py packages/morag-services/src/morag_services/service_coordinator.py tests/test_markdown_conversion_endpoint.py packages/morag-reasoning/tests/test_fact_scorer.py packages/morag-graph/src/morag_graph/utils/retry_utils.py tests/test_enhanced_converters.py packages/morag-graph/tests/test_fact_extraction.py packages/morag-graph/src/morag_graph/services/entity_embedding_service.py packages/morag/src/morag/services/document_deduplication_service.py packages/morag-image/src/morag_image/service.py packages/morag-graph/src/morag_graph/extraction/relation_extractor.py refactor/archived_code/chunk_processor_original.py cli/test-custom-database-retrieval.py packages/morag-services/tests/test_pipeline.py packages/morag-core/src/morag_core/utils/file_handling.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-core/src/morag_core/agents/cfg_extraction_agent.py packages/morag-graph/src/morag_graph/models/fact.py packages/morag/src/morag/services/enhanced_webhook_service.py packages/morag-graph/src/morag_graph/utils/id_generation.py packages/morag-web/src/morag_web/web_formatter.py cli/webdav-processor.py packages/morag-document/src/morag_document/converters/chunking_processor.py agents/config/relation_types.py packages/morag-graph/tests/test_hybrid_fact_extraction.py cli/test-temp-directory-validation.py tests/test_page_based_chunking.py scripts/test-docker.py packages/morag/src/morag/agents/morag_pipeline_agent.py packages/morag-document/tests/test_processor.py tests/test_semantic_chunking.py tests/unit/services/test_embedding_service.py tests/unit/test_gemini_service.py packages/morag-core/src/morag_core/interfaces/__init__.py packages/morag-stages/src/morag_stages/stages/markdown_conversion_stage.py test_circular_dependency_fix.py packages/morag-document/src/morag_document/converters/base.py tests/test_debug_session.py packages/morag-services/src/morag_services/service_utilities.py tests/test_enhanced_processing_endpoint.py tests/integration/test_cross_package_integration.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-stages/src/morag_stages/stages/markdown_conversion.py tests/unit/test_content_converter.py scripts/analyze_graph_relationships.py tests/test_17_ingestion_api.py packages/morag-stages/tests/test_stage_chain.py packages/morag-graph/src/morag_graph/builders/enhanced_graph_builder.py packages/morag-graph/src/morag_graph/query/intent_analyzer.py tests/test_ingest_endpoints.py packages/morag-graph/src/morag_graph/extraction/fact_graph_operations.py packages/morag-reasoning/test_reasoning_simple.py packages/morag-reasoning/tests/test_integration.py packages/morag-graph/src/morag_graph/models/entity.py packages/morag-graph/src/morag_graph/retrieval/coordinator.py tests/unit/test_youtube_tasks.py packages/morag-youtube/src/morag_youtube/transcript.py tests/test_confidence_calculation.py packages/morag-services/tests/test_services.py packages/morag-graph/src/morag_graph/extraction/entity_extractor.py packages/morag/src/morag/endpoints/reasoning.py packages/morag-reasoning/tests/test_batch_processing.py packages/morag-graph/src/morag_graph/storage/neo4j_operations/document_operations.py packages/morag/src/morag/api_models/endpoints/files.py tests/manual/test_universal_conversion.py tests/manual/test_audio_transcription_fixes.py packages/morag-graph/src/morag_graph/storage/json_storage.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-audio/examples/process_audio.py packages/morag-core/src/morag_core/utils/deduplication.py tests/cli/test-temp-directory-validation.py examples/video_audio_integration_demo.py examples/enhanced_audio_processing_demo.py packages/morag-web/src/morag_web/tasks.py tests/integration/test_gemini.py packages/morag-graph/src/morag_graph/visualization/langextract_visualizer.py packages/morag-image/examples/simple_image_processing.py packages/morag-image/src/morag_image/processor.py tools/remote-converter/remote_converter.py tests/test_enhanced_entity_normalization.py packages/morag-graph/src/morag_graph/extraction/fact_validator.py tests/unit/test_enhanced_audio_processing.py packages/morag-stages/src/morag_stages/webhook.py scripts/maintenance_runner.py packages/morag-graph/src/morag_graph/maintenance/base.py packages/morag-graph/src/morag_graph/utils/id_migration.py packages/morag-core/src/morag_core/config/example_usage.py tests/test_speaker_diarization_and_rate_limiting_fixes.py packages/morag-graph/tests/test_relationship_cleanup_semantic_value.py packages/morag-graph/tests/test_integration.py packages/morag-graph/tests/test_enhanced_type_generation.py tests/cli/test-youtube.py packages/morag-audio/src/morag_audio/models.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-graph/src/morag_graph/traversal/path_selector.py tests/cli/validate-standalone-cli.py packages/morag-video/src/morag_video/processor.py packages/morag-graph/src/morag_graph/storage/neo4j_operations/connection_operations.py scripts/build_check.py tests/test_search_retrieval_functionality.py packages/morag-core/src/morag_core/__init__.py packages/morag-graph/src/morag_graph/models/types.py packages/morag-reasoning/src/morag_reasoning/graph_fact_extractor.py packages/morag-graph/src/morag_graph/extraction/fact_filter_config.py tests/test_improvements_integration.py packages/morag-graph/src/morag_graph/maintenance/keyword_deduplication.py packages/morag-audio/src/morag_audio/processor.py packages/morag-reasoning/src/morag_reasoning/iterative_retrieval.py tests/test_pydantic_ai_foundation.py packages/morag-core/src/morag_core/ai/exceptions.py tests/utils/mocks.py packages/morag-audio/src/morag_audio/services/topic_segmentation.py packages/morag-services/src/morag_services/pipeline.py packages/morag/src/morag/endpoints/enhanced_query.py packages/morag-services/src/morag_services/data_file_writer.py packages/morag-graph/test_enhanced_types_demo.py packages/morag-core/src/morag_core/converters/__init__.py examples/transcription_fixes_demo_alt.py tests/test_dual_format.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-graph/src/morag_graph/services/atomic_storage_service.py tests/manual/test_video_conversion_fixes.py packages/morag-core/src/morag_core/optional_deps.py tests/integration/test_enhanced_audio_pipeline.py packages/morag-web/src/morag_web/service.py packages/morag-youtube/tests/test_transcript.py packages/morag-stages/src/morag_stages/processors/interface.py packages/morag-video/src/morag_video/converters/video.py tests/test_ui_interop_integration.py packages/morag-graph/src/morag_graph/updates/__init__.py tests/integration/test_video_audio_integration.py tests/integration/test_base_components_integration.py tests/manual/test_audio_format_fix.py agents/config/defaults.py tests/conftest.py agents/examples/basic_usage.py tests/test_production_ingestion_validation.py examples/api_demo.py packages/morag-graph/tests/test_dynamic_types_async.py packages/morag-core/src/morag_core/utils/logging.py packages/morag-services/src/morag_services/__init__.py packages/morag-reasoning/src/morag_reasoning/response_generator.py packages/morag-reasoning/src/morag_reasoning/llm.py tests/unit/test_semantic_chunking.py packages/morag-reasoning/tests/test_llm_client.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-core/src/morag_core/utils/__init__.py tests/test_batch_embedding.py packages/morag-graph/tests/test_dynamic_types.py packages/morag-reasoning/src/morag_reasoning/intelligent_retrieval.py packages/morag-graph/tests/test_intention_based_extraction.py packages/morag-video/src/morag_video/__init__.py agents/generation/models.py packages/morag-image/examples/service_usage.py packages/morag-graph/src/morag_graph/extraction/unified_extraction_pipeline.py scripts/ensure_data_directories.py packages/morag-document/src/morag_document/service.py tests/manual/test_video_format_fix.py tests/cli/test-web.py tests/cli/test-ingest-workflow.py packages/morag-graph/src/morag_graph/extraction/fact_filter.py packages/morag-graph/src/morag_graph/services/entity_categorization_service.py packages/morag-services/src/morag_services/storage.py cli/check-system-status.py packages/morag-web/src/morag_web/converter.py packages/morag-stages/src/morag_stages/exceptions.py tests/test_hybrid_entity_extraction.py tools/remote-converter/test_simple.py agents/tests/test_analysis_agents.py scripts/build_test.py packages/morag-graph/src/morag_graph/discovery/entity_discovery.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: agents/config/validation.py packages/morag-graph/tests/test_checksum_manager.py packages/morag-graph/tests/test_relationship_cleanup.py packages/morag-graph/src/morag_graph/services/fact_embedding_service.py tests/remote_conversion/test_remote_job_api.py packages/morag-graph/src/morag_graph/storage/neo4j_operations/fact_operations.py packages/morag-stages/src/morag_stages/processors/youtube_processor.py tests/test_web_processor.py agents/tests/run_all_tests.py packages/morag-reasoning/src/morag_reasoning/graph_tool_controller.py agents/base/config.py packages/morag-audio/src/morag_audio/__init__.py packages/morag-graph/src/morag_graph/operations/crud.py tests/unit/test_audio_tasks.py tools/remote-converter/test_env_config.py packages/morag-graph/src/morag_graph/services/fact_extraction_service.py packages/morag-reasoning/src/morag_reasoning/models.py refactor/archived_code/services_original.py packages/morag-graph/src/morag_graph/extraction/chunk_keyword_extractor.py packages/morag-stages/tests/test_fact_generator.py packages/morag-graph/src/morag_graph/models/graph.py packages/morag-graph/src/morag_graph/storage/base.py tests/remote_conversion/test_end_to_end.py packages/morag-graph/src/morag_graph/models.py tests/manual/test_audio_extraction_optimization.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-stages/src/morag_stages/processors/document_processor.py tests/manual/test_webhook_demo.py tests/remote_conversion/test_remote_job_model.py packages/morag-core/src/morag_core/interfaces/task.py packages/morag-video/src/morag_video/converters/__init__.py packages/morag-services/src/morag_services/services.py packages/morag-core/src/morag_core/chunking/semantic_chunker.py packages/morag-image/tests/test_service.py packages/morag-services/src/morag_services/content_processors.py packages/morag-stages/src/morag_stages/stages/chunker.py packages/morag/src/morag/database_factory.py tests/unit/test_youtube_processor.py packages/morag-web/examples/web_scraping_example.py cli/morag-stages.py tools/remote-converter/test_imports.py packages/morag-graph/tests/test_dynamic_types_edge_cases.py examples/web_scraping_demo.py tests/cli/test-worker-fixes.py packages/morag-graph/src/morag_graph/builders/graph_builder.py cli/graph_extraction.py packages/morag/src/morag/services/temporary_file_service.py packages/morag-reasoning/test_reasoning_api.py packages/morag-graph/src/morag_graph/traversal/recursive_engine.py packages/morag-core/src/morag_core/chunking/__init__.py tests/unit/test_audio_processor.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag/src/morag/utils/url_path.py packages/morag-stages/tests/test_chunker.py cli/test-remote-conversion.py packages/morag-stages/src/morag_stages/registry.py cli/batch-process-stages.py packages/morag-graph/src/morag_graph/retrieval/fusion.py packages/morag-youtube/examples/youtube_example.py packages/morag-youtube/tests/test_youtube_processor.py tests/remote_conversion/test_remote_job_service.py tests/test_03_performance.py tests/test_15_vector_storage.py tests/unit/test_video_transcript_fix.py packages/morag-graph/tests/test_result_fusion.py tests/integration/test_celery.py packages/morag-graph/tests/test_id_generation.py packages/morag-core/src/morag_core/interfaces/service.py packages/morag-graph/src/morag_graph/ingestion/file_ingestion.py tests/unit/test_video_ffmpeg_error_handling.py cli/validate-standalone-cli.py packages/morag-video/src/morag_video/cli.py packages/morag-reasoning/src/morag_reasoning/recursive_fact_models.py packages/morag-document/tests/test_markitdown_converters.py tests/test_recursive_fact_retrieval.py packages/morag-reasoning/src/morag_reasoning/batch_processor.py packages/morag-core/src/morag_core/ai/models.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: tests/utils/fixtures.py packages/morag-stages/src/morag_stages/stages/fact_extraction_engine.py packages/morag-services/src/morag_services/graph_processor.py tests/test_deployment.py packages/morag-video/src/morag_video/service.py packages/morag-youtube/src/morag_youtube/service.py packages/morag-core/src/morag_core/models/api.py packages/morag-graph/tests/test_hybrid_retrieval.py packages/morag-graph/src/morag_graph/maintenance/config_validator.py packages/morag-document/src/morag_document/processor.py packages/morag-core/src/morag_core/models/document.py packages/morag/src/morag/models/enhanced_query.py packages/morag-core/src/morag_core/interfaces/storage.py packages/morag-graph/src/morag_graph/extraction/graph_utilities.py packages/morag-audio/src/morag_audio/rest_transcription.py tests/test_relationship_merger.py packages/morag-graph/src/morag_graph/services/atomic_batch_builder.py packages/morag-stages/src/morag_stages/stages/fact_generator.py tests/integration/test_audio_pipeline.py packages/morag-reasoning/src/morag_reasoning/response_assessor.py tests/unit/core/test_base_storage.py tests/test_temporary_file_management.py packages/morag/src/morag/pipeline/state_manager.py packages/morag-image/tests/test_cli.py packages/morag/src/morag/api_models/endpoints/stages.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-reasoning/tests/test_response_generator.py packages/morag-document/tests/test_markitdown_base.py packages/morag/tests/test_enhanced_api.py packages/morag-stages/src/morag_stages/processors/web_processor.py cli/create-databases.py packages/morag-graph/tests/test_qdrant_checksum.py packages/morag/tests/test_integration.py tests/test_universal_converter_integration.py packages/morag-graph/src/morag_graph/ingestion/__init__.py packages/morag-core/src/morag_core/converters/base.py tests/unit/test_ai_error_handling.py packages/morag-core/src/morag_core/interfaces/processor.py packages/morag-reasoning/src/morag_reasoning/intelligent_retrieval_models.py cli/test-intelligent-retrieval.py tests/unit/test_enhanced_summarization.py examples/universal_converter_demo.py cli/resume_utils.py packages/morag/src/morag/embedding_processor.py packages/morag/src/morag/result_processor.py packages/morag-document/src/morag_document/cli.py scripts/static_analysis.py scripts/syntax_check.py agents/extraction/models.py tests/manual/test_summarization_fix.py tests/integration/test_video_pipeline.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: tests/test_periodic_cleanup_service.py packages/morag-graph/src/morag_graph/storage/qdrant_operations/fact_vector_operations.py packages/morag/tests/test_unified_endpoint.py packages/morag-stages/src/morag_stages/models/config.py tests/test_document_features.py cli/common_schema.py packages/morag-reasoning/test_multi_hop_cli.py packages/morag-image/tests/conftest.py packages/morag/src/morag/endpoints/recursive_fact_retrieval.py tools/remote-converter/test_env_file.py examples/ai_error_handling_demo.py tests/integration/test_document_tasks.py packages/morag-stages/tests/test_markdown_conversion.py examples/gpu_cpu_fallback_demo.py packages/morag-stages/src/morag_stages/utils/content_type_detector.py packages/morag-graph/src/morag_graph/updates/checksum_manager.py tests/unit/test_pdf_encoding_fix.py packages/morag/src/morag/chunkers.py packages/morag-reasoning/src/morag_reasoning/fact_critic_agent.py tests/test_shared_volume_access.py tests/test_03_database_init.py refactor/archived_code/ingestion_coordinator_original.py packages/morag-graph/run_ingestion.py packages/morag/src/morag/database_handler.py packages/morag-graph/src/morag_graph/extraction/entity_normalizer.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-document/examples/process_text.py packages/morag-graph/src/morag_graph/maintenance/relationship_merger.py packages/morag-stages/tests/test_error_handling.py packages/morag-core/src/morag_core/interfaces/converter.py packages/morag/src/morag/orchestrator.py packages/morag/src/morag/utils/query_validator.py tests/test_rag_quality_validation.py packages/morag/src/morag/__init__.py packages/morag-graph/src/morag_graph/storage/neo4j_operations/base_operations.py packages/morag/src/morag/utils/__init__.py packages/morag-graph/src/morag_graph/extraction/enhanced_entity_extractor.py packages/morag-audio/tests/test_processor.py cli/ingest-markdown-folder.py packages/morag-reasoning/src/morag_reasoning/citation_integrator.py tests/cli/test-remote-debug.py packages/morag-graph/src/morag_graph/updates/cleanup_manager.py packages/morag-graph/src/morag_graph/utils/__init__.py packages/morag-core/src/morag_core/agents/fact_extraction_agent.py packages/morag-document/src/morag_document/converters/document_converters.py packages/morag-stages/src/morag_stages/manager.py agents/config/manager.py tests/unit/test_video_tasks.py packages/morag-stages/tests/test_framework.py packages/morag-audio/src/morag_audio/service.py agents/tests/test_reasoning_agents.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: cli/stage-status.py packages/morag-web/src/morag_web/__init__.py packages/morag-graph/test_dynamic_extraction.py packages/morag-graph/src/morag_graph/maintenance/keyword_hierarchization.py tests/integration/test_enhanced_summary_pipeline.py tests/test_qdrant_collection_unification.py packages/morag-graph/src/morag_graph/builders/__init__.py packages/morag-audio/src/morag_audio/converters/__init__.py packages/morag-document/src/morag_document/converters/base_converter.py scripts/check_imports.py packages/morag-core/src/morag_core/exceptions.py tools/remote-converter/remote_converter_minimal.py packages/morag-core/src/morag_core/chunking/config.py tools/remote-converter/__init__.py tests/unit/processors/test_audio_processor.py packages/morag-graph/src/morag_graph/extraction/fact_entity_converter.py agents/generation/explanation.py packages/morag-core/src/morag_core/models/embedding.py packages/morag/src/morag/utils/file_upload.py packages/morag-image/src/morag_image/converters/image_formatter.py tests/integration/test_youtube_pipeline.py packages/morag-stages/src/morag_stages/processors/registry.py agents/test_simple_import.py packages/morag-core/src/morag_core/utils/processing.py packages/morag-services/src/morag_services/embedding.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: scripts/check_cpu_compatibility.py refactor/archived_code/fact_generator_original.py tests/unit/test_whisper_service.py examples/video_transcript_fix_demo.py packages/morag-graph/run_tests.py tests/test_modular_integration.py packages/morag-graph/src/morag_graph/maintenance/keyword_linking.py packages/morag-image/tests/test_processor.py packages/morag-reasoning/tests/test_iterative_retrieval.py packages/morag-graph/src/morag_graph/extraction/fact_extractor.py packages/morag-graph/src/morag_graph/storage/neo4j_operations/relation_operations.py agents/__init__.py packages/morag/src/morag/graph_extractor_wrapper.py packages/morag-graph/src/morag_graph/maintenance/isolated_nodes_cleanup.py tests/cli/test-docker-fixes.py tests/cli/test-url-debug.py packages/morag-graph/src/morag_graph/models/__init__.py tools/remote-converter/test_converter.py packages/morag/src/morag/services/cleanup_service.py tests/test_15_integration.py packages/morag-graph/test_neo4j_ingestion.py tests/test_component_integration.py packages/morag-services/src/morag_services/contextual_retrieval.py scripts/test_retry_logic.py scripts/validate_graph_output.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-graph/src/morag_graph/models/relation.py scripts/run_keyword_hierarchization.py packages/morag-youtube/src/morag_youtube/processor.py scripts/check_dependencies.py tests/integration/test_webhooks.py scripts/test_docling_docker.py packages/morag-document/src/morag_document/converters/text.py tests/manual/test_qdrant_connection.py packages/morag-graph/tests/test_graph_builder.py packages/morag-core/src/morag_core/services/language_detection.py packages/morag-document/src/morag_document/services/markitdown_service.py tests/test_chunk_size_config.py tests/cli/test-ingestion-fixes.py scripts/demo_graph_extractor.py packages/morag-graph/tests/test_fact_models.py tests/manual/test_qdrant_network.py tests/integration/test_package_independence.py agents/extraction/__init__.py packages/morag-stages/tests/test_models.py tests/cli/test-document.py scripts/install_morag.py packages/morag-core/src/morag_core/utils/device.py packages/morag-reasoning/tests/test_path_selection.py scripts/test-docker-build.py packages/morag-graph/src/morag_graph/extraction/base.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: agents/tests/test_extraction_agents.py agents/factory/registry.py packages/morag-audio/src/morag_audio/services/speaker_diarization.py scripts/generate_test_audio.py packages/morag-reasoning/tests/conftest.py packages/morag/src/morag/dependencies.py tests/test_race_condition_integration.py packages/morag-graph/src/morag_graph/query/__init__.py examples/page_based_chunking_demo.py tests/manual/test_qdrant_auth.py packages/morag-stages/src/morag_stages/error_handling.py packages/morag-reasoning/src/morag_reasoning/path_selection.py packages/morag-stages/src/morag_stages/stages/conversion_processors.py packages/morag-stages/src/morag_stages/processors/audio_processor.py tests/test_progress_logging.py packages/morag-graph/src/morag_graph/models/database_config.py packages/morag-audio/tests/test_rest_transcription.py packages/morag-stages/src/morag_stages/file_manager.py tests/test_file_upload_api.py packages/morag-graph/src/morag_graph/query/entity_extractor.py packages/morag-graph/src/morag_graph/storage/qdrant_storage.py tests/test_pydantic_ai_extraction.py tests/integration/test_content_conversion_integration.py tests/test_additional_agents.py packages/morag-reasoning/src/morag_reasoning/graph_traversal_agent.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag/src/morag/ingestion_coordinator.py tests/test_03_integration.py tests/unit/test_vision_service.py tests/test_quality_gates_configuration.py packages/morag-stages/src/morag_stages/stages/fact_generation_stage.py packages/morag-graph/src/morag_graph/extraction/fact_graph_builder.py agents/factory/utils.py packages/morag-reasoning/tests/test_graph_tool_controller.py tests/test_17_integration.py packages/morag-graph/tests/test_langextract_integration.py packages/morag-graph/src/morag_graph/services/enhanced_fact_processing_service.py tests/test_celery_exception_handling.py tests/cli/test-embedding-fix.py packages/morag/src/morag/endpoints/remote_jobs.py scripts/test-optimized-build.py packages/morag-embedding/src/morag_embedding/service.py packages/morag-audio/src/morag_audio/cli.py packages/morag/src/morag/services/__init__.py packages/morag-stages/src/morag_stages/processors/video_processor.py packages/morag-reasoning/src/morag_reasoning/recursive_fact_retrieval_service.py packages/morag-graph/src/morag_graph/storage/neo4j_storage.py packages/morag/src/morag/endpoints/intelligent_retrieval.py packages/morag-image/src/morag_image/cli.py packages/morag-document/src/morag_document/converters/__init__.py tests/test_basic_enhanced_converters.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: tests/manual/test_gpu_detection.py packages/morag-document/src/morag_document/converters/markitdown_base.py packages/morag-core/src/morag_core/performance.py packages/morag-core/src/morag_core/ai/base_agent.py cli/test-query.py tests/unit/test_image_processor.py packages/morag-graph/src/morag_graph/extraction/enhanced_relation_extractor.py tests/integration/test_architecture_compliance.py packages/morag-document/tests/test_markitdown_service.py tests/test_api_chunk_size.py packages/morag-core/src/morag_core/config.py packages/morag-reasoning/src/morag_reasoning/entity_identification.py packages/morag-graph/src/morag_graph/extraction/graph_builder_interface.py tests/integration/test_ai_error_handling_integration.py tests/test_enhanced_extraction.py packages/morag-graph/src/morag_graph/models/document.py packages/morag-core/src/morag_core/models/__init__.py agents/tests/test_generation_agents.py agents/tests/test_consistency.py tests/remote_conversion/test_ingestion_integration.py packages/morag-reasoning/src/morag_reasoning/fact_scorer.py scripts/toggle_mock_mode.py tests/unit/test_audio_transcript_fix.py packages/morag-graph/run_extraction.py cli/fact-extraction.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-graph/src/morag_graph/extraction/__init__.py tests/test_document_improvements_integration.py tests/test_document_deduplication.py packages/morag-graph/src/morag_graph/operations/traversal.py packages/morag-graph/tests/test_graph_builder_checksum.py packages/morag-stages/src/morag_stages/stages/converter_factory.py packages/morag/tests/agents/test_morag_pipeline_agent.py packages/morag-core/src/morag_core/agents/advanced_extraction_agent.py packages/morag-document/examples/process_document.py tests/unit/test_video_processor.py packages/morag-youtube/src/morag_youtube/__init__.py packages/morag-stages/examples/cli_example.py tests/cli/test-metadata-null-fix.py packages/morag-document/src/morag_document/converters/document_formatter.py packages/morag/src/morag/api_models/utils.py packages/morag-graph/src/morag_graph/extraction/systematic_deduplicator.py tests/test_web_tasks.py packages/morag-graph/tests/integration/test_entity_deduplication_integration.py packages/morag-graph/src/morag_graph/retrieval/context_expansion.py tools/remote-converter/config.py cli/test-prompt.py packages/morag-services/examples/services_example.py packages/morag/src/morag/utils/response_builder.py scripts/analyze_dependencies.py packages/morag/src/morag/chunk_processor.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag-graph/src/morag_graph/operations/__init__.py cli/deduplicate-entities.py packages/morag-stages/src/morag_stages/stages/markdown_validators.py packages/morag-reasoning/src/morag_reasoning/fact_extraction.py agents/analysis/query_analysis.py packages/morag-audio/src/morag_audio/services/__init__.py packages/morag-youtube/src/morag_youtube/tasks.py packages/morag/src/morag/server.py packages/morag-core/src/morag_core/agents/entity_extraction_agent.py packages/morag-graph/tests/test_cleanup_manager.py agents/base/template.py packages/morag-graph/src/morag_graph/models/atomic_storage_batch.py tests/test_api_endpoints.py packages/morag-graph/src/morag_graph/storage/neo4j_operations/entity_operations.py tests/test_document_processing_improvements.py packages/morag-graph/src/morag_graph/utils/quota_retry.py packages/morag-audio/src/morag_audio/converters/audio_converter.py agents/tests/test_basic_functionality.py packages/morag-reasoning/src/morag_reasoning/recursive_path_follower.py examples/universal_conversion_demo_alt.py packages/morag-youtube/src/morag_youtube/apify_service.py cli/test-recursive-fact-retrieval.py packages/morag-youtube/src/morag_youtube/cli.py packages/morag-graph/tests/traversal/test_path_selector.py tests/test_03_qdrant_service.py
usage: build_check.py [-h] [--skip-tests] [--json]
                      [--project-root PROJECT_ROOT]
build_check.py: error: unrecognized arguments: packages/morag/src/morag/tasks/enhanced_processing_task.py packages/morag-stages/src/morag_stages/stages/ingestor.py packages/morag-core/src/morag_core/config/manager.py packages/morag/src/morag/api.py packages/morag-audio/tests/test_service.py packages/morag-stages/tests/test_registry.py packages/morag/tests/test_database_servers.py packages/morag-reasoning/src/morag_reasoning/enhanced_fact_extraction.py packages/morag-core/src/morag_core/chunking/factory.py packages/morag-graph/src/morag_graph/storage/neo4j_operations/graph_operations.py tests/cli/test-bug-fixes.py packages/morag-core/src/morag_core/ai/providers.py packages/morag-core/src/morag_core/config/unified.py refactor/archived_code/markdown_conversion_original.py packages/morag-graph/src/morag_graph/__init__.py tests/test_web_integration.py packages/morag-graph/tests/test_graph_processor_intention.py tests/remote_conversion/test_remote_job_repository.py packages/morag-stages/src/morag_stages/stages/markdown_optimizer.py packages/morag-stages/src/morag_stages/models/stage.py packages/morag-graph/src/morag_graph/storage/neo4j_operations/query_operations.py tests/remote_conversion/run_tests.py tools/remote-converter/cli.py

trim trailing whitespace.................................................Passed
fix end of files.........................................................Passed
check yaml...........................................(no files to check)Skipped
check for added large files..............................................Passed
check for merge conflicts................................................Passed
debug statements (python)................................................Passed
black....................................................................Passed
isort....................................................................Passed
