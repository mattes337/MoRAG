[mypy]
# Global mypy configuration

# Python version
python_version = 3.11

# Import discovery
namespace_packages = True
explicit_package_bases = True
mypy_path = packages/morag/src:packages/morag-core/src:packages/morag-audio/src:packages/morag-document/src:packages/morag-video/src:packages/morag-web/src:packages/morag-graph/src:packages/morag-embedding/src:packages/morag-stages/src

# Warnings
warn_return_any = True
warn_unused_configs = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True

# Error handling
show_error_codes = True
show_column_numbers = True
show_error_context = True

# Strictness (start lenient, can be made stricter later)
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = True
disallow_untyped_decorators = False

# Handle missing imports gracefully
ignore_missing_imports = True
follow_imports = silent

# Exclude problematic directories
exclude = build/|dist/|\.venv/|venv/|\.git/|__pycache__/|\.pytest_cache/|\.mypy_cache/|htmlcov/|node_modules/|tests/

# Per-module options for installed packages
[mypy-morag.*]
ignore_missing_imports = True

[mypy-src.*]
ignore_missing_imports = True

[mypy-packages.*]
ignore_missing_imports = True

# Third-party libraries
[mypy-pytest.*]
ignore_missing_imports = True

[mypy-fastapi.*]
ignore_missing_imports = True

[mypy-pydantic.*]
ignore_missing_imports = True

[mypy-uvicorn.*]
ignore_missing_imports = True

[mypy-celery.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

[mypy-yaml.*]
ignore_missing_imports = True

[mypy-requests.*]
ignore_missing_imports = True

[mypy-numpy.*]
ignore_missing_imports = True

[mypy-pandas.*]
ignore_missing_imports = True
